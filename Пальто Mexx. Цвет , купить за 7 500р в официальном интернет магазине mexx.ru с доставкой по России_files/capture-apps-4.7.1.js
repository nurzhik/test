var VeAPI={version:{major:4,minor:7,revision:1,deploy:1,build:1}};VeAPI.ready||(VeAPI.ready=function(a){function b(){clearTimeout(d),a(veTagData)}function c(){"complete"===document.readyState&&(document.addEventListener?document.removeEventListener("DOMContentLoaded",c,!1):document.detachEvent("onreadystatechange",c),b())}if("complete"===document.readyState)a(veTagData);else{var d=setInterval(c,10);document.addEventListener?document.addEventListener("DOMContentLoaded",c):document.attachEvent("onreadystatechange",c)}},setTimeout(function(){function a(a){if(a.enabled)for(var b=0,c=p.length;c>b;b+=1)if(a[p[b]])return!0;return!1}function b(b){for(var c,d=[],e=0,f=b.length;f>e;e+=1)c=b[e],c.name=c.name.toLowerCase(),a(c)&&d.push(c.name);return d}function c(a){"use strict";a.manager={isLoaded:function(){return g?g.isLoaded():!1},isPlaying:function(){return g?g.isPlaying():!1},isDelayed:function(){return g?g.isDelayed():!1},isPaused:function(){return g?g.isPaused():!1},isStopped:function(){return g?g.isStopped():!1},hasBeenShown:function(){return g?g.hasBeenShown():!1},delay:function(){g&&g.delay()},resume:function(){g&&g.resume()},pause:function(){g&&g.pause()},stop:function(){g&&g.stop()},status:function(){g&&g.logCurrentStatusName()},isBackButtonEventAdded:function(){return g?g.isEventAdded("backButton"):!1},isExitEventAdded:function(){return g?g.isEventAdded("exit"):!1},isInactivityEventAdded:function(){return g?g.isEventAdded("inactivity"):!1},isExitIntentEventAdded:function(){return g?g.isEventAdded("exitIntent"):!1}},a.chat={show:function(){g.isLoaded()&&g.runApp("chat")}},a.assist={show:function(){g.isLoaded()&&g.runApp("assist")}},a.promote={show:function(){g.isLoaded()&&g.runApp("promote")}},a.JSONP=k.ajax.JSONP(),a.getVersion=function(){k.shell.info("VeApps "+a.version.major+"."+a.version.minor+"."+a.version.revision+" Deploy:"+a.version.deploy+" Build:"+a.version.build)},a.capture={getCapturedControls:function(){return[]}},k.shell.info("VeApps "+a.version.major+"."+a.version.minor+"."+a.version.revision+" Deploy:"+a.version.deploy+" Build:"+a.version.build)}function d(a){"use strict";function b(){var a={":text":"value",":radio":"value",":checkbox":"checkbox",":hidden":"value",select:"value",textarea:"value"},b=a[p];return"Value"===n?b?b:"innerHTML":n}function c(){var c={":text":"input[type='text']",":radio":"input[type='radio']",":checkbox":"input[type='checkbox']",":hidden":"input[type='hidden']",select:"select",textarea:"textarea"},d=c[a.HtmlType];n=b(),d&&(p=d)}function d(){var a=0,b=j.length;return"Raw"===l||"RawSeries"===l?a:(0===j.indexOf("*")&&a++,j.indexOf("*",1)===b-1&&(a+=2),a)}function e(){var b=d(a),c=[function(){return{clientFieldName:j,fieldTypeName:l}},function(){return{clientFieldName:p+"["+l.toLowerCase()+"$='"+j.substring(1,j.length)+"']",fieldTypeName:"RawSeries"}},function(){return{clientFieldName:p+"["+l.toLowerCase()+"^='"+j.substring(0,j.length-1)+"']",fieldTypeName:"RawSeries"}},function(){return{clientFieldName:p+"["+l.toLowerCase()+"*='"+j.substring(0,j.length-1).substring(1,j.length)+"']",fieldTypeName:"RawSeries"}}][b]();j=c.clientFieldName,l=c.fieldTypeName}function f(){var a={Id:"#"+j,Name:"[name='"+j+"']",Class:"."+j},b=a[l];b&&(j=b,l="Raw")}function g(){return"Raw"===l||"RawSeries"===l?void(n=b()):(c(),e(),void f())}function h(){var b=d(a),c=["","^","$","*"];return c[b]}function i(){return"Raw"===l||"RawSeries"===l?VEjQuery(j):VEjQuery()}var j=a.ClientFieldName,k=a.DomEvent,l=a.FieldTypeName,m=a.FormMappingId,n=a.HtmlAttributeTag,o=a.IdentifyAbandonment,p=a.HtmlType,q=a.FormMappingTypeId,r=a.FormTypeId,s=a.isEmail,t=a.HtmlPath;g(),this.ClientFieldName=j,this.DomEvent=k,this.FieldTypeName=l,this.FormMappingId=m,this.HtmlAttributeTag=n,this.IdentifyAbandonment=o,this.HtmlType=p,this.formMappingTypeId=q,this.formTypeId=r,this.isEmail=s,this.htmlPath=t,this.getElementsWithSelector=function(){return i()},this.getFilter=function(){return h()}}function e(){"use strict";function a(){var a="klarnaCheckoutIntegration";document.getElementById(a)||(d=document.createElement("div"),d.id=a,d.style.display="none",document.body.appendChild(d))}function b(a,b){var c="h_KlarnaCheckout_",e=document.getElementById(c+a);e||(e=document.createElement("input"),e.type="hidden",e.id=c+a,e.name=c+a,d.appendChild(e)),e.value=b}function c(a){var c,d,e,f,g=["email","postal_code","given_name","family_name"];if(a)for(d=0,e=g.length;e>d;d++)c=g[d],f=a[c],f&&b(c,f)}var d;void 0!==window._klarnaCheckout&&window._klarnaCheckout(function(b){a(),k.shell.info("Loading Klarna intergation"),b.on({change:function(a){c(a)}})})}function f(){"use strict";function a(){g.onSettingsDelaying()}function b(){a()}function c(){a()}function d(){function b(){a()}var c=document.getElementsByTagName("form");return{addEvent:function(){k.event.addEventsToArray(c,"submit",b,!0)},removeEvent:function(){k.event.removeEventsFromArray(c,"submit",b,!0)}}}function e(){function b(){a()}var c=[];return{addEvent:function(a){c=k.dom.getElementsByQuerySelectors(a),k.event.addEventsToArray(c,"click",b,!0)},removeEvent:function(){k.event.removeEventsFromArray(c,"click",b,!0)}}}function f(){function b(){a()}var c=[];return{addEvent:function(a){c=k.dom.getElementsByQuerySelectors(a),k.event.addEventsToArray(c,"mousedown",b,!0),k.event.addEventsToArray(c,"touchstart",b,!0)},removeEvent:function(){k.event.removeEventsFromArray(c,"mousedown",b,!0),k.event.removeEventsFromArray(c,"touchstart",b,!0)}}}function h(a,b){p[a]!==b&&(p[a]=b,g.onSettingsPausingChange(p))}function i(a){h(a,!0)}function j(a){h(a,!1)}function l(){function a(a){var b,c=q.length;for(b=0;c>b;b++)if(a.id==="ve-"+q[b]+"-iframe")return!0;return!1}function b(){window.setTimeout(function(){document.activeElement?"iframe"!==document.activeElement.tagName.toLowerCase()||a(document.activeElement)?j(c):i(c):j(c)},10)}var c="iframeHandler";return{addEvent:function(){var a=document.getElementsByTagName("iframe");k.event.addEvent(window,"focus",b,!0),k.event.addEvent(window,"blur",b,!0),a&&"body"===document.activeElement.tagName.toLowerCase()&&(a[0].focus(),document.body.hasAttribute("tabindex")&&""!==document.body.getAttribute("tabindex")?document.body.focus():(document.body.setAttribute("tabindex","0"),document.body.focus(),document.body.removeAttribute("tabindex"))),b()},removeEvent:function(){k.event.removeEvent(window,"focus",b,!0),k.event.removeEvent(window,"blur",b,!0),j(c)}}}function m(){function a(a){f=k.array.removeElementFromArray(f,a),0===f.length&&j(e)}function b(c){c.closed?a(c):setTimeout(function(){b(c)},500)}function c(a){f.push(a),f.length>=1&&i(e),b(a)}function d(){k.shell.log("Overwriting window.open"),window.open=function(a){return function(b,d,e){var f;return d=d||"",f=a(b,d,e),f&&c(f),f}}(window.open)}var e="windowOpenHandler",f=[],g=window.open;return{addEvent:function(){d()},removeEvent:function(){window.open=g,f=[],j(e)}}}function n(){function a(){i(c)}function b(){j(c)}var c="autocompleteInputsHandler",d=null;return{addEvent:function(c){var e;for(d=k.dom.getElementsByQuerySelectors(c),e=0;e<d.length;e++)k.event.addEvent(d[e],"focus",a,!0),k.event.addEvent(d[e],"blur",b,!0)},removeEvent:function(){var e;if(d)for(e=0;e<d.length;e++)k.event.removeEvent(d[e],"focus",a,!0),k.event.removeEvent(d[e],"blur",b,!0);j(c)}}}function o(){g.onSettingsStoppingApps()}var p={iframeHandler:!1,windowOpenHandler:!1,inputSearchAutocomplete:!1},r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=new function(){function a(){o()}var b=[];this.addEvent=function(c){b=k.dom.getElementsByQuerySelectors(c),k.event.addEventsToArray(b,"click",a)},this.removeEvent=function(){k.event.removeEventsFromArray(b,"click",a)}},B=new function(){function a(){o()}var b=[];this.addEvent=function(c){b=k.dom.getElementsByQuerySelectors(c),k.event.addEventsToArray(b,"mousedown",a)},this.removeEvent=function(){k.event.removeEventsFromArray(b,"mousedown",a)}},C=new function(){function a(){k.shell.log("Element stopping event triggered"),o()}function b(b,c){function d(b){k.event.addEvent(b,c,a),i.push({element:b,eventType:c,handler:a})}function e(a){setTimeout(function(){d(a)},200)}for(var f=0,g=k.dom.querySelectorAll(b);f<g.length;f+=1)e(g[f])}function c(a){var b=0,c=[];for(b=0;b<h.length;b+=1)h[b].creatorElement===a&&c.push(b);return c}function d(a,d){for(var e=0,g=null,i=c(d);e<i.length;e+=1)g=h[i[e]],g.elementsQueryArray.length>0?f(g.elementsQueryArray[g.elementsQueryArray.length-1],g.eventsTypeArray[g.eventsTypeArray.length-1],g.elementsQueryArray.slice(0,g.elementsQueryArray.length-1),g.eventsTypeArray.slice(0,g.eventsTypeArray.length-1),g.finalElementQuery,g.finalElementEventType):b(g.finalElementQuery,g.finalElementEventType)}function e(a,b,c,e,f,g){function i(b){d(b,a)}k.event.addEvent(a,b,i),h.push({creatorElement:a,eventType:b,handler:i,elementsQueryArray:c,eventsTypeArray:e,finalElementQuery:f,finalElementEventType:g})}function f(a,b,c,d,f,g){var h=0,i=k.dom.querySelectorAll(a);if(i.length>0)for(;h<i.length;h+=1)e(i[h],b,c,d,f,g)}function g(a,b,c,d,e){for(var h=0;h<a.length;h+=1)a[h].doesElementExistOnLoad?f(a[h].elementQuery,a[h].eventType,b,c,d,e):(b.push(a[h].elementQuery),c.push(a[h].eventType),g(a[h].creatorElements,b,c,d,e))}var h=[],i=[],j=null;this.addEvent=function(a){j=a;for(var c=0;c<j.length;c+=1)j[c].doesElementExistOnLoad?b(j[c].elementQuery,j[c].eventType):g(j[c].creatorElements,[],[],j[c].elementQuery,j[c].eventType)},this.removeEvent=function(){for(var a=0;a<h.length;a+=1)k.event.removeEvent(h[a].creatorElement,h[a].eventType,h[a].handler);for(a=0;a<i.length;a+=1)k.event.removeEvent(i[a].element,i[a].eventType,i[a].handler);h=[],i=[]}};return{init:function(){k.shell.log("Loading SettingsManager"),r=new k.modules.Event(document.body,"mousedown",b,!0),s=new k.modules.Event(document.body,"touchstart",b,!0),t=new k.modules.Event(document.body,"keydown",c,!0),u=d(),v=e(),w=f(),x=l(),y=m(),z=n()},addSettings:function(a,b){switch(a){case"default":r.addEvent(),s.addEvent(),t.addEvent(),u.addEvent(),x.addEvent();break;case"elementsToDelayOnClick":v.addEvent(b);break;case"elementsToDelayOnMouseDown":w.addEvent(b);break;case"windowOpenHandler":b&&y.addEvent();break;case"autocompleteInputsHandler":z.addEvent(b);break;case"elementsStoppingAppsOnClick":A.addEvent(b);break;case"elementsStoppingAppsOnMouseDown":B.addEvent(b);break;case"elementsStoppingAppsOnEvent":C.addEvent(b)}},removeSettings:function(a){switch(a){case"default":r.removeEvent(),s.removeEvent(),t.removeEvent(),u.removeEvent(),x.removeEvent();break;case"elementsToDelayOnClick":v.removeEvent();break;case"elementsToDelayOnMouseDown":w.removeEvent();break;case"windowOpenHandler":y.removeEvent();break;case"autocompleteInputsHandler":z.removeEvent();break;case"elementsStoppingAppsOnClick":A.removeEvent();break;case"elementsStoppingAppsOnMouseDown":B.removeEvent();break;case"elementsStoppingAppsOnEvent":C.removeEvent()}}}}var g,h=veTagData,i=function(a){var b,c=0,d=0,e={unsupportedBrowsersVersionPlatform:{},domainsToIgnore:[],windowOpenHandler:!0,hasCustomSettings:!1,consoleMessagesEnabled:!1,waitForLoad:!0};for(b in e)void 0===a[b]&&(a[b]=e[b]);if(a.domainsToIgnore.push(h.veHostDomain.split("//")[1]),a.elementsToIgnore){if(a.elementsStoppingAppsOnClick)for(d=a.elementsToIgnore.length,c=0;d>c;c+=1)a.elementsStoppingAppsOnClick.push(a.elementsToIgnore[c]);else a.elementsStoppingAppsOnClick=a.elementsToIgnore;delete a.elementsToIgnore}if(a.inputSearchAutocomplete){if(a.autocompleteInputsHandler)for(d=a.autocompleteInputsHandler.length,c=0;d>c;c+=1)a.autocompleteInputsHandler.push(a.inputSearchAutocomplete[c]);else a.autocompleteInputsHandler=a.inputSearchAutocomplete;delete a.inputSearchAutocomplete}return a}(veTagData.settings),j=j||{},k=k||{},i=i||{},l=0,m=2,n=6,o=document.referrer,p=["exit","inactivity","backButton","load","exitIntent"],q=b(h.apps);!function(a,b){function c(a){var b=a.length,c=ra.type(a);return ra.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=V[a]={};return ra.each(a.match(ta)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ra.acceptData(a)){var f,g,h=ra.expando,i="string"==typeof c,j=a.nodeType,k=j?ra.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=ia.pop()||ra.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=ra.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=ra.extend(k[l],c):k[l].data=ra.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[ra.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[ra.camelCase(c)])):g=f,g}}function f(a,b,c){if(ra.acceptData(a)){var d,e,f,g=a.nodeType,i=g?ra.cache:a,j=g?a[ra.expando]:ra.expando;if(i[j]){if(b&&(f=c?i[j]:i[j].data)){for((ra.isArray(b)?b=b.concat(ra.map(b,ra.camelCase)):b in f?b=[b]:(b=ra.camelCase(b),b=b in f?[b]:b.split(" ")),d=0,e=b.length);e>d;d++)delete f[b[d]];if(!(c?h:ra.isEmptyObject)(f))return}(c||(delete i[j].data,h(i[j])))&&(g?ra.cleanData([a],!0):ra.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(X,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:W.test(d)?ra.parseJSON(d):d}catch(f){}ra.data(a,c,d)}else d=b}return d}function h(a){for(var b in a)if(("data"!==b||!ra.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){if(b=b||0,ra.isFunction(b))return ra.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return ra.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=ra.grep(a,function(a){return 1===a.nodeType});if(Xa.test(b))return ra.filter(b,d,!c);b=ra.filter(b,d)}return ra.grep(a,function(a){return ra.inArray(a,b)>=0===c})}function m(a){var b=$a.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function n(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function o(a){var b=a.getAttributeNode("type");return a.type=(b&&b.specified)+"/"+a.type,a}function p(a){var b=kb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)ra._data(c,"globalEval",!b||ra._data(b[d],"globalEval"))}function r(a,b){if(1===b.nodeType&&ra.hasData(a)){var c,d,e,f=ra._data(a),g=ra._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ra.event.add(b,c,h[c][d])}g.data&&(g.data=ra.extend({},g.data))}}function s(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ra.support.noCloneEvent&&b[ra.expando]){e=ra._data(b);for(d in e.events)ra.removeEvent(b,d,e.handle);b.removeAttribute(ra.expando)}"script"===c&&b.text!==a.text?(o(b).text=a.text,p(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ra.support.html5Clone&&a.innerHTML&&!ra.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&hb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function t(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==ca?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==ca?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ra.nodeName(e,c)?g.push(e):ra.merge(g,t(e,c));return c===b||c&&ra.nodeName(a,c)?ra.merge([a],g):g}function u(a){hb.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Eb.length;e--;)if(b=Eb[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===ra.css(a,"display")||!ra.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ra._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=ra._data(d,"olddisplay",B(d.nodeName)))):f[g]||(e=w(d),(c&&"none"!==c||!e)&&ra._data(d,"olddisplay",e?c:ra.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function y(a,b,c){var d=xb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ra.css(a,c+Db[f],!0,e)),d?("content"===c&&(g-=ra.css(a,"padding"+Db[f],!0,e)),"margin"!==c&&(g-=ra.css(a,"border"+Db[f]+"Width",!0,e))):(g+=ra.css(a,"padding"+Db[f],!0,e),"padding"!==c&&(g+=ra.css(a,"border"+Db[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=qb(a),g=ra.support.boxSizing&&"border-box"===ra.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=rb(a,b,f),(0>e||null==e)&&(e=a.style[b]),yb.test(e))return e;d=g&&(ra.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=da,c=Ab[a];return c||(c=C(a,b),"none"!==c&&c||(pb=(pb||ra("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(pb[0].contentWindow||pb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),pb.detach()),Ab[a]=c),c}function C(a,b){var c=ra(b.createElement(a)).appendTo(b.body),d=ra.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(ra.isArray(b))ra.each(b,function(b,e){c||Gb.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ra.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ta)||[];if(ra.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,c,d,e){function f(i){var j;return g[i]=!0,ra.each(a[i]||[],function(a,i){var k=i(c,d,e);return"string"!=typeof k||h||g[k]?h?!(j=k):b:(c.dataTypes.unshift(k),f(k),!1)}),j}var g={},h=a===Wb;return f(c.dataTypes[0])||!g["*"]&&f("*")}function G(a,c){var d,e,f=ra.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ra.extend(!0,a,d),a}function H(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(h in k)h in d&&(c[k[h]]=d[h]);for(;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):b}function I(a,b){var c,d,e,f,g={},h=0,i=a.dataTypes.slice(),j=i[0];if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i[1])for(e in a.converters)g[e.toLowerCase()]=a.converters[e];for(;d=i[++h];)if("*"!==d){if("*"!==j&&j!==d){if(e=g[j+" "+d]||g["* "+d],!e)for(c in g)if(f=c.split(" "),f[1]===d&&(e=g[j+" "+f[0]]||g["* "+f[0]])){e===!0?e=g[c]:g[c]!==!0&&(d=f[0],i.splice(h--,0,d));break}if(e!==!0)if(e&&a["throws"])b=e(b);else try{b=e(b)}catch(k){return{state:"parsererror",error:e?k:"No conversion from "+j+" to "+d}}}j=d}return{state:"success",data:b}}function J(){try{return new a.XMLHttpRequest}catch(b){}}function K(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function L(){return setTimeout(function(){Zb=b}),Zb=ra.now()}function M(a,b){ra.each(b,function(b,c){for(var d=(dc[b]||[]).concat(dc["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function N(a,b,c){var d,e,f=0,g=cc.length,h=ra.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Zb||L(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ra.extend({},b),opts:ra.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Zb||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ra.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(O(k,j.opts.specialEasing);g>f;f++)if(d=cc[f].call(j,a,k,j.opts))return d;return M(j,k),ra.isFunction(j.opts.start)&&j.opts.start.call(a,j),ra.fx.timer(ra.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a,b){var c,d,e,f,g;for(e in a)if(d=ra.camelCase(e),f=b[d],c=a[e],ra.isArray(c)&&(f=c[1],c=a[e]=c[0]),e!==d&&(a[d]=c,delete a[e]),g=ra.cssHooks[d],g&&"expand"in g){c=g.expand(c),delete a[d];for(e in c)e in a||(a[e]=c[e],b[e]=f)}else b[d]=f}function P(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&w(a);c.queue||(k=ra._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,ra.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===ra.css(a,"display")&&"none"===ra.css(a,"float")&&(ra.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ra.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(e in b)if(g=b[e],_b.exec(g)){if(delete b[e],i=i||"toggle"===g,g===(q?"hide":"show"))continue;p.push(e)}if(f=p.length)for((h=ra._data(a,"fxshow")||ra._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?ra(a).show():m.done(function(){ra(a).hide()}),m.done(function(){var b;ra._removeData(a,"fxshow");for(b in o)ra.style(a,b,o[b])}),e=0);f>e;e++)d=p[e],j=m.createTween(d,q?h[d]:0),o[d]=h[d]||ra.style(a,d),d in h||(h[d]=j.start,q&&(j.end=j.start,j.start="width"===d||"height"===d?1:0))}function Q(a,b,c,d,e){return new Q.prototype.init(a,b,c,d,e)}function R(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Db[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function S(a){return ra.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var T,U,V,W,X,Y,Z,$,_,aa,ba,ca=typeof b,da=a.document,ea=a.location,fa=a.VEjQuery,ga=a.$,ha={},ia=[],ja="1.9.1",ka=ia.concat,la=ia.push,ma=ia.slice,na=ia.indexOf,oa=ha.toString,pa=ha.hasOwnProperty,qa=ja.trim,ra=function(a,b){return new ra.fn.init(a,b,U)},sa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ta=/\S+/g,ua=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,va=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,wa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,xa=/^[\],:{}\s]*$/,ya=/(?:^|:|,)(?:\s*\[)+/g,za=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Aa=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,Ba=/^-ms-/,Ca=/-([\da-z])/gi,Da=function(a,b){return b.toUpperCase()},Ea=function(a){(da.addEventListener||"load"===a.type||"complete"===da.readyState)&&(Fa(),ra.ready())},Fa=function(){da.addEventListener?(da.removeEventListener("DOMContentLoaded",Ea,!1),a.removeEventListener("load",Ea,!1)):(da.detachEvent("onreadystatechange",Ea),a.detachEvent("onload",Ea))};ra.fn=ra.prototype={VEjQuery:ja,constructor:ra,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:va.exec(a),!e||!e[1]&&c)return!c||c.VEjQuery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ra?c[0]:c,ra.merge(this,ra.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:da,!0)),wa.test(e[1])&&ra.isPlainObject(c))for(e in c)ra.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=da.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=da,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ra.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ra.makeArray(a,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ma.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ra.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ra.each(this,a,b)},ready:function(a){return ra.ready.promise().done(a),this},slice:function(){return this.pushStack(ma.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ra.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:la,sort:[].sort,splice:[].splice},ra.fn.init.prototype=ra.fn,ra.extend=ra.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ra.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ra.isPlainObject(d)||(c=ra.isArray(d)))?(c?(c=!1,g=a&&ra.isArray(a)?a:[]):g=a&&ra.isPlainObject(a)?a:{},h[e]=ra.extend(k,g,d)):d!==b&&(h[e]=d));return h},ra.extend({noConflict:function(b){return a.$===ra&&(a.$=ga),b&&a.VEjQuery===ra&&(a.VEjQuery=fa),ra},isReady:!1,readyWait:1,holdReady:function(a){a?ra.readyWait++:ra.ready(!0)},ready:function(a){if(a===!0?!--ra.readyWait:!ra.isReady){if(!da.body)return setTimeout(ra.ready);ra.isReady=!0,a!==!0&&--ra.readyWait>0||(T.resolveWith(da,[ra]),ra.fn.trigger&&ra(da).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ra.type(a)},isArray:Array.isArray||function(a){return"array"===ra.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ha[oa.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==ra.type(a)||a.nodeType||ra.isWindow(a))return!1;try{if(a.constructor&&!pa.call(a,"constructor")&&!pa.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===b||pa.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||da;var d=wa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ra.buildFragment([a],b,e),e&&ra(e).remove(),ra.merge([],d.childNodes))},parseJSON:function(c){return a.JSON&&a.JSON.parse?a.JSON.parse(c):null===c?c:"string"==typeof c&&(c=ra.trim(c),c&&xa.test(c.replace(za,"@").replace(Aa,"]").replace(ya,"")))?Function("return "+c)():(ra.error("Invalid JSON: "+c),b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ra.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ra.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Ba,"ms-").replace(Ca,Da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:qa&&!qa.call("\ufeff ")?function(a){return null==a?"":qa.call(a)}:function(a){return null==a?"":(a+"").replace(ua,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ra.merge(d,"string"==typeof a?[a]:a):la.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(na)return na.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return ka.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ra.isFunction(a)?(d=ma.call(arguments,2),e=function(){return a.apply(c||this,d.concat(ma.call(arguments)))},e.guid=a.guid=a.guid||ra.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ra.type(d)){f=!0;for(i in d)ra.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ra.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ra(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()}}),ra.ready.promise=function(b){if(!T)if(T=ra.Deferred(),"complete"===da.readyState)setTimeout(ra.ready);else if(da.addEventListener)da.addEventListener("DOMContentLoaded",Ea,!1),a.addEventListener("load",Ea,!1);else{da.attachEvent("onreadystatechange",Ea),a.attachEvent("onload",Ea);var c=!1;try{c=null==a.frameElement&&da.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!ra.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}Fa(),ra.ready()}}()}return T.promise(b)},ra.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){ha["[object "+b+"]"]=b.toLowerCase()}),U=ra(da),V={},ra.Callbacks=function(a){a="string"==typeof a?V[a]||d(a):ra.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ra.each(b,function(b,c){var e=ra.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ra.each(arguments,function(a,b){for(var d;(d=ra.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ra.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ra.extend({Deferred:function(a){var b=[["resolve","done",ra.Callbacks("once memory"),"resolved"],["reject","fail",ra.Callbacks("once memory"),"rejected"],["notify","progress",ra.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ra.Deferred(function(c){ra.each(b,function(b,f){var g=f[0],h=ra.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ra.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ra.extend(a,d):d}},e={};return d.pipe=d.then,ra.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),
e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=ma.call(arguments),g=f.length,h=1!==g||a&&ra.isFunction(a.promise)?g:0,i=1===h?a:ra.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?ma.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&ra.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ra.support=function(){var b,c,d,e,f,g,h,i,j,k,l=da.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*"),d=l.getElementsByTagName("a")[0],!c||!d||!c.length)return{};f=da.createElement("select"),h=f.appendChild(da.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={getSetAttribute:"t"!==l.className,leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:!!e.value,optSelected:h.selected,enctype:!!da.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==da.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===da.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=da.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=da.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;return l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip,ra(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=da.getElementsByTagName("body")[0];g&&(c=da.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===l.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(da.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==ca&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}(),W=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,X=/([A-Z])/g,ra.extend({cache:{},expando:"VEjQuery"+(ja+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?ra.cache[a[ra.expando]]:a[ra.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ra.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ra.fn.extend({data:function(a,c){var d,e,f=this[0],h=0,i=null;if(a===b){if(this.length&&(i=ra.data(f),1===f.nodeType&&!ra._data(f,"parsedAttrs"))){for(d=f.attributes;d.length>h;h++)e=d[h].name,e.indexOf("data-")||(e=ra.camelCase(e.slice(5)),g(f,e,i[e]));ra._data(f,"parsedAttrs",!0)}return i}return"object"==typeof a?this.each(function(){ra.data(this,a)}):ra.access(this,function(c){return c===b?f?g(f,a,ra.data(f,a)):null:(this.each(function(){ra.data(this,a,c)}),b)},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ra.removeData(this,a)})}}),ra.extend({queue:function(a,c,d){var e;return a?(c=(c||"fx")+"queue",e=ra._data(a,c),d&&(!e||ra.isArray(d)?e=ra._data(a,c,ra.makeArray(d)):e.push(d)),e||[]):b},dequeue:function(a,b){b=b||"fx";var c=ra.queue(a,b),d=c.length,e=c.shift(),f=ra._queueHooks(a,b),g=function(){ra.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ra._data(a,c)||ra._data(a,c,{empty:ra.Callbacks("once memory").add(function(){ra._removeData(a,b+"queue"),ra._removeData(a,c)})})}}),ra.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),d>arguments.length?ra.queue(this[0],a):c===b?this:this.each(function(){var b=ra.queue(this,a,c);ra._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ra.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ra.dequeue(this,a)})},delay:function(a,b){return a=ra.fx?ra.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ra.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ra._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ga,Ha,Ia=/[\t\r\n]/g,Ja=/\r/g,Ka=/^(?:input|select|textarea|button|object)$/i,La=/^(?:a|area)$/i,Ma=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Na=/^(?:checked|selected)$/i,Oa=ra.support.getSetAttribute,Pa=ra.support.input;ra.fn.extend({attr:function(a,b){return ra.access(this,ra.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ra.removeAttr(this,a)})},prop:function(a,b){return ra.access(this,ra.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ra.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ra.isFunction(a))return this.each(function(b){ra(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ta)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ia," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=ra.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ra.isFunction(a))return this.each(function(b){ra(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ta)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ia," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ra.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return ra.isFunction(a)?this.each(function(c){ra(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=ra(this),h=b,i=a.match(ta)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else(c===ca||"boolean"===c)&&(this.className&&ra._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ra._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ia," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];return arguments.length?(e=ra.isFunction(a),this.each(function(c){var f,g=ra(this);1===this.nodeType&&(f=e?a.call(this,c,g.val()):a,null==f?f="":"number"==typeof f?f+="":ra.isArray(f)&&(f=ra.map(f,function(a){return null==a?"":a+""})),d=ra.valHooks[this.type]||ra.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))})):f?(d=ra.valHooks[f.type]||ra.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Ja,""):null==c?"":c)):void 0}}),ra.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ra.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ra.nodeName(c.parentNode,"optgroup"))){if(b=ra(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=ra.makeArray(b);return ra(a).find("option").each(function(){this.selected=ra.inArray(ra(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attr:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?typeof a.getAttribute===ca?ra.prop(a,c,d):(f=1!==h||!ra.isXMLDoc(a),f&&(c=c.toLowerCase(),e=ra.attrHooks[c]||(Ma.test(c)?Ha:Ga)),d===b?e&&f&&"get"in e&&null!==(g=e.get(a,c))?g:(typeof a.getAttribute!==ca&&(g=a.getAttribute(c)),null==g?b:g):null!==d?e&&f&&"set"in e&&(g=e.set(a,d,c))!==b?g:(a.setAttribute(c,d+""),d):(ra.removeAttr(a,c),b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ta);if(f&&1===a.nodeType)for(;c=f[e++];)d=ra.propFix[c]||c,Ma.test(c)?!Oa&&Na.test(c)?a[ra.camelCase("default-"+c)]=a[d]=!1:a[d]=!1:ra.attr(a,c,""),a.removeAttribute(Oa?c:d)},attrHooks:{type:{set:function(a,b){if(!ra.support.radioValue&&"radio"===b&&ra.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;return a&&3!==h&&8!==h&&2!==h?(g=1!==h||!ra.isXMLDoc(a),g&&(c=ra.propFix[c]||c,f=ra.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]):void 0},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Ka.test(a.nodeName)||La.test(a.nodeName)&&a.href?0:b}}}}),Ha={get:function(a,c){var d=ra.prop(a,c),e="boolean"==typeof d&&a.getAttribute(c),f="boolean"==typeof d?Pa&&Oa?null!=e:Na.test(c)?a[ra.camelCase("default-"+c)]:!!e:a.getAttributeNode(c);return f&&f.value!==!1?c.toLowerCase():b},set:function(a,b,c){return b===!1?ra.removeAttr(a,c):Pa&&Oa||!Na.test(c)?a.setAttribute(!Oa&&ra.propFix[c]||c,c):a[ra.camelCase("default-"+c)]=a[c]=!0,c}},Pa&&Oa||(ra.attrHooks.value={get:function(a,c){var d=a.getAttributeNode(c);return ra.nodeName(a,"input")?a.defaultValue:d&&d.specified?d.value:b},set:function(a,c,d){return ra.nodeName(a,"input")?(a.defaultValue=c,b):Ga&&Ga.set(a,c,d)}}),Oa||(Ga=ra.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&("id"===c||"name"===c||"coords"===c?""!==d.value:d.specified)?d.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ra.attrHooks.contenteditable={get:Ga.get,set:function(a,b,c){Ga.set(a,""===b?!1:b,c)}},ra.each(["width","height"],function(a,c){ra.attrHooks[c]=ra.extend(ra.attrHooks[c],{set:function(a,d){return""===d?(a.setAttribute(c,"auto"),d):b}})})),ra.support.hrefNormalized||(ra.each(["href","src","width","height"],function(a,c){ra.attrHooks[c]=ra.extend(ra.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null==d?b:d}})}),ra.each(["href","src"],function(a,b){ra.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})),ra.support.style||(ra.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ra.support.optSelected||(ra.propHooks.selected=ra.extend(ra.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),ra.support.enctype||(ra.propFix.enctype="encoding"),ra.support.checkOn||ra.each(["radio","checkbox"],function(){ra.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),ra.each(["radio","checkbox"],function(){ra.valHooks[this]=ra.extend(ra.valHooks[this],{set:function(a,c){return ra.isArray(c)?a.checked=ra.inArray(ra(a).val(),c)>=0:b}})});var Qa=/^(?:input|select|textarea)$/i,Ra=/^key/,Sa=/^(?:mouse|contextmenu)|click/,Ta=/^(?:focusinfocus|focusoutblur)$/,Ua=/^([^.]*)(?:\.(.+)|)$/;ra.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ra._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ra.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ra===ca||a&&ra.event.triggered===a.type?b:ra.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ta)||[""],i=c.length;i--;)g=Ua.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),k=ra.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ra.event.special[o]||{},m=ra.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ra.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ra.event.global[o]=!0;a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.hasData(a)&&ra._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ta)||[""],j=b.length;j--;)if(h=Ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ra.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ra.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ra.event.remove(a,n+b[j],c,d,!0);ra.isEmptyObject(k)&&(delete q.handle,ra._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||da],o=pa.call(c,"type")?c.type:c,p=pa.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||da,3!==e.nodeType&&8!==e.nodeType&&!Ta.test(o+ra.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=0>o.indexOf(":")&&"on"+o,c=c[ra.expando]?c:new ra.Event(o,"object"==typeof c&&c),c.isTrigger=!0,c.namespace=p.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ra.makeArray(d,[c]),k=ra.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ra.isWindow(e)){for(j=k.delegateType||o,Ta.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||da)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ra._data(i,"events")||{})[c.type]&&ra._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ra.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!(f||c.isDefaultPrevented()||k._default&&k._default.apply(e.ownerDocument,d)!==!1||"click"===o&&ra.nodeName(e,"a")||!ra.acceptData(e)||!h||!e[o]||ra.isWindow(e))){l=e[h],l&&(e[h]=null),ra.event.triggered=o;try{e[o]()}catch(q){}ra.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ra.event.fix(a);var c,d,e,f,g,h=[],i=ma.call(arguments),j=(ra._data(this,"events")||{})[a.type]||[],k=ra.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ra.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ra.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ra(d,this).index(j)>=0:ra.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return c.length>i&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ra.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Sa.test(e)?this.mouseHooks:Ra.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ra.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||da),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||da,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},click:{trigger:function(){return ra.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):b}},focus:{trigger:function(){if(this!==da.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===da.activeElement&&this.blur?(this.blur(),!1):b},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ra.extend(new ra.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ra.event.trigger(e,null,b):ra.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ra.removeEvent=da.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===ca&&(a[d]=null),a.detachEvent(d,c))},ra.Event=function(a,c){return this instanceof ra.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,c&&ra.extend(this,c),this.timeStamp=a&&a.timeStamp||ra.now(),this[ra.expando]=!0,b):new ra.Event(a,c)},ra.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ra.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ra.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ra.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ra.support.submitBubbles||(ra.event.special.submit={setup:function(){return ra.nodeName(this,"form")?!1:(ra.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ra.nodeName(c,"input")||ra.nodeName(c,"button")?c.form:b;d&&!ra._data(d,"submitBubbles")&&(ra.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ra._data(d,"submitBubbles",!0))}),b)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ra.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ra.nodeName(this,"form")?!1:(ra.event.remove(this,"._submit"),b)}}),ra.support.changeBubbles||(ra.event.special.change={setup:function(){return Qa.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ra.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ra.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ra.event.simulate("change",this,a,!0)})),!1):(ra.event.add(this,"beforeactivate._change",function(a){var b=a.target;Qa.test(b.nodeName)&&!ra._data(b,"changeBubbles")&&(ra.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ra.event.simulate("change",this.parentNode,a,!0)}),ra._data(b,"changeBubbles",!0))}),b)},handle:function(a){var c=a.target;return this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type?a.handleObj.handler.apply(this,arguments):b},teardown:function(){return ra.event.remove(this,"._change"),!Qa.test(this.nodeName)}}),ra.support.focusinBubbles||ra.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ra.event.simulate(b,a.target,ra.event.fix(a),!0)};ra.event.special[b]={setup:function(){0==c++&&da.addEventListener(a,d,!0)},teardown:function(){0==--c&&da.removeEventListener(a,d,!0)}}}),ra.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ra().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ra.guid++)),this.each(function(){ra.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ra(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ra.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){ra.event.trigger(a,b,this)})},triggerHandler:function(a,c){var d=this[0];return d?ra.event.trigger(a,c,d,!0):b}}),function(a,b){function c(a){return ma.test(a+"")}function d(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>y.cacheLength&&delete a[b.shift()],a[c]=d}}function e(a){return a[N]=!0,a}function f(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,n,o,p;if((b?b.ownerDocument||b:O)!==F&&E(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(!H&&!d){if(e=na.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&L(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Z.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((g=e[3])&&P.getByClassName&&b.getElementsByClassName)return Z.apply(c,$.call(b.getElementsByClassName(g),0)),c}if(P.qsa&&!I.test(a)){if(k=!0,n=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=l(a),(k=b.getAttribute("id"))?n=k.replace(qa,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=la.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return Z.apply(c,$.call(o.querySelectorAll(p),0)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return u(a.replace(fa,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a,b){var c,d,e,f,h,i,j,k=T[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!c||(d=ga.exec(h)))&&(d&&(h=h.slice(d[0].length)||h),i.push(e=[])),c=!1,(d=ha.exec(h))&&(c=d.shift(),e.push({value:c,type:d[0].replace(fa," ")}),h=h.slice(c.length));for(f in y.filter)(d=ka[f].exec(h))&&(!j[f]||(d=j[f](d)))&&(c=d.shift(),e.push({value:c,type:f,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?g.error(a):T(a,i).slice(0)}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=R++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=Q+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===x)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||x,i[1]===!0)return!0}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function q(a,b,c,d,f,g){return d&&!d[N]&&(d=q(d)),f&&!f[N]&&(f=q(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,q=e||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?q:p(q,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=p(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?_.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=p(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):Z.apply(g,s)})}function r(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return _.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[n(o(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return q(h>1&&o(k),h>1&&m(a.slice(0,h-1)).replace(fa,"$1"),c,d>h&&r(a.slice(h,d)),e>d&&r(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function s(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],q=0,r="0",s=e&&[],t=null!=k,u=D,v=e||f&&y.find.TAG("*",k&&h.parentNode||h),w=Q+=null==u?1:Math.random()||.1;for(t&&(D=h!==F&&h,x=c);null!=(l=v[r]);r++){if(f&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(Q=w,x=++c)}d&&((l=!n&&l)&&q--,e&&s.push(l))}if(q+=r,d&&r!==q){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(q>0)for(;r--;)s[r]||o[r]||(o[r]=Y.call(j));o=p(o)}Z.apply(j,o),t&&!e&&o.length>0&&q+b.length>1&&g.uniqueSort(j)}return t&&(Q=w,D=u),s};return d?e(h):h}function t(a,b,c){for(var d=0,e=b.length;e>d;d++)g(a,b[d],c);return c}function u(a,b,c,d){var e,f,g,h,i,j=l(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&!H&&y.relative[f[1].type]){if(b=y.find.ID(g.matches[0].replace(ta,ua),b)[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ka.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ta,ua),la.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return Z.apply(c,$.call(d,0)),c;break}}return B(a,j)(d,b,H,c,la.test(a)),c}function v(){}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P={},Q=0,R=0,S=d(),T=d(),U=d(),V=typeof b,W=-2147483648,X=[],Y=X.pop,Z=X.push,$=X.slice,_=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},aa="[\\x20\\t\\r\\n\\f]",ba="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ca=ba.replace("w","w#"),da="\\["+aa+"*("+ba+")"+aa+"*(?:([*^$|!~]?=)"+aa+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ca+")|)|)"+aa+"*\\]",ea=":("+ba+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+da.replace(3,8)+")*)|.*)\\)|)",fa=RegExp("^"+aa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+aa+"+$","g"),ga=RegExp("^"+aa+"*,"+aa+"*"),ha=RegExp("^"+aa+"*([\\x20\\t\\r\\n\\f>+~])"+aa+"*"),ia=RegExp(ea),ja=RegExp("^"+ca+"$"),ka={ID:RegExp("^#("+ba+")"),CLASS:RegExp("^\\.("+ba+")"),NAME:RegExp("^\\[name=['\"]?("+ba+")['\"]?\\]"),TAG:RegExp("^("+ba.replace("w","w*")+")"),ATTR:RegExp("^"+da),PSEUDO:RegExp("^"+ea),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+aa+"*(even|odd|(([+-]|)(\\d*)n|)"+aa+"*(?:([+-]|)"+aa+"*(\\d+)|))"+aa+"*\\)|)","i"),needsContext:RegExp("^"+aa+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+aa+"*((?:-\\d)?\\d*)"+aa+"*\\)|)(?=[^-]|$)","i")},la=/[\x20\t\r\n\f]*[+~]/,ma=/^[^{]+\{\s*\[native code/,na=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/'|\\/g,sa=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ta=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ua=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(55296|c>>10,56320|1023&c)};try{$.call(O.documentElement.childNodes,0)[0].nodeType}catch(va){$=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}A=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},E=g.setDocument=function(a){var d=a?a.ownerDocument||a:O;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=d.documentElement,H=A(d),P.tagNameNoComments=f(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),P.attributes=f(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");
return"boolean"!==b&&"string"!==b}),P.getByClassName=f(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),P.getByName=f(function(a){a.id=N+0,a.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",G.insertBefore(a,G.firstChild);var b=d.getElementsByName&&d.getElementsByName(N).length===2+d.getElementsByName(N+0).length;return P.getIdNotName=!d.getElementById(N),G.removeChild(a),b}),y.attrHandle=f(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},P.getIdNotName?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&!H){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}}):(y.find.ID=function(a,c){if(typeof c.getElementById!==V&&!H){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==V&&d.getAttributeNode("id").value===a?[d]:b:[]}},y.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=P.tagNameNoComments?function(a,c){return typeof c.getElementsByTagName!==V?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.NAME=P.getByName&&function(a,c){return typeof c.getElementsByName!==V?c.getElementsByName(name):b},y.find.CLASS=P.getByClassName&&function(a,c){return typeof c.getElementsByClassName===V||H?b:c.getElementsByClassName(a)},J=[],I=[":focus"],(P.qsa=c(d.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+aa+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||I.push(":checked")}),f(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&I.push("[*^$]="+aa+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(P.matchesSelector=c(K=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&f(function(a){P.disconnectedMatch=K.call(a,"div"),K.call(a,"[s!='']:x"),J.push("!=",ea)}),I=RegExp(I.join("|")),J=RegExp(J.join("|")),L=c(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},M=G.compareDocumentPosition?function(a,b){var c;return a===b?(C=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&c||a.parentNode&&11===a.parentNode.nodeType?a===d||L(O,a)?-1:b===d||L(O,b)?1:0:4&c?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return C=!0,0;if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:0;if(f===g)return h(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},C=!1,[0,0].sort(M),P.detectDuplicates=C,F):F},g.matches=function(a,b){return g(a,null,null,b)},g.matchesSelector=function(a,b){if((a.ownerDocument||a)!==F&&E(a),b=b.replace(sa,"='$1']"),!(!P.matchesSelector||H||J&&J.test(b)||I.test(b)))try{var c=K.call(a,b);if(c||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return g(b,F,null,[a]).length>0},g.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},g.attr=function(a,b){var c;return(a.ownerDocument||a)!==F&&E(a),H||(b=b.toLowerCase()),(c=y.attrHandle[b])?c(a):H||P.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},g.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},g.uniqueSort=function(a){var b,c=[],d=1,e=0;if(C=!P.detectDuplicates,a.sort(M),C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},z=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c},y=g.selectors={cacheLength:50,createPseudo:e,match:ka,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return ka.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&ia.test(c)&&(b=l(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ta,ua).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=S[a+" "];return b||(b=RegExp("(^|"+aa+")"+a+"("+aa+"|$)"))&&S(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===Q&&j[1],m=j[0]===Q&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Q,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===Q)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[Q,m]),l!==b)););return m-=e,m===d||0==m%d&&m/d>=0}}},PSEUDO:function(a,b){var c,d=y.pseudos[a]||y.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[N]?d(b):d.length>1?(c=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=_.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=[],c=[],d=B(a.replace(fa,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return ja.test(a||"")||g.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=H?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;b>++d;)a.push(d);return a})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);B=g.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=l(a)),c=b.length;c--;)f=r(b[c]),f[N]?d.push(f):e.push(f);f=U(a,s(e,d))}return f},y.pseudos.nth=y.pseudos.eq,y.filters=v.prototype=y.pseudos,y.setFilters=new v,E(),g.attr=ra.attr,ra.find=g,ra.expr=g.selectors,ra.expr[":"]=ra.expr.pseudos,ra.unique=g.uniqueSort,ra.text=g.getText,ra.isXMLDoc=g.isXML,ra.contains=g.contains}(a);var Va=/Until$/,Wa=/^(?:parents|prev(?:Until|All))/,Xa=/^.[^:#\[\.,]*$/,Ya=ra.expr.match.needsContext,Za={children:!0,contents:!0,next:!0,prev:!0};ra.fn.extend({find:function(a){var b,c,d,e=this.length;if("string"!=typeof a)return d=this,this.pushStack(ra(a).filter(function(){for(b=0;e>b;b++)if(ra.contains(d[b],this))return!0}));for(c=[],b=0;e>b;b++)ra.find(a,this[b],c);return c=this.pushStack(e>1?ra.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b,c=ra(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ra.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1))},filter:function(a){return this.pushStack(l(this,a,!0))},is:function(a){return!!a&&("string"==typeof a?Ya.test(a)?ra(a,this.context).index(this[0])>=0:ra.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Ya.test(a)||"string"!=typeof a?ra(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:ra.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return this.pushStack(f.length>1?ra.unique(f):f)},index:function(a){return a?"string"==typeof a?ra.inArray(this[0],ra(a)):ra.inArray(a.VEjQuery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ra(a,b):ra.makeArray(a&&a.nodeType?[a]:a),d=ra.merge(this.get(),c);return this.pushStack(ra.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ra.fn.andSelf=ra.fn.addBack,ra.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ra.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ra.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return ra.dir(a,"nextSibling")},prevAll:function(a){return ra.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ra.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ra.dir(a,"previousSibling",c)},siblings:function(a){return ra.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ra.sibling(a.firstChild)},contents:function(a){return ra.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ra.merge([],a.childNodes)}},function(a,b){ra.fn[a]=function(c,d){var e=ra.map(this,b,c);return Va.test(a)||(d=c),d&&"string"==typeof d&&(e=ra.filter(d,e)),e=this.length>1&&!Za[a]?ra.unique(e):e,this.length>1&&Wa.test(a)&&(e=e.reverse()),this.pushStack(e)}}),ra.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?ra.find.matchesSelector(b[0],a)?[b[0]]:[]:ra.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ra(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var $a="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",_a=/ VEjQuery\d+="(?:null|\d+)"/g,ab=RegExp("<(?:"+$a+")[\\s/>]","i"),bb=/^\s+/,cb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,db=/<([\w:]+)/,eb=/<tbody/i,fb=/<|&#?\w+;/,gb=/<(?:script|style|link)/i,hb=/^(?:checkbox|radio)$/i,ib=/checked\s*(?:[^=]|=\s*.checked.)/i,jb=/^$|\/(?:java|ecma)script/i,kb=/^true\/(.*)/,lb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,mb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ra.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},nb=m(da),ob=nb.appendChild(da.createElement("div"));mb.optgroup=mb.option,mb.tbody=mb.tfoot=mb.colgroup=mb.caption=mb.thead,mb.th=mb.td,ra.fn.extend({text:function(a){return ra.access(this,function(a){return a===b?ra.text(this):this.empty().append((this[0]&&this[0].ownerDocument||da).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(ra.isFunction(a))return this.each(function(b){ra(this).wrapAll(a.call(this,b))});if(this[0]){var b=ra(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ra.isFunction(a)?this.each(function(b){ra(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ra(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ra.isFunction(a);return this.each(function(c){ra(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ra.nodeName(this,"body")||ra(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||ra.filter(a,[c]).length>0)&&(b||1!==c.nodeType||ra.cleanData(t(c)),c.parentNode&&(b&&ra.contains(c.ownerDocument,c)&&q(t(c,"script")),c.parentNode.removeChild(c)));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ra.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ra.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ra.clone(this,a,b)})},html:function(a){return ra.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(_a,""):b;if(!("string"!=typeof a||gb.test(a)||!ra.support.htmlSerialize&&ab.test(a)||!ra.support.leadingWhitespace&&bb.test(a)||mb[(db.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(cb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ra.cleanData(t(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){var b=ra.isFunction(a);return b||"string"==typeof a||(a=ra(a).not(this).detach()),this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(ra(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=ka.apply([],a);var e,f,g,h,i,j,k=0,l=this.length,m=this,q=l-1,r=a[0],s=ra.isFunction(r);if(s||!(1>=l||"string"!=typeof r||ra.support.checkClone)&&ib.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,c?f.html():b)),f.domManip(a,c,d)});if(l&&(j=ra.buildFragment(a,this[0].ownerDocument,!1,this),e=j.firstChild,1===j.childNodes.length&&(j=e),e)){for(c=c&&ra.nodeName(e,"tr"),h=ra.map(t(j,"script"),o),g=h.length;l>k;k++)f=j,k!==q&&(f=ra.clone(f,!0,!0),g&&ra.merge(h,t(f,"script"))),d.call(c&&ra.nodeName(this[k],"table")?n(this[k],"tbody"):this[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,ra.map(h,p),k=0;g>k;k++)f=h[k],jb.test(f.type||"")&&!ra._data(f,"globalEval")&&ra.contains(i,f)&&(f.src?ra.ajax({url:f.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ra.globalEval((f.text||f.textContent||f.innerHTML||"").replace(lb,"")));j=e=null}return this}}),ra.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ra.fn[a]=function(a){for(var c,d=0,e=[],f=ra(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ra(f[d])[b](c),la.apply(e,c.get());return this.pushStack(e)}}),ra.extend({clone:function(a,b,c){var d,e,f,g,h,i=ra.contains(a.ownerDocument,a);if(ra.support.html5Clone||ra.isXMLDoc(a)||!ab.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ob.innerHTML=a.outerHTML,ob.removeChild(f=ob.firstChild)),!(ra.support.noCloneEvent&&ra.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ra.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)d[g]&&s(e,d[g]);if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)r(e,d[g]);else r(a,f);return d=t(f,"script"),d.length>0&&q(d,!i&&t(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,n=m(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ra.type(f))ra.merge(o,f.nodeType?[f]:f);else if(fb.test(f)){for(h=h||n.appendChild(b.createElement("div")),i=(db.exec(f)||["",""])[1].toLowerCase(),k=mb[i]||mb._default,h.innerHTML=k[1]+f.replace(cb,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ra.support.leadingWhitespace&&bb.test(f)&&o.push(b.createTextNode(bb.exec(f)[0])),!ra.support.tbody)for(f="table"!==i||eb.test(f)?"<table>"!==k[1]||eb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ra.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ra.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else o.push(b.createTextNode(f));for(h&&n.removeChild(h),ra.support.appendChecked||ra.grep(t(o,"input"),u),p=0;f=o[p++];)if((!d||-1===ra.inArray(f,d))&&(g=ra.contains(f.ownerDocument,f),h=t(n.appendChild(f),"script"),g&&q(h),c))for(e=0;f=h[e++];)jb.test(f.type||"")&&c.push(f);return h=null,n},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ra.expando,i=ra.cache,j=ra.support.deleteExpando,k=ra.event.special;null!=(c=a[g]);g++)if((b||ra.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ra.event.remove(c,d):ra.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==ca?c.removeAttribute(h):c[h]=null,ia.push(e))}}});var pb,qb,rb,sb=/alpha\([^)]*\)/i,tb=/opacity\s*=\s*([^)]*)/,ub=/^(top|right|bottom|left)$/,vb=/^(none|table(?!-c[ea]).+)/,wb=/^margin/,xb=RegExp("^("+sa+")(.*)$","i"),yb=RegExp("^("+sa+")(?!px)[a-z%]+$","i"),zb=RegExp("^([+-])=("+sa+")","i"),Ab={BODY:"block"},Bb={position:"absolute",visibility:"hidden",display:"block"},Cb={letterSpacing:0,fontWeight:400},Db=["Top","Right","Bottom","Left"],Eb=["Webkit","O","Moz","ms"];ra.fn.extend({css:function(a,c){return ra.access(this,function(a,c,d){var e,f,g={},h=0;if(ra.isArray(c)){for(f=qb(a),e=c.length;e>h;h++)g[c[h]]=ra.css(a,c[h],!1,f);return g}return d!==b?ra.style(a,c,d):ra.css(a,c)},a,c,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:w(this))?ra(this).show():ra(this).hide()})}}),ra.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=rb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ra.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ra.camelCase(c),j=a.style;if(c=ra.cssProps[i]||(ra.cssProps[i]=v(j,i)),h=ra.cssHooks[c]||ra.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=zb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ra.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ra.cssNumber[i]||(d+="px"),ra.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ra.camelCase(c);return c=ra.cssProps[i]||(ra.cssProps[i]=v(a.style,i)),h=ra.cssHooks[c]||ra.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=rb(a,c,e)),"normal"===g&&c in Cb&&(g=Cb[c]),""===d||d?(f=parseFloat(g),d===!0||ra.isNumeric(f)?f||0:g):g},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),a.getComputedStyle?(qb=function(b){return a.getComputedStyle(b,null)},rb=function(a,c,d){var e,f,g,h=d||qb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ra.contains(a.ownerDocument,a)||(i=ra.style(a,c)),yb.test(i)&&wb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):da.documentElement.currentStyle&&(qb=function(a){return a.currentStyle},rb=function(a,c,d){var e,f,g,h=d||qb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),yb.test(i)&&!ub.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ra.each(["height","width"],function(a,c){ra.cssHooks[c]={get:function(a,d,e){return d?0===a.offsetWidth&&vb.test(ra.css(a,"display"))?ra.swap(a,Bb,function(){return A(a,c,e)}):A(a,c,e):b},set:function(a,b,d){var e=d&&qb(a);return y(a,b,d?z(a,c,d,ra.support.boxSizing&&"border-box"===ra.css(a,"boxSizing",!1,e),e):0)}}}),ra.support.opacity||(ra.cssHooks.opacity={get:function(a,b){return tb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ra.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ra.trim(f.replace(sb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=sb.test(f)?f.replace(sb,e):f+" "+e)}}),ra(function(){ra.support.reliableMarginRight||(ra.cssHooks.marginRight={get:function(a,c){return c?ra.swap(a,{display:"inline-block"},rb,[a,"marginRight"]):b}}),!ra.support.pixelPosition&&ra.fn.position&&ra.each(["top","left"],function(a,c){ra.cssHooks[c]={get:function(a,d){return d?(d=rb(a,c),yb.test(d)?ra(a).position()[c]+"px":d):b}}})}),ra.expr&&ra.expr.filters&&(ra.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!ra.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ra.css(a,"display"))},ra.expr.filters.visible=function(a){return!ra.expr.filters.hidden(a)}),ra.each({margin:"",padding:"",border:"Width"},function(a,b){ra.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Db[d]+b]=f[d]||f[d-2]||f[0];return e}},wb.test(a)||(ra.cssHooks[a+b].set=y)});var Fb=/%20/g,Gb=/\[\]$/,Hb=/\r?\n/g,Ib=/^(?:submit|button|image|reset|file)$/i,Jb=/^(?:input|select|textarea|keygen)/i;ra.fn.extend({serialize:function(){return ra.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ra.prop(this,"elements");return a?ra.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ra(this).is(":disabled")&&Jb.test(this.nodeName)&&!Ib.test(a)&&(this.checked||!hb.test(a))}).map(function(a,b){var c=ra(this).val();return null==c?null:ra.isArray(c)?ra.map(c,function(a){return{name:b.name,value:a.replace(Hb,"\r\n")}}):{name:b.name,value:c.replace(Hb,"\r\n")}}).get()}}),ra.param=function(a,c){var d,e=[],f=function(a,b){b=ra.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ra.ajaxSettings&&ra.ajaxSettings.traditional),ra.isArray(a)||a.VEjQuery&&!ra.isPlainObject(a))ra.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],c,f);return e.join("&").replace(Fb,"+")},ra.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ra.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ra.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Kb,Lb,Mb=ra.now(),Nb=/\?/,Ob=/#.*$/,Pb=/([?&])_=[^&]*/,Qb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rb=/^(?:GET|HEAD)$/,Sb=/^\/\//,Tb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ub=ra.fn.load,Vb={},Wb={},Xb="*/".concat("*");try{Lb=ea.href}catch(Yb){Lb=da.createElement("a"),Lb.href="",Lb=Lb.href}Kb=Tb.exec(Lb.toLowerCase())||[],ra.fn.load=function(a,c,d){if("string"!=typeof a&&Ub)return Ub.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ra.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ra.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ra("<div>").append(ra.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ra.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ra.fn[b]=function(a){return this.on(b,a)}}),ra.each(["get","post"],function(a,c){ra[c]=function(a,d,e,f){return ra.isFunction(d)&&(f=f||e,e=d,d=b),ra.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ra.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lb,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Kb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":ra.parseJSON,"text xml":ra.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,ra.ajaxSettings),b):G(ra.ajaxSettings,a)},ajaxPrefilter:E(Vb),ajaxTransport:E(Wb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,d&&(t=H(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ra.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ra.etag[g]=v)),204===a?(f=!0,x="nocontent"):304===a?(f=!0,x="notmodified"):(f=I(m,t),x=f.state,l=f.data,s=f.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ra.active||ra.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ra.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.VEjQuery)?ra(n):ra.event,p=ra.Deferred(),q=ra.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Qb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Lb)+"").replace(Ob,"").replace(Sb,Kb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ra.trim(m.dataType||"*").toLowerCase().match(ta)||[""],null==m.crossDomain&&(e=Tb.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Kb[1]&&e[2]===Kb[2]&&(e[3]||("http:"===e[1]?80:443))==(Kb[3]||("http:"===Kb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ra.param(m.data,m.traditional)),F(Vb,m,c,w),2===u)return w;j=m.global,j&&0==ra.active++&&ra.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Rb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Nb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Pb.test(g)?g.replace(Pb,"$1_="+Mb++):g+(Nb.test(g)?"&":"?")+"_="+Mb++)),m.ifModified&&(ra.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ra.lastModified[g]),ra.etag[g]&&w.setRequestHeader("If-None-Match",ra.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Xb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(Wb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getScript:function(a,c){return ra.get(a,b,c,"script")},getJSON:function(a,b,c){return ra.get(a,b,c,"json")}}),ra.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ra.globalEval(a),a}}}),ra.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ra.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=da.head||ra("head")[0]||da.documentElement;return{send:function(b,e){c=da.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}}),Y=[],Z=/(=)\?(?=&|$)|\?\?/,ra.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Y.pop()||ra.expando+"_"+Mb++;return this[a]=!0,a}}),ra.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Z.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Z.test(c.data)&&"data");
return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ra.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Z,"$1"+f):c.jsonp!==!1&&(c.url+=(Nb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ra.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Y.push(f)),h&&ra.isFunction(g)&&g(h[0]),h=g=b}),"script"):b}),aa=0,ba=a.ActiveXObject&&function(){for(var a in $)$[a](b,!0)},ra.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&J()||K()}:J,_=ra.ajaxSettings.xhr(),ra.support.cors=!!_&&"withCredentials"in _,_=ra.support.ajax=!!_,_&&ra.ajaxTransport(function(c){if(!c.crossDomain||ra.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ra.noop,ba&&delete $[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++aa,ba&&($||($={},ra(a).unload(ba)),$[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var Zb,$b,_b=/^(?:toggle|show|hide)$/,ac=RegExp("^(?:([+-])=|)("+sa+")([a-z%]*)$","i"),bc=/queueHooks$/,cc=[P],dc={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=ac.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||(ra.cssNumber[a]?"":"px"),"px"!==d&&h){h=ra.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,ra.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};ra.Animation=ra.extend(N,{tweener:function(a,b){ra.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],dc[c]=dc[c]||[],dc[c].unshift(b)},prefilter:function(a,b){b?cc.unshift(a):cc.push(a)}}),ra.Tween=Q,Q.prototype={constructor:Q,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ra.cssNumber[c]?"":"px")},cur:function(){var a=Q.propHooks[this.prop];return a&&a.get?a.get(this):Q.propHooks._default.get(this)},run:function(a){var b,c=Q.propHooks[this.prop];return this.pos=b=this.options.duration?ra.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ra.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ra.fx.step[a.prop]?ra.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ra.cssProps[a.prop]]||ra.cssHooks[a.prop])?ra.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ra.each(["toggle","show","hide"],function(a,b){var c=ra.fn[b];ra.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(R(b,!0),a,d,e)}}),ra.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ra.isEmptyObject(a),f=ra.speed(b,c,d),g=function(){var b=N(this,ra.extend({},a),f);g.finish=function(){b.stop(!0)},(e||ra._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ra.timers,g=ra._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&bc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ra.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ra._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ra.timers,g=d?d.length:0;for(c.finish=!0,ra.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ra.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ra.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ra.speed=function(a,b,c){var d=a&&"object"==typeof a?ra.extend({},a):{complete:c||!c&&b||ra.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ra.isFunction(b)&&b};return d.duration=ra.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ra.fx.speeds?ra.fx.speeds[d.duration]:ra.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ra.isFunction(d.old)&&d.old.call(this),d.queue&&ra.dequeue(this,d.queue)},d},ra.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ra.timers=[],ra.fx=Q.prototype.init,ra.fx.tick=function(){var a,c=ra.timers,d=0;for(Zb=ra.now();c.length>d;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ra.fx.stop(),Zb=b},ra.fx.timer=function(a){a()&&ra.timers.push(a)&&ra.fx.start()},ra.fx.interval=13,ra.fx.start=function(){$b||($b=setInterval(ra.fx.tick,ra.fx.interval))},ra.fx.stop=function(){clearInterval($b),$b=null},ra.fx.speeds={slow:600,fast:200,_default:400},ra.fx.step={},ra.expr&&ra.expr.filters&&(ra.expr.filters.animated=function(a){return ra.grep(ra.timers,function(b){return a===b.elem}).length}),ra.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ra.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;return g?(c=g.documentElement,ra.contains(c,f)?(typeof f.getBoundingClientRect!==ca&&(e=f.getBoundingClientRect()),d=S(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e):void 0},ra.offset={setOffset:function(a,b,c){var d=ra.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ra(a),h=g.offset(),i=ra.css(a,"top"),j=ra.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ra.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ra.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ra.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ra.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ra.nodeName(a[0],"html")||(c=a.offset()),c.top+=ra.css(a[0],"borderTopWidth",!0),c.left+=ra.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ra.css(d,"marginTop",!0),left:b.left-c.left-ra.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||da.documentElement;a&&!ra.nodeName(a,"html")&&"static"===ra.css(a,"position");)a=a.offsetParent;return a||da.documentElement})}}),ra.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ra.fn[a]=function(e){return ra.access(this,function(a,e,f){var g=S(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:(g?g.scrollTo(d?ra(g).scrollLeft():f,d?f:ra(g).scrollTop()):a[e]=f,b)},a,e,arguments.length,null)}}),ra.each({Height:"height",Width:"width"},function(a,c){ra.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ra.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ra.access(this,function(c,d,e){var f;return ra.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ra.css(c,d,h):ra.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.VEjQuery=ra,"function"==typeof define&&define.amd&&define.amd.VEjQuery&&define("VEjQuery",[],function(){return ra})}(window),VEjQuery.noConflict();var k={};k.ajax=k.ajax||{},k.ajax={JSONP:function(){"use strict";var a={},b=0,c=k.date.now().toString()+Math.floor(1e7*Math.random()).toString();return{request:function(d,e,f){function g(){var g,h=document.getElementsByTagName("head")[0],i=document.createElement("script"),j=[],k=c+"_"+b;f||(f={}),d+=d.indexOf("?")+1?"&":"?",b++,f.jsoncallback="VeAPI.JSONP.callbacks.VEjQuery"+k,a["VEjQuery"+k]=function(b){h.removeChild(i),delete a["VEjQuery"+k],e&&e(b)};for(g in f)j.push(g+"="+encodeURIComponent(f[g]));d+=j.join("&"),i.type="text/javascript",i.src=d,h.appendChild(i)}j.QueueManager?j.QueueManager.getInstance().request(g):g()},callbacks:a}}},function(a){"use strict";function b(a,b,c,d){this.element=a,this.eventType=b,this.handler=c,this.bubbling=d?!0:!1,this.isEventAdded=!1}var c={Timer:function(b){var c,d=null;this.duration=null,this.isEventAdded=!1,this.start=function(e){"number"==typeof e&&e>0&&(this.stop(),this.duration=e,c=a.date.now(),d=setTimeout(b,e),this.isEventAdded=!0)},this.stop=function(){c=0,clearTimeout(d),this.isEventAdded=!1},this.reset=function(a){this.stop(),this.start(a)},this.counter=function(){return 0!==c?((a.date.now()-c)/1e3).toString()+" secs":"stopped"}}};b.prototype.addEvent=function(){this.isEventAdded=a.event.addEvent(this.element,this.eventType,this.handler,this.bubbling)},b.prototype.removeEvent=function(){this.isEventAdded=a.event.removeEvent(this.element,this.eventType,this.handler,this.bubbling)},c.Event=b,a=a||{},a.modules=c}(k),function s(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,s,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function(c,d){"use strict";function e(a){var b=a.data;b.appName===this.name&&(b=b.messageBody,"function"==typeof h[b.status]?h[b.status](this,b):h["default"](this,b))}function f(a){var b=this,c={maxActivationsPerSession:null,activateOnlyOnLastTab:!1,minTimeBetweenActivations:0};a=a||{},a.session&&(c=a.session),b.config=a,b.sessionConfig=c,b.customOptions={},b.agent={},b.currentStatus=b.status.NotStarted,b.browser=a.browser,b.name="",b.container=null,b.isDraggable=!1,b.inactivityTime=0,b.handleDraggable=null,b.appContainer=null,b.options={closeBtn:!0,overlay:!0,windowPosition:4,isDraggable:!1}}var h,i=a("../../Shared/Utils/Shell.js"),j=a("./AppDisplay"),k=a("./AppMarkupBuilder"),l=a("./DragManager"),m="waiting",n="number";h={success:function(a,b){i.info(a.name+". Iframe is initializing"),a.displayController.setAppHeight(b.iframeHeight),d.dom.addClass(a.container,m),a.finishInit(),b.firstMessageId&&(a.agent.firstMessageId=b.firstMessageId)},resize:function(a,b){a.displayController.setAppHeight(b.iframeHeight)},hide:function(a){a.displayController.hide()},close:function(a,b){a.remove(a,b)},getData:function(a){var b="https:"+a.config.veHostDomain,c={messageType:"appData",messageBody:a.getDataForIframe(),id:a.agent.iframeId};d.messageManager.postMessage(a.appContainer.contentWindow,c,b)},"default":function(a,b){i.info(b)}},f.prototype.status={Error:-1,NotStarted:0,Requesting:1,Loading:2,Ready:3},f.prototype.canAgentRun=function(a){var b=a.enabled,c=this.name+". Agent "+a.agentId+": ";return b&&(this.browser.deviceIsOneOf(a.supportedDevices)||(i.info(c+"It does not support this device"),b=!1)),b},f.prototype.getParamAgentRequest=function(){return{}},f.prototype.isAvailableOnEvent=function(a){var b=!1;return("inactivity"!==a||this.agent.inactivityTime>1)&&(b=!0),b},f.prototype.getElementsToClose=function(){var a=this.agent||{},b=this.name,c=["ve-"+b+"-iframe-close"];return a.overlayClickClose&&c.push("ve-"+b+"-iframe-overlay"),c},f.prototype.getElementsToFocusOnApp=function(){var a=this.agent||{},b=this.name,c=[];return a.overlayClickClose||c.push("ve-"+b+"-iframe-overlay"),c},f.prototype.show=function(){i.info(this.name+". Showing"),this.displayController.show(),d.promoCode.storePromoCode(),d.promoCode.checkForAutofill()},f.prototype.remove=function(){var a=this,b=a.name;i.log(b+". Removing from DOM"),a.isAppReady=!1,d.dom.removeElement(a.container),a.container=null},f.prototype.set=function(){},f.prototype.runAgentSettings=function(){},f.prototype.init=function(a){var b,c=this,f=c.name,g=c.config,h={appName:f,overlay:c.options.overlay,closeBtn:c.options.closeBtn,isDraggable:c.options.isDraggable};c.agent=a,c.agentId=a.agentId,c.setStatus(c.status.Loading),c.runAgentSettings(c.agent),i.info(f+". Loading"),c.remove(),c.agent.iframeId=d.date.now(),d.messageManager.subscribeTo(c.agent.iframeId,e,c),d.promoCode.listenForPromoCode(c.agent.iframeId),b=new k(f,c.container),b.init(),b.createCSS(g.veHostDomain,g.version),h.iframeUrl=c.getIframeURL(),b.buildHtml(h),c.handleDraggable=b.getDragArea(),c.container=b.getContainer(),c.appContainer=b.getIframe(),c.isDraggable&&null!==c.handleDraggable&&(c.dragHandler=new l(f,c.handleDraggable,c.appContainer.parentElement,c.appContainer,b.getCloseButton()),c.dragHandler.init()),c.displayController=c.createDisplayController()},f.prototype.finishInit=function(){var a,b=this,c=b.name,e=b.agent;d.dom.addClass(b.container,"ready"),b.inactivityTime=e.inactivityTime||0,b.browser.isMobile()&&(b.inactivityTime=e.mobileInactivityTime||0),b.setStatus(b.status.Ready),b.isAppReady=!0,g.onInitializedApp(c),0===b.inactivityTime?b.removeAppFromEvent("inactivity"):g.setInactivityEvent(c,b.inactivityTime),a=d.tabsManager.getCurrentTabInfo(),a.availableApps=a.availableApps||[],d.array.pushWithoutDuplicate(c,a.availableApps),d.tabsManager.setCurrentTabInfo(a)},f.prototype.canShowNow=function(a,b){var c=this,d=c.sessionConfig,e=c.appActivationsAvailable(a,d),f=c.activateInThisTab(b,d,null===a),g=c.isInAppActivationInterval(a,d);return e&&f&&!g},f.prototype.appActivationsAvailable=function(a,b){var d,e,f=this.name,g=!1;return d=null===a?NaN:a&&a[f]?a[f].appFires||0:0,i.info(f+" has already been shown "+(d||0)+" time(s)"),null===b.maxActivationsPerSession?g=!0:(e=c.parseInt(b.maxActivationsPerSession),e&&e>d&&(g=!0)),g},f.prototype.activateInThisTab=function(a,b,c){var e,f,g,h=!0,j=this.name,k=0;if(b.activateOnlyOnLastTab&&!this.browser.isMobile()){for(e in a)f=a[e]&&a[e].availableApps||[],-1!==d.array.indexOf(j,f)&&k++;(0!==k||c)&&(g=c?"the session has expired":"this app should show in a later tab",i.info("cannot show "+j+" because "+g),h=!1)}return h},f.prototype.isInAppActivationInterval=function(a,b){var c,e,f=d.date.now(),g=this.name,h=1e3,i=!1;return null===a?b.minTimeBetweenActivations>0&&(i=!0):(a=a||{},c=a[g]||{},e=c.lastActivationTime,"number"==typeof e&&(i=(f-e)/h<b.minTimeBetweenActivations)),i},f.prototype.setCustomOptions=function(a){var b;for(b in a)this.customOptions[b]=a[b]},f.prototype.getCustomOptions=function(){return this.customOptions},f.prototype.getStatus=function(){var a=this.currentStatus;return typeof a!==n&&(a=this.status.Error),a},f.prototype.setStatus=function(a){this.currentStatus=a},f.prototype.getIframeURL=function(){var a=this,b=a.config||{},c=b.journeyCode||"",e=a.name,f=a.agent,g={iframeId:f.iframeId},h=["tags",c.replace(/-/g,"/"),e,a.agentId+".html"],i="https:"+b.veHostDomain;return d.domain.createUrl(i,h,g)},f.prototype.getDataForIframe=function(){var a=this,b=a.getSpecificDataForIframe();return b.journeyId=a.config.journeyId,b.sessionId=a.agent.sessionId,b.agentFactoryId=a.agent.id,b.agentId=a.agentId,b},f.prototype.getSpecificDataForIframe=function(){return{}},f.prototype.setAppPriorityOnEvent=function(a){this.appsPriorityOnEvent=a},f.prototype.removeAppFromEvent=function(a){var b=this.appsPriorityOnEvent,c=this.name;b[a]&&(b[a]=d.array.removeElementFromArray(b[a],c),g.setAppsPriorities(b),0===b[a].length&&g.removeEvent(a))},f.prototype.createDisplayController=function(){var a=this,b={appIframe:a.appContainer,appContainer:a.container,windowPosition:a.options.windowPosition,elementsToFocusOnApp:a.getElementsToFocusOnApp(),elementsToClose:a.getElementsToClose()};return new j(b)},b.exports=f}(window,k)},{"../../Shared/Utils/Shell.js":44,"./AppDisplay":2,"./AppMarkupBuilder":4,"./DragManager":13}],2:[function(a,b,c){!function(c,d){"use strict";function e(a){var b=this;a=a||{},b.appIframe=a.appIframe,b.windowPosition=a.windowPosition,b.animationTypeId=a.animationTypeId,b.appContainer=a.appContainer,b.elementsToClose=a.elementsToClose||[],b.elementsToFocusOnApp=a.elementsToFocusOnApp||[]}var f=a("./AppPositioner"),g=a("../../Shared/Utils/Dom/ClassNames"),h=a("../../Shared/Utils/Functions"),i=a("../../Shared/Utils/Event"),j=a("../../Shared/Utils/Shell"),k="visible",l={1:"ve-bounceindown",2:"ve-bounceinleft",3:"ve-bounceinright",4:"ve-bounceinup",5:"ve-fadein",6:"ve-rotatein",7:"ve-slideinup",8:"ve-slideinleft",9:"ve-slideinright",10:"ve-slideindown"};e.prototype.getPositioner=function(){var a=this,b=a.positioner||new f(a.appIframe.parentElement,a.windowPosition);return a.positioner=b,b},e.prototype.show=function(){var a=this;g.addClass(a.appContainer,k),i.addEvent(c,"resize",a),a.setPosition(),a.setFocusOnApp(),a.addEntryAnimation(),a.addCloseListeners(),a.addFocusOnAppListeners()},e.prototype.setFocusOnApp=function(){var a=this.appIframe;c.setTimeout(function(){a.contentWindow?a.contentWindow.focus():a.contentDocument&&a.contentDocument.documentElement&&a.contentDocument.documentElement.focus()},100)},e.prototype.addEntryAnimation=function(){var a=this.appIframe,b=this.animationTypeId;b&&g.addClass(a.parentElement,l[b])},e.prototype.addCloseListeners=function(){var a,b,c,e=this;for(e.boundHide||(e.boundHide=h.bind(e.hide,e)),a=0,b=e.elementsToClose.length;b>a;a++)c=d.getElementById(e.elementsToClose[a]),c&&i.addEvent(c,"click",e.boundHide)},e.prototype.addFocusOnAppListeners=function(){var a,b,c,e=this;for(e.boundFocus||(e.boundFocus=h.bind(e.setFocusOnApp,e)),a=0,b=e.elementsToFocusOnApp.length;b>a;a++)c=d.getElementById(e.elementsToFocusOnApp[a]),c&&i.addEvent(c,"click",e.boundFocus)},e.prototype.hide=function(){var a,b,e,f=this,h=f.elementsToClose,l=f.elementsToFocusOnApp;for(j.info(this.name+". Hiding"),g.removeClass(f.appContainer,k),i.removeEvent(c,"resize",f),a=0,b=h.length;b>a;a++)e=d.getElementById(h[a]),e&&i.removeEvent(e,"click",f.boundHide);for(a=0,b=l.length;b>a;a++)e=d.getElementById(l[a]),e&&i.removeEvent(e,"click",f.boundFocus)},e.prototype.handleEvent=function(){this.setPosition()},e.prototype.setAppHeight=function(a){this.getPositioner().setAppHeight(a)},e.prototype.setPosition=function(){this.getPositioner().setPosition()},b.exports=e}(window,document)},{"../../Shared/Utils/Dom/ClassNames":33,"../../Shared/Utils/Event":38,"../../Shared/Utils/Functions":39,"../../Shared/Utils/Shell":44,"./AppPositioner":5}],3:[function(a,b,c){!function(c){"use strict";function d(a,b){this.config=a||{},this.config.referrer=document.referrer,this.browser=b}var e={chat:a("./Chat"),assist:a("./Assist"),promote:a("./Promote"),panel:a("./Panel")};d.prototype.createApp=function(a,b){var d,f=this.config,g=this.browser,h={journeyCode:f.journeyCode,veHostDomain:f.veHostDomain,promoteLanding:f.promoteLanding,journeyId:f.journeyId,referrer:f.referrer,appsMappings:f.appsMappings,version:f.version,session:{maxActivationsPerSession:null,activateOnlyOnLastTab:!(!b||!b.activateOnlyOnLastTab),minTimeBetweenActivations:c.parseInt(b.minTimeBetweenActivations)>=0?b.minTimeBetweenActivations:0},browser:g};return c.parseInt(b.maxActivationsPerSession)>=0&&(h.session.maxActivationsPerSession=b.maxActivationsPerSession),"IE"===g.browser()&&(h.session={maxActivationsPerSession:null,activateOnlyOnLastTab:!1,minTimeBetweenActivations:0}),d=new e[a](h),d.set(this.config.referrer,i),d},b.exports=d}(window)},{"./Assist":6,"./Chat":12,"./Panel":14,"./Promote":16}],4:[function(a,b,c){!function(){"use strict";function c(a,b){var c=document.createElement(g);return c.id="ve-"+a+"-"+g,c.frameBorder=0,c.src=b,c.tabIndex="-1",c}function d(a,b){this.appName=a,this.container=b||null}var e=a("../../Shared/Utils/Dom/CrudElements"),f="data-ve-app-close",g="iframe";d.prototype.createCSS=function(a,b){var c,d,e,f="ve-apps-style-css",g=b.major+"."+b.minor;document.getElementById(f)||(e=window.location.protocol+a+"/scripts/"+g+"/capture-apps-"+g+"."+b.revision+".css",document.createStyleSheet?document.createStyleSheet(e):(d=document.head||document.getElementsByTagName("head")[0],c=document.createElement("link"),c.id=f,c.type="text/css",c.rel="stylesheet",d.appendChild(c),c.href=e))},d.prototype.getContainer=function(){return this.container},d.prototype.getIframe=function(){return this.iframe||null},d.prototype.getCloseButton=function(){return this.closeButton||null},d.prototype.getDragArea=function(){return this.dragArea||null},d.prototype.buildHtml=function(a){var b,d=this,h=d.appName,i=d.container,j="ve-"+h+"-"+g+"-",k=j+"container",l={};document.getElementById(k)||(l.id=k,b=e.createDiv(l),i.appendChild(b),a.closeBtn&&(l={id:j+"close"},l[f]=h,d.closeButton=e.createDiv(l,"X"),b.appendChild(d.closeButton)),a.overlay&&(l={id:j+"overlay"},l[f]=h,i.appendChild(e.createDiv(l))),a.isDraggable&&(l={id:j+"drag-area"},d.dragArea=e.createDiv(l),b.appendChild(d.dragArea)),a.iframeUrl&&(d.iframe=c(h,a.iframeUrl),b.appendChild(d.iframe)))},d.prototype.init=function(){var a,b=this;null===b.container&&(k.shell.log(b.appName+". Adding to DOM"),a=document.createElement("div"),a.id="ve-"+b.appName+"-container",document.getElementsByTagName("body")[0].appendChild(a),b.container=a)},b.exports=d}()},{"../../Shared/Utils/Dom/CrudElements":34}],5:[function(a,b,c){!function(c){"use strict";function d(a,b){this.appContainer=a,this.windowPosition=b}function e(a){var b,c,d,e=0,f=a.getBoundingClientRect().right,g=a.children.length;for(d=0;g>d;d++)b=a.children[d].getBoundingClientRect().right,c=b-f,c>e&&(e=c);return e}function f(a){var b,c,d,e=0,f=a.getBoundingClientRect().left,g=a.children.length;for(d=0;g>d;d++)b=a.children[d].getBoundingClientRect().left,c=f-b,c>e&&(e=c);return e}var g=25,h=a("../../Shared/Utils/Dom/WindowDimensions");d.POSITIONS={TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,MIDDLE_LEFT:4,MIDDLE_CENTER:5,MIDDLE_RIGHT:6,BOTTOM_LEFT:7,BOTTOM_CENTER:8,BOTTOM_RIGHT:9},d.prototype.placeVertically=function(){var a=this,b=a.windowPosition,c=d.POSITIONS;switch(b){case c.TOP_LEFT:case c.TOP_CENTER:case c.TOP_RIGHT:a.setPositionTop(a.appContainer);break;case c.MIDDLE_LEFT:case c.MIDDLE_CENTER:case c.MIDDLE_RIGHT:a.setPositionMiddle(a.appContainer);break;case c.BOTTOM_LEFT:case c.BOTTOM_CENTER:case c.BOTTOM_RIGHT:a.setPositionBottom(a.appContainer);break;default:a.setPositionTop(a.appContainer)}},d.prototype.placeVerticallyFitting=function(){var a=this,b=a.appHeight<h.getWindowHeight();b?a.placeVertically():a.setPositionTop(a.appContainer)},d.prototype.placeHorizontally=function(){var a=this,b=a.windowPosition,c=d.POSITIONS;switch(b){case c.TOP_LEFT:case c.MIDDLE_LEFT:case c.BOTTOM_LEFT:a.setPositionLeft(a.appContainer);break;case c.TOP_CENTER:case c.MIDDLE_CENTER:case c.BOTTOM_CENTER:a.setPositionCenter(a.appContainer);break;case c.TOP_RIGHT:case c.MIDDLE_RIGHT:case c.BOTTOM_RIGHT:a.setPositionRight(a.appContainer);break;default:a.setPositionCenter(a.appContainer)}},d.prototype.setPosition=function(){this.placeVerticallyFitting(),this.placeHorizontally()},d.prototype.setPositionTop=function(a){var b=h.windowTop()+g;a.style.top=b+"px"},d.prototype.setPositionRight=function(a){var b=e(a)+g;a.style.right=b+"px"},d.prototype.setPositionBottom=function(a){var b=a.getElementsByTagName("iframe")[0],c=h.windowTop(),d=h.getWindowHeight(),e=b.getBoundingClientRect(),f=e.top-a.getBoundingClientRect().top;a.style.top=c+d-(e.height+f)-g+"px"},d.prototype.setPositionLeft=function(a){var b=f(a)+g;a.style.left=b+"px"},d.prototype.setPositionCenter=function(a){var b=c.parseInt(a.style.width)||a.offsetWidth,d=h.getWindowWidth(),e=0,f=d-b;e=f/2,a.style.left=e+"px"},d.prototype.setPositionMiddle=function(a){var b=a.getElementsByTagName("iframe")[0],c=h.windowTop(),d=h.getWindowHeight(),e=0,f=d-b.getBoundingClientRect().height,g=b.getBoundingClientRect().top-a.getBoundingClientRect().top;e=f/2-g+c,a.style.top=e+"px"},d.prototype.setAppHeight=function(a){var b=this;b.appHeight=a,b.appContainer.getElementsByTagName("iframe")[0].style.height=a+"px",b.appContainer.style.height=a+"px",b.placeVerticallyFitting()},b.exports=d}(window)},{"../../Shared/Utils/Dom/WindowDimensions":36}],6:[function(a,b,c){!function(c,d){"use strict";function e(a){var b,c=this;n.apply(c,arguments),b=c.options||{},b.closeBtn=!0,b.isDraggable=!1,c.config=a,c.captureDataInstance=new d.CaptureData,c.name="assist",c.objectAgentRequest=null,c.paramAgentRequest=["searchTerm","searchSource","currency"]}function f(a){var b=a.getItem("assist")||{};k.isInVeSession(c.parseInt(b.time,10))?b.time=j.now():(b.time=0,b.searchTerm=""),a.setItem("assist",b)}var g=a("./Assist/SearchTerms/SearchTerms.js"),i=a("../../Shared/Utils/Domain.js"),j=a("../../Shared/Utils/Date.js"),k=a("../../Shared/Utils/Storage.js"),l=a("../../Shared/Utils/Shell.js"),m=a("../../Shared/Utils/Object.js"),n=a("./App.js"),o="undefined"!=typeof h?h.captureConfig.JourneyId.toString():"0";e.prototype=m.create(n.prototype),e.prototype.getParamFromStorage=function(a){var b=k.getStorage().getItem(a);return b||""},e.prototype.getParamAgentRequest=function(){var a,b=this,c=0,d=b.objectAgentRequest||{};if(!b.objectAgentRequest){for(c=0;c<b.paramAgentRequest.length;c++)a=b.paramAgentRequest[c],"searchTerm"===a?d.searchTerm=b.customOptions.search.searchTerm:"searchSource"===a?d.searchSource=b.customOptions.search.searchTermSource:(d[a]=b.getAppsMappingsValue(a),d[a]||(d[a]=b.getParamFromStorage(a)));b.objectAgentRequest=d}return d},e.prototype.getAppsMappingsValue=function(a){var b,c,d,e,f,g,h;for(b=this.config.appsMappings[a]||[],c=b.length,g=0;c>g&&!f;g++)for(d=this.captureDataInstance.getValue(b[g]["CSS-selector"],b[g]["HTML-attribute"]),e=d.length,h=0;e>h&&!f;h++)f=d[h];return f||""},e.prototype.storage=function(){var a=k.getStorage("assist."+o+".",!0);return f(a),{isInVeSession:function(){var b=a.getItem("assist")||{};return k.isInVeSession(b.time)},store:function(b){var c,d=a.getItem("assist")||{};for(c in b)d[c]=b[c];a.setItem("assist",d)},load:function(b){var c=a.getItem("assist")||{};return c[b]}}},e.prototype.canAgentRun=function(a){var b=this,c=n.prototype.canAgentRun.apply(b,arguments),d=i.getSearchEngine(b.config.referrer),e=a.agentId,f=b.name,g=f+". Agent "+e+": ";return l.info(f+'. Search terms: "'+b.customOptions.search.searchTerm+'"'),c&&(a.showOnlyFromSearchEngine&&!d?(l.info(g+"Referrer is not a search Engine"),c=!1):a.hasProducts||(l.info(g+"No product matched the search terms"),a.showWhenNoProductFound&&a.searchBoxEnabled?l.info(g+"showWhenNoProductFound AND searchBox are enabled"):(l.info(g+"Can not show as showWhenNoProductFound OR searchBox is disabled"),c=!1))),c},e.prototype.processParamAgentRequest=function(a,b,c){var d,e=!!b;return"currency"===c?b?(d=a[c].currencyAbbreviation+" - "+a[c].currencySymbol,this.customOptions.currencyId=a[c].currencyId,k.getStorage().setItem("currency",a[c].currencyAbbreviation)):d="not found":d=b,l.info(c+": "+d),e},e.prototype.canAppRun=function(a){var b,c,d=this,e=0,f=!0;for(e=d.paramAgentRequest.length-1;e>=0&&f;e--)b=d.paramAgentRequest[e],c=a[b],d.config.appsMappings[b]&&d.config.appsMappings[b].length>0&&void 0!==c&&(f=d.processParamAgentRequest(a,c,b));return f},e.prototype.initSearchTerms=function(a,b){var c,d=this;d.searchTerms=new g(a,b,d),d.searchTerms.init(),c=d.searchTerms.get(),d.setCustomOptions(c)},e.prototype.set=function(a,b){n.prototype.set.apply(this,arguments),this.initialiseStorage(),this.initSearchTerms(a,b.keywordsRegExp)},e.prototype.runAgentSettings=function(a){n.prototype.runAgentSettings.apply(this,arguments),a.saveSearchTerms&&this.searchTerms.storeSearchTerms()},e.prototype.init=function(a){var b=this;a=a||{},b.canAppRun(a)?(b.options={closeBtn:!0,overlay:a.overlay,windowPosition:a.windowPosition},n.prototype.init.apply(b,arguments)):(b.setStatus(b.status.Error),l.info("Assist can not run"))},e.prototype.initialiseStorage=function(){"function"==typeof this.storage&&(this.storage=this.storage())},e.prototype.getSpecificDataForIframe=function(){var a=this.getCustomOptions(),b={searchTerm:a.search.searchTerm,currencyId:a.currencyId||null,currentUrl:window.location.href};return b},b.exports=e}(window,j)},{"../../Shared/Utils/Date.js":30,"../../Shared/Utils/Domain.js":37,"../../Shared/Utils/Object.js":41,"../../Shared/Utils/Shell.js":44,"../../Shared/Utils/Storage.js":45,"./App.js":1,"./Assist/SearchTerms/SearchTerms.js":7}],7:[function(a,b,c){!function(c){"use strict";function d(a,b,d){this.referrer=a,this.regExpSettings=b,this.assistInstance=d,this.URL=c.location.href}var e=a("../../../../Shared/Utils/Domain.js"),f=a("./SearchTermsFromReferrer.js"),g=a("./SearchTermsFromPage.js"),h=a("./SearchTermsFromRegExp.js"),i=a("./SearchTermsFromStorage.js");d.prototype.storeSearchTerms=function(){this.searchTerms&&this.searchTermsFromStorage.storeSearchTerms(this.searchTerms)},d.prototype.get=function(){return{search:{searchTerm:this.searchTerms,searchTermSource:this.searchTermsSettings.searchTermSource}}},d.prototype.init=function(){var a,b,c,d,j,k,l;b=e.getSearchEngine(this.referrer),this.searchTermsFromStorage=new i(this.assistInstance),b&&(a=e.getSearchEngineKeywords()[b],j=new f(this.referrer,a),c=j.getSearchTerms(),d=j.getSearchTermsSettings()),c||(k=new g(this.assistInstance),c=k.getSearchTerms(),d=k.getSearchTermsSettings()),c||(l=new h(this.regExpSettings,this.URL),c=l.getSearchTerms(),d=l.getSearchTermsSettings()),c||(c=this.searchTermsFromStorage.getSearchTerms(),d=this.searchTermsFromStorage.getSearchTermsSettings()),this.searchTerms=c,this.searchTermsSettings=d},b.exports=d}(window)},{"../../../../Shared/Utils/Domain.js":37,"./SearchTermsFromPage.js":8,"./SearchTermsFromReferrer.js":9,"./SearchTermsFromRegExp.js":10,"./SearchTermsFromStorage.js":11}],8:[function(a,b,c){!function(){"use strict";function a(a){this.assistInstance=a}a.prototype.getSearchTermsSettings=function(){return{searchTermSource:"SearchTermsFromPage"}},a.prototype.getSearchTerms=function(){var a=this.assistInstance.getAppsMappingsValue("searchTermFromPage");return a},b.exports=a}()},{}],9:[function(a,b,c){!function(c){"use strict";function d(a,b){this.referrer=a,this.key=b}var e=a("../../../../Shared/Utils/Domain.js");d.prototype.getSearchTermsSettings=function(){return{searchTermSource:"SearchTermsFromReferrer"}},d.prototype.getSearchTerms=function(){var a="";return this.key&&(a=e.getQueryParameter(this.key,this.referrer)||"",a=a.replace(/\+/g," "),a=c.decodeURIComponent(a)),a},b.exports=d}(window)},{"../../../../Shared/Utils/Domain.js":37}],10:[function(a,b,c){!function(){"use strict";function c(a,b){this.regExpSettings=a||[],this.URL=b}var d=a("../../../../Shared/Utils/Domain.js"),e=a("../../../../Shared/Utils/Shell.js");c.prototype.getSearchTermsSettings=function(){return{searchTermSource:"SearchTermsFromRegExp"
}},c.prototype.replaceWithSpaces=function(a,b){return b&&("function"==typeof b.test&&(b=b.source),"string"==typeof b&&(a=a.replace(new RegExp(b,"gi")," "))),a},c.prototype.applyCustomFunction=function(a,b){var c;if("function"==typeof b)try{c=b(a),"string"==typeof c?a=c:e.error('The setting "customRegExp" is not providing a valid string.')}catch(d){e.error('The setting "customRegExp" is not a valid function.')}return a},c.prototype.cleanSearchTerms=function(a,b){return b=d.recursiveURIDecode(b),b=this.applyCustomFunction(b,a.customRegExp),b=this.replaceWithSpaces(b,a.replaceCharactersBySpace)},c.prototype.getFromRegExp=function(a,b){var c="",d=a.regexp;return-1!==b.search(d)&&(c=b.match(d)[1]||""),c},c.prototype.getSearchTerms=function(){var a,b,c=this.URL,d="",e=this.regExpSettings.length;for(a=0;e>a;a++)if(b=this.regExpSettings[a],d=this.getFromRegExp(b,c)){d=this.cleanSearchTerms(b,d);break}return d},b.exports=c}()},{"../../../../Shared/Utils/Domain.js":37,"../../../../Shared/Utils/Shell.js":44}],11:[function(a,b,c){!function(){"use strict";function c(a){this.assistInstance=a}var d=a("../../../../Shared/Utils/Date.js");c.prototype.getSearchTermsSettings=function(){return{searchTermSource:"SearchTermsFromStorage"}},c.prototype.storeSearchTerms=function(a){var b=this.assistInstance.storage,c={time:d.now(),searchTerm:a};b.store(c)},c.prototype.getSearchTerms=function(){var a="",b=this.assistInstance.storage;return a=b.load("searchTerm")},b.exports=c}()},{"../../../../Shared/Utils/Date.js":30}],12:[function(a,b,c){!function(){"use strict";function c(){var a,b=this;h.apply(b,arguments),a=b.options||{},a.isDraggable=!0,a.closeBtn=!1,b.name="chat",b.isDraggable=!0,b.handleDraggableId="ve-chat-iframe-drag-area",b.options=a}var d=a("../../Shared/Utils/Object.js"),e=a("../../Shared/Utils/Dom.js"),f=a("../../Shared/Utils/Array.js"),g=a("../../Shared/Utils/Shell.js"),h=a("./App.js");c.prototype=d.create(h.prototype),c.prototype.canAgentRun=function(a){var b=h.prototype.canAgentRun.apply(this,arguments),c=this.name+". Agent "+a.agentId+": ";return b&&a.profanityExceeded&&(g.info(c+"The number of profanity has been exeeded"),b=!1),b},c.prototype.init=function(a){var b=this,c=b.options||{};a=a||{},b.elementsToClose=[],c.overlay=a.overlay,c.windowPosition=a.windowPosition,b.options=c,h.prototype.init.apply(b,arguments),b.needsResponsiveIframe()&&b.makeIframeResponsive()},c.prototype.needsResponsiveIframe=function(){var a=1;return-1!==f.indexOf(a,this.agent.supportedDevices)},c.prototype.makeIframeResponsive=function(){e.addClass(this.container,"ve-responsive")},b.exports=c}()},{"../../Shared/Utils/Array.js":26,"../../Shared/Utils/Dom.js":31,"../../Shared/Utils/Object.js":41,"../../Shared/Utils/Shell.js":44,"./App.js":1}],13:[function(a,b,c){!function(){"use strict";function c(a,b){var c=parseInt(a.style.width)||a.offsetWidth;return b&&b.offsetLeft>0&&(c+=parseInt(b.style.width)||b.offsetWidth),c}function d(a){return a.pageY?a.pageY:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}function e(a){return a.pageX?a.pageX:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft}function f(a,b,c,d){var e,f,g,h;d===j?(h="y",g="top"):d===k&&(h="x",g="left"),e=b.app[h]-(c[h]-b.window[h]),f=e,e<b.windowEdge[d]?f=b.windowEdge[d]:e+b.app[d]>b.window[d]&&(f=b.window[d]-b.app[d]),a.style[g]=f+"px"}function g(a,b,c,d){var e=parseInt(d.style.left)||d.offsetLeft,f=parseInt(d.style.top)||d.offsetTop,g=window.scrollY||window.pageYOffset,h=window.scrollX||window.pageXOffset;return{windowEdge:{width:h,height:g},window:{width:document.documentElement.clientWidth+h,height:document.documentElement.clientHeight+g,y:a-f,x:b-e},app:{width:c,height:parseInt(d.style.height)||d.offsetHeight,x:e,y:f}}}function h(a,b,c,d,e){this.appName=a,this.dragHandle=b,this.container=c,this.closeButton=e,this.appContainer=d}var i=a("../../Shared/Utils/Event"),j="height",k="width",l="mousemove",m="mouseup";h.prototype.onDragEvent=function(a){var b=d(a),h=e(a),i=this.container,l=this.mousePosition,m=g(b,h,c(this.container,this.closeButton),i);f(i,m,l,j),f(i,m,l,k)},h.prototype.handleEvent=function(a){var b=this,c=b.dragHandle,d=b.appContainer;switch(a=a||window.event,a.type){case"mousedown":i.addEvent(window,l,b),i.addEvent(window,m,b),b.saveMousePosition(a),c.style.width=d.offsetWidth+"px",c.style.height=d.offsetHeight+"px";break;case"mouseup":i.removeEvent(window,l,b),i.removeEvent(window,m,b),c.style.width="",c.style.height="";break;case"mousemove":b.onDragEvent(a)}},h.prototype.init=function(){i.addEvent(this.dragHandle,"mousedown",this)},h.prototype.saveMousePosition=function(a){var b=this.container;this.mousePosition={x:e(a)-(parseInt(b.style.left)||b.offsetLeft),y:d(a)-(parseInt(b.style.top)||b.offsetTop)}},b.exports=h}()},{"../../Shared/Utils/Event":38}],14:[function(a,b,c){!function(){"use strict";function c(){f.apply(this,arguments),this.name="panel",this.isDraggable=!1,this.options={isDraggable:!1,closeBtn:!0}}var d=a("../../Shared/Utils/Object"),e=a("../../Shared/Utils/Dom/ClassNames"),f=a("./App"),g=a("./PanelDisplay"),h="visible";c.prototype=d.create(f.prototype),c.prototype.createDisplayController=function(){var a=this,b={appIframe:a.appContainer,appContainer:a.container,pushWebsiteContent:a.agent.pushWebsiteContent,elementsToFocusOnApp:a.getElementsToFocusOnApp(),elementsToClose:a.getElementsToClose()};return new g(b)},c.prototype.remove=function(){var a=this;a.container&&e.hasClass(a.container,h)?a.displayController.hide():f.prototype.remove.call(a)},b.exports=c}()},{"../../Shared/Utils/Dom/ClassNames":33,"../../Shared/Utils/Object":41,"./App":1,"./PanelDisplay":15}],15:[function(a,b,c){!function(c){"use strict";function d(){}function e(a){a=a||{},this.pushWebsiteContent=a.pushWebsiteContent||!1,f.call(this,a)}var f=a("./AppDisplay"),g="ve-body-shift-left",h="ve-animate",i=a("../../Shared/Utils/Dom/ClassNames"),j=a("../../Shared/Utils/Object");e.prototype=j.create(f.prototype),e.prototype.show=function(){f.prototype.show.call(this),this.pushWebsiteContent&&(i.addClass(c.body,h),i.addClass(c.body,g))},e.prototype.hide=function(){f.prototype.hide.apply(this,arguments),i.removeClass(c.body,g)},e.prototype.setAppHeight=d,e.prototype.handleEvent=d,e.prototype.addEntryAnimation=d,e.prototype.setPosition=d,b.exports=e}(document)},{"../../Shared/Utils/Dom/ClassNames":33,"../../Shared/Utils/Object":41,"./AppDisplay":2}],16:[function(a,b,c){!function(c,d){"use strict";function e(){var a=this;g.apply(a,arguments),a.name="promote",a.promoteAgent=null,a.productPage=!1,a.shareCode=j.getQueryParameter("shareCode",d.referrer)}var f=a("../../Shared/Utils/Object.js"),g=a("./App.js"),h=a("./Promote/DataValidator.js"),i=a("../../Shared/Utils/Shell.js"),j=a("../../Shared/Utils/Domain.js"),k=c.capture.mediator,l=c.capture.plugins.productAggregator,m=c.capture.plugins.productLocalStorage;e.prototype=f.create(g.prototype),e.prototype.isDraggable=!0,e.prototype.handleDraggableId="ve-promote-iframe-drag-area",e.prototype.checkRequiredInformation=function(a){var b,c=!1;return a&&(this.isProductPage()?(b=a[a.length-1],c=h.validateProduct(b)):c=h.validateBasket(a)),c},e.prototype.canAgentRun=function(a){var b,c,d=this,e=g.prototype.canAgentRun.apply(d,arguments),f=d.retrieveData(),h=d.name+". Agent "+a.agentId+": ";return e&&(d.shareCode||(b=d.checkRequiredInformation(f),c=d.hasSocialNetworks(a),e=b&&c,b||i.info(h+"There is not enough product data to show Promote"),c||i.info(h+"No Social Networks Added to the agent"))),e},e.prototype.isProductPage=function(){var a=!1;return l.isFromProductPage()&&(a=!0,this.productPage=!0),a},e.prototype.hasSocialNetworks=function(a){var b=!1;return a&&a.socialNetworks&&a.socialNetworks.length>0&&(b=!0),b},e.prototype.startUp=function(a){var b=this;a=a||{},b.promoteAgent=a,b.elementsToClose=[],b.options={closeBtn:!1,overlay:a.overlay,isDraggable:!0,windowPosition:a.windowPosition},g.prototype.init.apply(b,arguments)},e.prototype.init=function(a){var b=this;k.hasOnLoadDataBeenCaptured()?b.startUp(a):k.on("capture_onload-data-captured",function(){b.startUp(a)})},e.prototype.retrieveData=function(){var a;return a=this.isProductPage()?m.getBrowsedProducts():m.getBasket()},e.prototype.getSpecificDataForIframe=function(){var a=this;return{promoteLandingUrl:a.config.promoteLanding,journeyCode:a.config.journeyCode,productPage:a.productPage,shareCode:a.shareCode}},b.exports=e}(k,document)},{"../../Shared/Utils/Domain.js":37,"../../Shared/Utils/Object.js":41,"../../Shared/Utils/Shell.js":44,"./App.js":1,"./Promote/DataValidator.js":17}],17:[function(a,b,c){!function(){"use strict";function a(b,c,d){var e,f,g,h,i=!1,j=!0,k=!0;for(d=!!d,c=c||[],f=c.length,h=0;f>h&&k;h++)g=c[h].constructor===Array,e=g?a(b,c[h],!0):b.hasOwnProperty(c[h]),j=j&&e,i=i||e,k=d&&!i||j&&!d;return d&&i||j}var c;c={validateBasket:function(b){var c,d,e=!0,f=["name","url"];for(d=0;d<b.length&&e;d++)c=b[d],e=a(c,f);return 0===b.length&&(e=!1),e},validateProduct:function(b){var c=!1,d=["name","description","url",["largeImage","smallImage"],["priceAndCurrency","price"]];return c=a(b,d)}},b.exports=c}()},{}],18:[function(a,b,c){!function(a){"use strict";var c,d=1,e=4,f={10:"sku",11:"name",12:"description",13:"smallImage",14:"largeImage",15:"price",16:"priceAndCurrency",29:"url"};c={products:[],basket:[],hasAggregatedDataFromProductPage:!1,init:function(){var b=this,c=a.capture.mediator;c.on("capture_data-processed",function(a,c){b.aggregate(a,c)})},getPropertyNameByFormMappingTypeId:function(a){var b=!1;return a&&f[a]&&(b=f[a]),b},processCapturedData:function(a,b,c){var d,e,f=this[a];if(f)for(d=0;d<c.length;d++)e=this.getPropertyNameByFormMappingTypeId(b),e&&(f[d]||(f[d]={}),f[d][e]=c[d])},aggregate:function(a,b){var c=this,f=a.formMappingTypeId,g=a.formTypeId;b&&b.length>0&&(g===d?c.processCapturedData("basket",f,b):g===e&&(c.hasAggregatedDataFromProductPage=!0,c.processCapturedData("products",f,b)))},isFromProductPage:function(){return this.hasAggregatedDataFromProductPage},getProducts:function(){return this.products},getBasket:function(){return this.basket}},b.exports=c}(k)},{}],19:[function(a,b,c){!function(c){"use strict";var d,e=a("../../../Shared/Utils/Storage.js"),f=a("../../../Shared/Utils/Array.js"),g="historyProducts",h="basketProducts",i="producStorage.",j=10;d={storage:!1,isLoadDataSaved:!1,isStorageReady:!1,queue:[],executeOrQueue:function(a){this.isStorageReady?a():this.queue.push(a)},updateFromProductAggregator:function(){var a=this,b=c.capture.plugins.productAggregator,d=b.getProducts(),e=b.getBasket();a.isLoadDataSaved&&a.executeOrQueue(function(){a.updateLastBrowsedProduct(d[0]),a.setBasket(e)})},subscribeToDataCaptureOnLoad:function(){var a=this,b=c.capture.mediator;b.on("capture_onload-data-captured",function(){var b=c.capture.plugins.productAggregator,d=b.getProducts(),e=b.getBasket();d.length>0&&a.executeOrQueue(function(){a.setNewBrowsedProduct(d[0])}),e.length>0&&a.executeOrQueue(function(){a.setBasket(e)}),a.isLoadDataSaved=!0})},subscribeToDataCaptureOnChange:function(){var a=this,b=c.capture.mediator;b.on("capture_onchange-data-captured",function(){a.updateFromProductAggregator()})},subscribeToDataCaptureOnRerender:function(){var a=this,b=c.capture.mediator;b.on("capture_onrerender-data-captured",function(){a.updateFromProductAggregator()})},subscribeToStorageIsReady:function(a){var b=this;a.once("utils_ready",function(){var a;for(b.isStorageReady=!0,a=0;a<b.queue.length;a++)b.queue[a].call()})},init:function(a){var b=this;b.storage=e.getStorage(i,!1),b.subscribeToDataCaptureOnLoad(),b.subscribeToDataCaptureOnChange(),b.subscribeToDataCaptureOnRerender(),b.subscribeToStorageIsReady(a.utilsController)},setNewBrowsedProduct:function(a){var b=this.getBrowsedProducts()||[];a&&(b.push(a),b.length>j&&b.shift(),this.storage.setItem(g,b))},updateLastBrowsedProduct:function(a){var b=this.getBrowsedProducts()||[];a&&b.length>0&&(b.pop(),b.push(a),this.storage.setItem(g,b))},setBasket:function(a){var b;b=f.removeNullElements(a),this.storage.setItem(h,b)},getBrowsedProducts:function(){return this.storage.getItem(g)},getBasket:function(){return this.storage.getItem(h)}},b.exports=d}(k)},{"../../../Shared/Utils/Array.js":26,"../../../Shared/Utils/Storage.js":45}],20:[function(a,b,c){!function(c){"use strict";function d(a){var b=new a.XMLHttpRequest({mozSystem:!0}),c=!1;return"withCredentials"in b&&(c=!0),c}function e(a){var b=!1;return a.XDomainRequest!==c&&(b=!0),b}function f(a,b){var c;if("function"==typeof b.getBaseUrl)c=b.getBaseUrl();else{if(!a)throw new Error("Unable to get baseUrl");c="//"+a}return c}function g(a){var b,c,g=this;a=a||{},b=a.methodWindow||{},c=a.HelperFunctions||{},g.xhr=b.XMLHttpRequest,g.requestTimeout=3e3,g.baseUrl=f(a.domain,c),g.useXHR=d(b),g.queueManager=a.queueManager,g.useXHR||(g.useXDR=e(b)),g.useXDR&&(g.xdr=b.XDomainRequest)}var h="Could not parse the response",i=3,j=a("../Utils/Json.js"),k=a("../Utils/Shell.js"),l=a("../Utils/Domain.js");g.prototype.request=function(a,b,c,d,e,f,g,h){function j(){g=g||0,g++,i>g?(k.log(g+" retry of the AJAX request for "+e),o.request(a,b,c,d,e,f,g,h)):("function"==typeof d&&d(),k.error("AJAX request for "+e+" not successful"))}var m,n,o=this;if(b=b||{},e=e||"",o.useXHR)m=l.createUrl(o.baseUrl,a,b),n=function(){o.xhrRequest(m,c,j,f)};else{if(!o.useXDR)throw new Error("This browser supports neither xhr nor xdr requests. Cannot call API.");m=l.createUrl(o.baseUrl,a,b,!0),n=function(){o.xdrRequest(m,c,j,f)}}o.queueManager&&!h?o.queueManager.request(n):n()},g.prototype.xdrRequest=function(a,b,c,d){function e(){"function"==typeof b&&(g.responseText?b(j.parseJSON(g.responseText,h)):b())}var f=d?"POST":"GET",g=new this.xdr;g.open(f,a),g.timeout=this.requestTimeout,g.ontimeout=c,g.onerror=c,g.onload=e,d?g.send(j.stringify(d)):g.send()},g.prototype.xhrRequest=function(a,b,c,d){function e(){this.status<400?b&&(this.responseText?b(j.parseJSON(this.responseText,h)):b()):this.status>=400&&c&&c()}var f=d?"POST":"GET",g=new this.xhr;g.open(f,a,!0),g.withCredentials=!0,g.timeout=this.requestTimeout,g.ontimeout=c,g.onerror=c,g.onload=e,"POST"===f?(g.setRequestHeader("content-type","application/json"),g.send(j.stringify(d))):g.send()},b.exports=g}()},{"../Utils/Domain.js":37,"../Utils/Json.js":40,"../Utils/Shell.js":44}],21:[function(a,b,c){!function(){"use strict";function c(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function d(a,b){this.namespace=b||"",this.storageInstance=a}var e=2,f=3,g=a("./MessageManager.js");d.prototype.getItem=function(a){var b=this.storageInstance,c=b.storage,d=null;return null!==c&&(c=c||{},d=c[this.namespace+a]),d},d.prototype.setItem=function(a,b){function c(){g.postMessage(h,{command:e,key:f,value:b},i)}var d=this.storageInstance,f=this.namespace+a,h=d.iframeElement.contentWindow,i=d.iframeDomain;d.storage=d.storage||{},d.storage[f]=b,d.iframeReady?c():d.queuedRequests.push(c)},d.prototype.removeItem=function(a){function b(){g.postMessage(e,{command:f,key:c},h)}var c=this.namespace+a,d=this.storageInstance,e=d.iframeElement.contentWindow,h=d.iframeDomain;null!==d.storage&&(d.storage=d.storage||{},delete d.storage[c],d.iframeReady?b():d.queuedRequests.push(b))},d.prototype.getAllItems=function(){var a,b=this.storageInstance.storage,d={},e=c(this.namespace),f=new RegExp("^"+e);for(a in b)f.test(a)&&(d[a.replace(f,"")]=b[a]);return d},b.exports=d}()},{"./MessageManager.js":23}],22:[function(a,b,c){!function(){"use strict";function c(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function d(a){this.namespace=a||"",this.localStorage=localStorage}var e=a("../Utils/Json.js");d.prototype.getItem=function(a){return e.parseJSON(this.localStorage.getItem(this.namespace+a))},d.prototype.setItem=function(a,b){this.localStorage.setItem(this.namespace+a,e.stringify(b))},d.prototype.removeItem=function(a){this.localStorage.removeItem(this.namespace+a)},d.prototype.getAllItems=function(){var a,b,d=this.localStorage,e=d.length,f={},g=new RegExp("^"+c(this.namespace));for(a=0;e>a;a++)b=d.key(a),g.test(b)&&(f[b.replace(g,"")]=d.getItem(b));return f},b.exports=d}()},{"../Utils/Json.js":40}],23:[function(a,b,c){!function(){"use strict";function c(a,b,c){var d=f.indexOf(b,c)>-1;return!a||d}var d,e=function(){},f=a("../Utils/Array.js"),g=a("../Utils/Event.js"),h=a("../Utils/Json.js");d={subscriptions:{},init:function(a){function b(a){var b,e,g,j=a.origin.replace(/http(s)?/,""),k={};if(g=h.parseJSON(a.data)||{},e=d.subscriptions[g.id]||[],k.data=g,c(i,j,f))for(b=0;b<e.length;b++)"function"==typeof e[b].callback&&e[b].callback.call(e[b].context,k)}var d=this,f=[],i="*"!==a;i&&(a=a.replace(/http(s)?/,""),f.push(a)),d.subscriptions={},g.addEvent(window,"message",b,!1),d.init=e},subscribeTo:function(a,b,c){this.subscriptions[a]=this.subscriptions[a]||[],this.subscriptions[a].push({callback:b,context:c})},postMessage:function(a,b,c){"string"!=typeof b&&(b=h.stringify(b)),a.postMessage(b,c)},unsubscribeFrom:function(a,b){var c,d=this.subscriptions[a]||[];for(c=d.length-1;c>=0;c--)d[c].callback===b&&d.splice(c,1)}},b.exports=d}()},{"../Utils/Array.js":26,"../Utils/Event.js":38,"../Utils/Json.js":40}],24:[function(a,b,c){!function(){"use strict";function c(a,b){this.appsManager=a,this.appsApiInstance=b}var d=a("../Utils/Event.js"),e=a("../Utils/Shell.js"),f=3,g=4,h=5,i=6,j=10;c.prototype.backButtonFired=function(a){this.sendReport(a,f)},c.prototype.exitEventFired=function(a){this.sendReport(a,g)},c.prototype.exitIntentFired=function(a){this.sendReport(a,j)},c.prototype.inactivityFired=function(a){this.sendReport(a,i)},c.prototype.appAccepted=function(a){function b(){clearTimeout(f)}function c(){e.appsManager.hasBeenShown()&&e.sendReport(a,h)}var e=this,f=null;d.addEvent(window,"unload",b),f=setTimeout(c,1e3)},c.prototype.sendReport=function(a,b){function c(){e.info(a+". Report "+b)}var d=this.getReportUrlOptions(a,b);this.appsApiInstance.request(d.path,d.params,c,null,a+". Report "+b)},c.prototype.getReportUrlOptions=function(a,b){var c=this.appsManager.getApp(a),d=c.agent,e={path:["api","log","agent",d.agentId,"agentFactory",d.id,"event",b,"session",d.sessionId],params:null};return d.firstMessageId&&(e.path.push("firstMessage"),e.path.push(d.firstMessageId)),e},b.exports=c}()},{"../Utils/Event.js":38,"../Utils/Shell.js":44}],25:[function(a,b,c){!function(){"use strict";function c(a){var b={};return a&&a.enabled?(b.isCookieEnabled=!0,b.timeToLive=a.timeToLive):(b.isCookieEnabled=!1,b.timeToLive=0),b}function d(a,b){var c="Ve."+a+".";this.appsApiInstance=b,this.storage=e.getStorage(c)}var e=a("../Utils/Storage.js"),f=function(){};d.prototype.init=function(a){var b=a.referrer,d=a.landingPage,e=a.journeyCode,g=a.cookieSettings,h=a.success,i=a.failure,j=0,k=["api","appsmanagerinit"],l=c(g),m=!0;h="function"==typeof h?h:f,i="function"==typeof i?i:f,l.referrerDomain=b,l.landingPage=d,l.journeyCode=e,this.appsApiInstance.request(k,null,h,i,"sessionInit request",l,j,m)},b.exports=d}()},{"../Utils/Storage.js":45}],26:[function(a,b,c){!function(){"use strict";var c,d=a("./Object.js");c={indexOf:function(a,b){if("undefined"==typeof b)throw new TypeError("Argument array should not be undefined or NULL.");return b.indexOf?this.indexOf=function(a,b){return b.indexOf(a)}:this.indexOf=function(a,b){var c,d=Object(b),e=d.length>>>0;if(e>0)for(c=0;e>c;c++)if(c in d&&d[c]===a)return c;return-1},this.indexOf(a,b)},removeElementFromArray:function(a,b){var c;for(c=0;c<a.length;c++)if(a[c]===b||"object"==typeof a[c]&&d.areEqual(a[c],b))return a.splice(c,1),a;return a},removeIndex:function(a,b){a[b]&&a.splice(b,1)},concatWithoutDuplicate:function(a,b){function c(a){var b;for(b=0;b<a.length;b++)-1===d.indexOf(a[b],e)&&e.push(a[b])}var d=this,e=[];return c(a),c(b),e},pushWithoutDuplicate:function(a,b){return-1===this.indexOf(a,b)&&b.push(a),b},removeNullElements:function(a){var b;for(b=0;b<a.length;b++)null===a[b]&&(a.splice(b,1),b--);return a}},b.exports=c}()},{"./Object.js":41}],27:[function(a,b,c){!function(){"use strict";var c=a("./CaptureAppsMediator"),e=a("./String"),f=a("./Array"),g={mediator:c,stringMatch:function(a,b){var c,d="\\.\\\\+\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:\\-";return a=this.toLowerCaseString(a),b=this.toLowerCaseString(b),a=a.replace(new RegExp("(?=["+d+"])","gi"),"\\"),a=a.replace(/\*/gi,".*"),c=new RegExp("^"+a+"$"),c.test(b)},toLowerCaseString:function(a){return a=new String(a).toString(),a=a.toLowerCase()},findFormById:function(a,b){var c;for(c=0;c<b.length;c++)if(b[c].FormId===a)return b[c];return!1},checkForControls:function(a){var b;return b=a instanceof d?a:new d(a),b.getElementsWithSelector()},getInnerText:function(a){function b(a){var b=["script","noscript","style","template"];return a&&1===a.nodeType&&-1===f.indexOf(a.nodeName.toLowerCase(),b)?!0:!1}function c(a){var d,e="",f=a.childNodes;if(b(a))for(d=0;d<f.length;d++)3===f[d].nodeType?e+=f[d].nodeValue+" ":1===f[d].nodeType&&(e+=c(f[d]));return e}var d="";return a&&(d=c(a),d=d.replace(new RegExp(String.fromCharCode(160),"gmi")," "),d=d.replace(/(\r\n|\n|\r)/gm," "),d=d.replace(/[\s]+/gm," "),d=e.trim(d)),d},initialiseFormMappings:function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(new d(a[b]));if(c.length!==a.length)throw new Error("Couldn't initialise all the form mappings");return a=c},getFormTypeIdByFormMappingId:function(a,b){var c,d,e,f=!1;for(b=b||[],c=0;c<b.length&&!f;c++)for(e=b[c].FormFields,d=0;d<e.length&&!f;d++)e[d].FormMappingId===a&&(f=b[c].FormTypeId);return f}};b.exports=g}()},{"./Array":26,"./CaptureAppsMediator":28,"./String":46}],28:[function(a,b,c){!function(){"use strict";var c=a("events").EventEmitter,d=new c;d.onloadDataCaptured=!1,d.hasOnLoadDataBeenCaptured=function(){return this.onloadDataCaptured},d.onLoadDataHasBeenCaptured=function(){this.onloadDataCaptured=!0,this.emit("capture_onload-data-captured")},d.onChangeDataHasBeenCaptured=function(){this.emit("capture_onchange-data-captured")},d.onRerenderDataHasBeenCaptured=function(){this.emit("capture_onrerender-data-captured")},d.dataHasBeenProcessed=function(a,b){this.emit("capture_data-processed",a,b)},b.exports=d}()},{events:51}],29:[function(a,b,c){!function(c,d){"use strict";var e=a("events").EventEmitter,f=new e;f.init=function(a,b){function e(){h.startCompliance(b)}function g(a){h.complianceRequired()&&h.showCompliance()&&h.showEmailAuthForm(a)}var h=new c.VeCompliance(a);d.page.hasBeenLoaded()?e():d.page.on("page_loaded",e),f.on("compliance_needed",g)},b.exports=f}(j,k)},{events:51}],30:[function(a,b,c){!function(){"use strict";var a={now:function(){return Date.now?this.now=function(){return window.Date.now()}:this.now=function(){return(new Date).getTime()},this.now()}};b.exports=a}()},{}],31:[function(a,b,c){!function(){"use strict";var c=a("./Object"),d=a("./Dom/ClassNames"),e=a("./Dom/ElementSelectors"),f=a("./Dom/BodyDimensions"),g=a("./Dom/WindowDimensions"),h=a("./Dom/CrudElements"),i={};i=c.concatenate(i,d),i=c.concatenate(i,e),i=c.concatenate(i,f),i=c.concatenate(i,g),i=c.concatenate(i,h),b.exports=i}()},{"./Dom/BodyDimensions":32,"./Dom/ClassNames":33,"./Dom/CrudElements":34,"./Dom/ElementSelectors":35,"./Dom/WindowDimensions":36,"./Object":41}],32:[function(a,b,c){!function(){"use strict";var a;a={bodyHeight:0,getBodyWidth:function(){return document.body.offsetWidth},getBodyHeight:function(){return document.body.offsetHeight},getLastUpdatedBodyHeight:function(){return this.bodyHeight},updateBodyHeight:function(){this.bodyHeight=this.getBodyHeight()}},b.exports=a}()},{}],33:[function(a,b,c){!function(){"use strict";var a;a={hasClass:function(a,b){return a.classList?this.hasClass=function(a,b){return a.classList.contains(b)}:this.hasClass=function(a,b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)},this.hasClass(a,b)},addClass:function(a,b){a.classList?this.addClass=function(a,b){a.classList.add(b)}:this.addClass=function(a,b){this.hasClass(a,b)||(a.className=a.className?[a.className,b].join(" "):b)},this.addClass(a,b)},removeClass:function(a,b){a.classList?this.removeClass=function(a,b){a.classList.remove(b)}:this.removeClass=function(a,b){var c;this.hasClass(a,b)&&(c=a.className,a.className=c.replace(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," "))},this.removeClass(a,b)},toggleClass:function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)}},b.exports=a}()},{}],34:[function(a,b,c){!function(){"use strict";var a;a={exists:function(a){return null!==a},focus:function(a){a&&window.setTimeout(function(){try{a.focus()}catch(b){}},10)},createDiv:function(a,b){var c,d=document.createElement("div");d.innerHTML=b||"";for(c in a)a.hasOwnProperty(c)&&d.setAttribute(c,a[c]);return d},createAndSubmitForm:function(a,b,c){var d,e,f,g='<input type="hidden" name="{{ name }}" value="{{ value }}">',h="";for(f in b)b.hasOwnProperty(f)&&(e=g.replace("{{ name }}",f).replace("{{ value }}",b[f]),h+=e);d=document.createElement("form"),d.action=a,d.method="post",d.target=c?"_blank":"_parent",d.style.visibility="hidden",d.innerHTML=h,document.body.appendChild(d),d.submit()},removeElement:function(a){a&&a.parentElement.removeChild(a)}},b.exports=a}()},{}],35:[function(a,b,c){!function(){"use strict";var a;a={concatNodeList:function(a,b){if(!("object"==typeof a&&void 0!==a.length||"object"==typeof b&&void 0!==b.length))throw new TypeError("The parametters are supposed to be Arrays or Node List.");return a=Array.prototype.slice.call(a),b=Array.prototype.slice.call(b),a.concat(b)},getTopWindow:function(a){var b;return b=a.parent!==a?this.getTopWindow(a.parent):a},getElementsByClassName:function(a,b,c){return document.getElementsByClassName?this.getElementsByClassName=function(a,b,c){var d=[];return b=b||document,"string"!=typeof a?d:b.getElementsByClassName(a)}:document.querySelectorAll?this.getElementsByClassName=function(a,b,c){var d=[];return"string"!=typeof a?d:this.querySelectorAll("."+a,b)}:this.getElementsByClassName=function(a,b,c){var d,e,f,g,h,i=[];if("string"!=typeof a)return i;for(b=b||document,c=c||"*",d=b.getElementsByTagName(c),e=d.length,f=new RegExp("(^|\\s)"+a+"(\\s|$)"),g=0,h=0;e>g;g++)f.test(d[g].className)&&(i[h]=d[g],h++);return i},this.getElementsByClassName(a,b,c)},getElementsByDataAttribute:function(a,b,c){var d,e=[],f=0;if(null!==a)for(d=a.getElementsByTagName("*"),f=0;f<d.length;f++)!d[f].hasAttribute(b)||void 0!==c&&d[f].getAttribute(b)!==c||e.push(d[f]);return e},querySelectorAll:function(a,b){var c;b=b||document;try{c=b.querySelectorAll(a)}catch(d){c=b===document?VEjQuery(a):VEjQuery(b).find(a)}return c},getElementsByQuerySelectors:function(a){var b=0,c=[];if("object"!=typeof a||void 0===a.length)throw new TypeError("The parametter is supposed to be an Array.");for(b=0;b<a.length;b++)c=this.concatNodeList(c,this.querySelectorAll(a[b]));return c},getParentById:function(a,b){var c=a&&a.parentNode,a=null;return c!==document.body&&(c&&c.getAttribute("id")!==b&&(c=this.getParentById(c,b)),a=c),a},getParentByTagName:function(a,b){var c=a&&a.parentNode,a=null;return c&&c.tagName&&(c.tagName.toLowerCase()!==b.toLowerCase()&&(c=this.getParentByTagName(c,b)),a=c),a},getParentByDataAttribute:function(a,b,c){var d=a&&a.parentNode,a=null;return d&&d.hasAttribute&&((!d.hasAttribute(b)||void 0!==c&&d.getAttribute(b)!==c)&&(d=this.getParentByDataAttribute(d,b,c)),a=d),a}},b.exports=a}()},{}],36:[function(a,b,c){!function(){"use strict";var a;a={windowTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight}},b.exports=a}()},{}],37:[function(a,b,c){!function(){"use strict";function c(a,b){var c,f,g=!0;return a!==b&&(c=e.getQueryStringObject(a),f=e.getQueryStringObject(b),g=d.areEqual(c,f)),g}var d=a("./Object.js"),e={isInIframe:function(){return window.location!==window.parent.location},referrerIsInDomains:function(a,b){function c(a,b){for(;d<b.length;d++)if(b[d]=b[d].replace(/\./g,"\\."),e=new RegExp("(^|\\.)"+b[d]+"$"),e.test(a))return!0;return!1}var d=0,e=null;return""!==a?0===b.length?!1:(a=a.split("/")[2],a=a.replace("www.",""),c(a,b)):!0},getHref:function(){return window.location.href},createUrl:function(a,b,c,d){var e,f,g,h,i;if(b)for(e=0,f=b.length;f>e;e++)d&&(b[e]=encodeURIComponent(b[e])),a=0===e?a+("/"!==a[a.length-1]?"/":"")+b[e]:a+"/"+b[e];e=0;for(g in c)d?(h=encodeURIComponent(g),i=encodeURIComponent(c[g])):(h=g,i=c[g]),a=a+(0===e&&-1===a.indexOf("?")?"?":"&")+h+"="+i,e++;return a},getQueryParameter:function(a,b){var c=b?b:window.location.search,d=c.match(new RegExp("[?&]"+a+"=([^&]*)(&?)","i"));return d?decodeURIComponent(d[1]):d},isURL:function(a){return!0},recursiveURIDecode:function(a){for(var b="";b!==a;){b=a;try{a=decodeURIComponent(b)}catch(c){return a}}return a},getDomainHost:function(a){var b,c=this,d="";return c.isURL(a)&&(b=document.createElement("a"),b.href=a,d=b.hostname),d},getSearchEngineKeywords:function(){return{google:"q",yahoo:"p",aol:"q",ask:"q",bing:"q",baidu:"wd",yandex:"text"}},getSearchEngineRegExp:function(){var a,b="",c=this.getSearchEngineKeywords();for(a in c)a.hasOwnProperty()||(b=b+"|"+a);return b.replace("|","")},getSearchEngine:function(a){var b,c=new RegExp(".*?(\\.|://)("+this.getSearchEngineRegExp()+")\\..*");return b=c.test(a)?a.replace(c,"$2"):!1},encodeParameter:function(a){return encodeURIComponent(a)},areUrlsEqual:function(a,b,d){var e,f,g=!0;return d=d||{includeProtocol:!0},a=a.toLowerCase(),b=b.toLowerCase(),a!==b&&(e=document.createElement("a"),f=document.createElement("a"),e.href=a,f.href=b,(d.includeProtocol&&e.protocol!==f.protocol||e.host!==f.host||e.port!==f.port||e.pathname!==f.pathname||!c(e.search.substr(1),f.search.substr(1)))&&(g=!1)),g},getQueryStringObject:function(a){var b,c,d,e={};if(a)for(b=a.split("&"),d=0;d<b.length;d++)c=b[d].split("="),0!==c.length&&(e[decodeURIComponent(c[0])]=decodeURIComponent(c[1]));return e}};b.exports=e}()},{"./Object.js":41}],38:[function(a,b,c){!function(){"use strict";var c=a("./Dom.js"),d={addEvent:function(a,b,c,d){return a.addEventListener?this.addEvent=function(a,b,c,d){return d=d?!0:!1,a.addEventListener(b,c,d),!0}:a.attachEvent?this.addEvent=function(a,b,c){return a.attachEvent("on"+b,c),!0}:this.addEvent=function(){return!1},this.addEvent(a,b,c,d)},removeEvent:function(a,b,c,d){return a.removeEventListener?this.removeEvent=function(a,b,c,d){return d=d?!0:!1,a.removeEventListener(b,c,d),!0}:a.detachEvent?this.removeEvent=function(a,b,c){return a.detachEvent("on"+b,c),!0}:this.removeEvent=function(){return!1},this.removeEvent(a,b,c,d)},addEventsToArray:function(a,b,c,d){var e,f;if(void 0===a)throw new TypeError("Argument array should not be undefined or NULL.");for(f=a.length>>>0,e=0;f>e;e++)this.addEvent(a[e],b,c,d)},removeEventsFromArray:function(a,b,c,d){var e,f,g=!0,h=!0;if("undefined"==typeof a)throw new TypeError("Argument array should not be undefined or NULL.");for(e=a.length>>>0,f=0;e>f;f++)h=this.removeEvent(a[f],b,c,d),g=h&&g?!0:!1;return g},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,a},getSrcElement:function(a){return a.target||a.srcElement},onClick:function(a,b){c.exists(a)&&this.addEvent(a,"click",b)},isOpeningNewWindow:function(a){var b=!1,c=!1;if(a.which)switch(a.which){case 1:b=!0;break;case 2:c=!0}else switch(a.button){case 1:b=!0;break;case 4:c=!0}return c||b&&(a.shiftKey||a.ctrlKey)},checkRightClick:function(a){return a.wich&&3===a.wich||!a.wich&&a.button&&2===a.button}};b.exports=d}()},{"./Dom.js":31}],39:[function(a,b,c){!function(){"use strict";b.exports={bind:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=Array.prototype.slice.call(arguments,2),e=function(){},f=function(){return a.apply(this instanceof e?this:b,d.concat(Array.prototype.slice.call(arguments)))};if("function"!=typeof a)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
return a.bind?c.length>1?a.bind.apply(a,c):a.bind(b):(e.prototype=a.prototype,f.prototype=new e,f)}}}()},{}],40:[function(a,b,c){!function(){"use strict";var c=a("./Shell.js"),d={parseJSON:function(a,b){var d=a;if("object"!=typeof a&&"undefined"!=typeof JSON)try{d=window.JSON.parse(a)}catch(e){b&&c.log(b)}return d},stringify:function(a,b){var d=a;if("string"!=typeof data&&"undefined"!=typeof JSON)try{d=window.JSON.stringify(a)}catch(e){b&&c.log(b)}return d}};b.exports=d}()},{"./Shell.js":44}],41:[function(a,b,c){!function(){"use strict";var a={create:function(a){function b(){}var c={};return a&&(Object.create?c=Object.create(a):(b.prototype=a,c=new b)),c},isEmpty:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0},areEqual:function(a,b){function c(e,f){for(d in e){if("object"==typeof e[d]&&f[d]){if(!c(e[d],f[d]))return!1}else if(e[d]!==f[d])return!1;delete a[d],delete b[d]}return!0}var d="";return c(a,b)&&c(b,a)},length:function(a){var b=0,c="";if("object"!=typeof a)throw new TypeError("The parametter must be an object.");for(c in a)b++;return b},concatenate:function(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&(d[c]=b[c]);return d},toLowerCase:function(a){var b=null,c={},d=null,e=null;for(b in a)if(d=b.toLowerCase(),"undefined"==typeof a[d]&&d!==b)switch(e=a[b],typeof e){case"string":c[d]=e.toLowerCase();break;case"object":if(null!==e&&"undefined"==typeof e.length){c[d]=this.toLowerCase(e);break}default:c[d]=e}else d===b&&(c[b]=a[b]);return c}};b.exports=a}()},{}],42:[function(a,b,c){!function(){"use strict";var c,d=a("events").EventEmitter,e=a("./Shell");c=new d,c.isLoaded=!1,c.markAsLoaded=function(){e.log("page has loaded"),this.isLoaded=!0,this.emit("page_loaded")},c.hasBeenLoaded=function(){return this.isLoaded},b.exports=c}()},{"./Shell":44,events:51}],43:[function(a,b,c){!function(){"use strict";var c=a("./Date"),d={generateUUID:function(){var a=c.now(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return("x"===b?c:3&c|8).toString(16)});return b}};b.exports=d}()},{"./Date":30}],44:[function(a,b,c){!function(){"use strict";var a={log:function(a){try{i.consoleMessagesEnabled&&console.log("VeApps: "+a)}catch(b){}},info:function(a){try{i.consoleMessagesEnabled&&console.info("VeApps: "+a)}catch(b){}},error:function(a){try{i.consoleMessagesEnabled&&console.error("VeApps: "+a)}catch(b){}}};b.exports=a}()},{}],45:[function(a,b,c){!function(c){"use strict";var d=60,e=6e4,f=1,g=a("../Classes/LocalStorageProxy.js"),h=a("../Classes/IframeStorageProxy.js"),i=a("./Domain.js"),j=a("../Classes/MessageManager.js"),k=a("./Date.js"),l=a("./Functions.js"),m={iframeReady:null,queuedRequests:[],init:function(a,b,d){var e=this,f=!0;e.iframeReady=!1,e.iframeDomain="https:"+a,e.iframeId=e.createIframe(b),e.iframeElement=c.getElementById(e.iframeId),j.subscribeTo(e.iframeId,function(a){var b,c,g=a.data.messageBody;if("object"==typeof g)e.storage=g,f&&(f=!1,d());else{for(e.iframeReady=!0,c=e.queuedRequests,b=0;b<c.length;b++)"function"==typeof c[b]&&c[b]();e.queuedRequests=[]}})},createIframe:function(a){var b,d=this,e=d.iframeId||k.now(),f=c.body,g=c.createElement("iframe"),h={iframeId:e,journeyId:a};return null===f&&(b=c.getElementsByTagName("script"),f=b[b.length-1].parentNode),g.id=e,g.style.display="none",g.tabindex=-1,g.src=i.createUrl(d.iframeDomain,["scripts","shared","iframeStorage.html"],h),f.appendChild(g),e},setSessionId:function(a){var b=function(){j.postMessage(this.iframeElement.contentWindow,{command:f,sessionId:a},this.iframeDomain)},c=l.bind(b,this);this.iframeReady?c():this.queuedRequests.push(c)},isInVeSession:function(a){var b=(k.now()-a)/e;return d>b},getStorage:function(a,b){var c;return c=b?new g(a):new h(this,a)}};b.exports=m}(document)},{"../Classes/IframeStorageProxy.js":21,"../Classes/LocalStorageProxy.js":22,"../Classes/MessageManager.js":23,"./Date.js":30,"./Domain.js":37,"./Functions.js":39}],46:[function(a,b,c){!function(){"use strict";b.exports={startsWith:function(a,b){return""===b?!1:0===a.indexOf(b)},endsWith:function(a,b){return a&&b?-1!==a.indexOf(b,a.length-b.length):!1},trim:function(a){return"string"==typeof a?a.replace(/^\s+|\s+$/g,""):void 0},isValidEmail:function(a){var b=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/;return a=a.toUpperCase(),-1===a.search(b)?!1:!0},cleanString:function(a){return a},boolToString:function(a){return a?"1":"0"},stringToBool:function(a){return"0"!==a?!0:!1},isCreditCard:function(a){return function(b){var c=null,d=1,e=0;for(b=b.replace(/[\s]*/gi,""),c=b.length;c--;)e+=(d^=1)?a[b[c]]:parseInt(b[c],10);return e%10===0&&e>0}}([0,2,4,6,8,1,3,5,7,9]),formatString:function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})}}}()},{}],47:[function(a,b,c){!function(c){"use strict";function d(){var a=h.generateUUID();return f.info("registering tab "+a),a}var e,f=a("./Shell"),g=a("./Event"),h=a("./Random");e={getCurrentTabInfo:function(){var a=this.storage.getItem(this.tabId);return a||{}},setCurrentTabInfo:function(a){var b=this.tabId||d();this.tabId=b,this.storage.setItem(b,a)},removeCurrentTabInfo:function(){f.info("de-registering tab: "+this.tabId),this.storage.removeItem(this.tabId),this.stop()},getAllTabsInfo:function(){return this.storage.getAllItems()},stop:function(){var a=function(){};this.setCurrentTabInfo=a,this.removeCurrentTabInfo=a},init:function(){var a=this;g.addEvent(c,"beforeunload",function(){a.removeCurrentTabInfo()}),a.storage=k.VeStorage.getStorage("tabs.")}},b.exports=e}(window)},{"./Event":38,"./Random":43,"./Shell":44}],48:[function(a,b,c){!function(){"use strict";var c,d=a("./Array.js");c={removeNotAvailableAppsFromTag:function(a,b){var c,e=[];for(c=0;c<a.length;c++)-1!==d.indexOf(a[c].name,b)&&e.push(a[c]);return e},appForceLoad:function(a,b){var d;return d=c.removeNotAvailableAppsFromTag(a,[b]),d[0]&&(d[0].load=!0),d},removeDisabledApps:function(a,b){var c,e=[],f=[];for(c=0;c<b.length;c++)b[c].enabled&&e.push(b[c].name);for(c=0;c<a.length;c++)-1!==d.indexOf(a[c],e)&&f.push(a[c]);return f}},b.exports=c}()},{"./Array.js":26}],49:[function(a,b,c){!function(a){"use strict";b.exports=function(){var b="veUtilsIframe",c=window.veTagData===a,d=document.getElementById(b);return c?d={contentWindow:window}:null===d&&(d=document.createElement("iframe"),d.id=b,d.style.visibility="hidden",d.style.display="none",d.border="0px",d.frameBorder="0",d.width="0px",d.height="0px",d.tabindex=-1,document.documentElement.appendChild(d),d=document.getElementById(b)),d.contentWindow}}()},{}],50:[function(a,b,c){k.VeStorage=a("./Storage"),k.tabsManager=a("./TabsManager"),k.event=a("./Event"),k.json=a("./Json"),k.array=a("./Array"),k.domain=a("./Domain"),k.date=a("./Date"),k.dom=a("./Dom"),k.array=a("./Array"),k.object=a("./Object"),k.shell=a("./Shell"),k.page=a("./PageMediator"),k.functions=a("./Functions"),k.tagTransformer=a("./TagTransformer"),k.string=a("./String"),k.capture=a("./Capture"),k.capture.plugins={productAggregator:a("../../Main/Capture/Plugins/ProductAggregator"),productLocalStorage:a("../../Main/Capture/Plugins/ProductLocalStorage")},k.compliance=a("./ComplianceMediator"),k.getUtilsIframe=a("./UtilsIframe"),k.messageManager=a("../Classes/MessageManager"),j.Session=a("../Classes/Session"),j.Reporting=a("../Classes/Reporting"),j.AppFactory=a("../../Main/Apps/AppFactory"),j.ApiManager=a("../Classes/ApiManager")},{"../../Main/Apps/AppFactory":3,"../../Main/Capture/Plugins/ProductAggregator":18,"../../Main/Capture/Plugins/ProductLocalStorage":19,"../Classes/ApiManager":20,"../Classes/MessageManager":23,"../Classes/Reporting":24,"../Classes/Session":25,"./Array":26,"./Capture":27,"./ComplianceMediator":29,"./Date":30,"./Dom":31,"./Domain":37,"./Event":38,"./Functions":39,"./Json":40,"./Object":41,"./PageMediator":42,"./Shell":44,"./Storage":45,"./String":46,"./TabsManager":47,"./TagTransformer":48,"./UtilsIframe":49}],51:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}]},{},[50]),function(){"use strict";var a;try{window.console&&window.console.log&&-1!==window.console.log.toString().indexOf("[native code]")||(a=k.getUtilsIframe(),window.console=a.console,window.console||(window.console={debug:function(){},dir:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},time:function(){},timeEnd:function(){},trace:function(){},warn:function(){}}),window.console.log("ve: console restored !"))}catch(b){}}(),function(a){"use strict";function b(){this.queue=[],this.isInitialised=!1}b.prototype.init=function(){var a=this.queue;for(this.isInitialised=!0;a.length>0;)a[0](),a.shift()},b.prototype.request=function(a){this.isInitialised?a():this.queue.push(a)},b.getInstance=function(){var a=new b;return b.getInstance=function(){return a},b.getInstance()},a.QueueManager=b}(j),function(a,b){"use strict";function c(a,c){var d,e,f,g=!1;for(d=new b.FormMappingBuilder(c),e=d.getElementsWithSelector(),f=0;f<e.length;f++)"input"===e[f].tagName.toLowerCase()&&(e[f].value=a,g=!0);return g}a.promoCode=a.promoCode||{},a.promoCode.init=function(a,b){this.session=a,this.mappingList=b},a.promoCode.fillWithPromoCode=function(){var a,b=this.session.getItem("promoCode"),d=this.mappingList,e=!1;if(b&&d)for(a=0;a<d.length;a++)e=c(b,d[a]);return e},a.promoCode.thereIsPromoCode=function(){return!!this.session.getItem("promoCode")},a.promoCode.checkForAutofill=function(){var b=this,c=750,d=function(){var e=!1;e=b.fillWithPromoCode(b.session,b.mappingList),e&&a.intervalManager.removeCallback(c,d)};b.thereIsPromoCode()&&b.mappingList&&a.intervalManager.addCallback(c,d)},a.promoCode.listenForPromoCode=function(b){a.messageManager.subscribeTo(b,function(a){var b=a.data.messageBody||{},c=b.promoCode;c&&(this._temporaryPromoCode=c)},this)},a.promoCode.storePromoCode=function(){var a=this;a._temporaryPromoCode&&(a.session.setItem("promoCode",a._temporaryPromoCode),delete a._temporaryPromoCode)}}(k,j),function(a,b){"use strict";b.intervalManager={_ids:{},_callbacks:{},addCallback:function(b,c,d){var e=this;e._callbacks[b]=e._callbacks[b]||[],e._callbacks[b].push({callback:c,context:d}),e._ids[b]||(e._ids[b]=a.setInterval(function(a){a.executeCallbacks(b)},b,e))},removeCallback:function(b,c){var d=this,e=0,f=d._callbacks[b],g=!1;if(f){for(e=0;e<f.length&&!g;e++)f[e].callback===c&&(f.splice(e,1),g=!0);0===f.length&&(a.clearInterval(d._ids[b]),delete d._ids[b],delete d._callbacks[b])}},executeCallbacks:function(b){var c,d,e=this._callbacks[b]||[];for(c=0;c<e.length;c++)"function"==typeof e[c].callback&&(d=e[c].context||a,e[c].callback.call(d))}}}(window,k),function(a,b){"use strict";function c(a,b){var c=this;c.registeredApps={},c.settingsHaveBeenAdded=!1,c.session=a,c.isDataCaptured=!1,c.appsPriorityOnEvent=b,c.status=c.STATUS.BEFORE_STARTS}function d(a,b,c){var d,e=!1,f=!1;for(d=0;d<c.length&&!e&&!f;d++)e=c[d]===b,f=c[d]===a;return f}var e=1e3;c.prototype.onSettingsDelaying=function(){this.delay()},c.prototype.onSettingsPausingChange=function(a){var b,c=!1;for(b in a)c=c||a[b];c?this.pause():(this.resume(),this.delay())},c.prototype.onSettingsStoppingApps=function(){this.stop()},c.prototype.isEventAdded=function(a){var b=!1;return this.eventsManager&&(b=this.eventsManager.hasBeenAdded(a)),b},c.prototype.onInitializedApp=function(a){var c,d,e=this;for(c in e.appsPriorityOnEvent)"inactivity"!==c&&-1!==b.array.indexOf(a,e.appsPriorityOnEvent[c])&&e.eventsManager.addEvent(c);if(!e.settingsHaveBeenAdded){e.settingsManager.addSettings("default",null);for(d in i)e.settingsManager.addSettings(d,i[d]);e.settingsHaveBeenAdded=!0}},c.prototype.setInactivityEvent=function(a,b){var c=this,f=c.appsPriorityOnEvent,g=c.currentAppSetOnInactivity,h=f.inactivity;h&&d(a,g,h)&&(c.currentAppSetOnInactivity=a,c.eventsManager.addEvent("inactivity",{delay:b*e}))},c.prototype.onOnloadDataCaptured=function(){this.isDataCaptured=!0},c.prototype.removeEvent=function(a){var c=this;delete c.appsPriorityOnEvent[a],c.eventsManager.removeEvent(a),b.object.isEmpty(c.appsPriorityOnEvent)&&(b.shell.info("Stop AppsManager"),c.settingsHaveBeenAdded&&(c.removeSettings(i),c.settingsHaveBeenAdded=!1))},c.prototype.removeEvents=function(a){var b;a=a||{};for(b in a)this.eventsManager.removeEvent(b)},c.prototype.removeSettings=function(a){var b;this.settingsManager.removeSettings("default");for(b in a)this.settingsManager.removeSettings(b)},c.prototype.stop=function(){var a,c=this,d=c.appsPriorityOnEvent;c.isLoaded()?(b.shell.log("Stop AppManager"),c.setStatus(c.STATUS.STOPPED),a=b.tabsManager.getCurrentTabInfo(),delete a.availableApps,b.tabsManager.setCurrentTabInfo(a),c.removeEvents(d),c.settingsHaveBeenAdded&&c.removeSettings(i),c.settingsHaveBeenAdded=!1):b.shell.log("Not stopping. AppManager status: "+c.getCurrentStatusName())},c.prototype.setAppsPriorities=function(a){this.appsPriorityOnEvent=a},c.prototype.init=function(c,d){function e(){h.onOnloadDataCaptured()}function g(a){return h.onEvent(a)}var h=this;b.shell.info("Loading AppsManager"),b.capture.mediator.hasOnLoadDataBeenCaptured()?e():b.capture.mediator.once("capture_onload-data-captured",e),h.browser=d,h.eventsManager=new a.PopEvents(g,h,d),h.eventsManager.init(a.Events),h.settingsManager=new f,h.settingsManager.init(),h.reporting=new a.Reporting(h,c),h.setStatus(h.STATUS.LOADED),h.appsPriorityOnEvent?h.setStatus(h.STATUS.PLAYING):b.shell.info("No priorities, AppsManager doesn't start")},a.AppsManager=c}(j,k),function(a,b,c){"use strict";var d=a.AppsManager.prototype;d.clearAppsDelay=function(){this.isDelayed()&&(b.shell.log("AppManager delay cleared"),c.clearTimeout(this.lastDelayTimeout))},d.delay=function(){var a=this;a.isPlaying()||a.isDelayed()?(a.clearAppsDelay(),b.shell.info("Delaying AppManager"),a.setStatus(a.STATUS.DELAYED),a.lastDelayTimeout=c.setTimeout(function(){a.isDelayed()&&a.play()},3e3)):b.shell.log("Not delaying. AppManager status: "+a.getCurrentStatusName())},d.play=function(){b.shell.info("Enabling AppManager"),this.eventsManager.activateEvent("Inactivity"),this.setStatus(this.STATUS.PLAYING)},d.resume=function(){this.isPaused()?this.play():b.shell.log("Not enabling. AppManager status: "+this.getCurrentStatusName())},d.pause=function(){var a=this;a.isPlaying()||a.isDelayed()?(b.shell.info("Pausing AppManager"),a.clearAppsDelay(),a.eventsManager.deactivateEvent("Inactivity"),a.setStatus(this.STATUS.PAUSED)):b.shell.log("Not pausing. AppManager status: "+a.getCurrentStatusName())},d.runApp=function(a){this.registeredApps[a]&&this.registeredApps[a].show()},d.backButtonClicked=function(){var a,d=this;d.hasBeenShown()||(b.shell.info("Back button has been clicked"),d.setStatus(this.STATUS.GOING_BACK),d.backButtonClickedTimer=c.setTimeout(function(){d.hasBeenShown()||(a=d.getAppToRun("backButton"),d.reporting.backButtonFired(a),d.reporting.appAccepted(a),d.shown())},500))},d.exitIntentMouseLeftWindow=function(){var a,c=this;c.hasBeenShown()||(b.shell.info("Exit intent mouse has left window"),a=c.getAppToRun("exitIntent"),c.reporting.exitIntentFired(a),c.reporting.appAccepted(a),c.shown())},d.shown=function(){b.shell.info("App has been shown"),c.clearTimeout(this.backButtonClickedTimer),this.stop(),this.setStatus(this.STATUS.SHOWN)}}(j,k,window),function(a,b,c,d){"use strict";function e(b,d){var e,f;return e=c.domain.referrerIsInDomains(o,i.domainsToIgnore),d&&b.isPlaying()&&!e?(b.markAppAsFired(d),b.displayApp(d),b.backButtonClicked(),f=a.confirm(b.getPopupMessage(d))):(b.delay(),f=!1),f}function f(a,b){var d;return c.shell.log("ExitIntent handler"),b&&a.isPlaying()?(a.markAppAsFired(b),a.displayApp(b),a.exitIntentMouseLeftWindow(),d=!0):(a.delay(),d=!1),d}function g(b){var c,d;return c="Chrome"===b.browser()&&a.parseFloat(b.version())>31,d="Safari"===b.browser()&&"Mac"===b.OS(),c||d}function h(b,c){b.shown(),g(b.browser)&&a.alert(" "),b.reporting.appAccepted(c)}function j(a,b){var c;return a.isPlaying()&&b&&(a.markAppAsFired(b),a.reporting.exitEventFired(b),c=a.getPopupMessage(b),a.displayApp(b),h(a,b)),c}function k(a,b){var c=!1;return b&&a.isPlaying()&&(a.displayApp(b),a.reporting.inactivityFired(b),a.shown(),c=!0),c}function l(b){var c=b.getAppToRunOnLoad();(b.isPlaying()||b.isPaused()||b.isDelayed())&&(b.isDataCaptured?c&&(b.displayApp(c),b.shown()):a.setTimeout(function(){b.onEvent("load")},100))}var m=b.AppsManager.prototype;m.getAppToRun=function(a){var b,d,e,f,g=this.session,h=!0,i=this.appsPriorityOnEvent[a]||[];for(b=0;b<i.length&&!f;b++)d=i[b],e=this.registeredApps[d],e&&("inactivity"!==a&&(h=e.canShowNow(g.getItem("sessionData"),c.tabsManager.getAllTabsInfo()),h||c.shell.info("not showing "+d+" due to session management restrictions")),e.isAppReady&&h&&(f=d));return f},m.getAppToRunOnLoad=function(){var a,b,c,e,f,g,h,i,j=this.appsPriorityOnEvent.load||[];for(a=0;a<j.length;a++)if(b=j[a],c=this.getApp(b),e=c.getStatus(),h=e===c.status.Error,i=e===c.status.Loading,g=e===c.status.Ready,(i||g)&&!h){g?f=b:i&&(f=d);break}return f},m.getPopupMessage=function(a){var b={assist:"You might have missed some products",chat:"An agent wants to speak with you",promote:"Do you want to share?",panel:"Can we help you with something?"},c=this.registeredApps[a].agent.popupMessage;return c||(c=b[a]),c},m.displayApp=function(a){var b=this.registeredApps[a];b&&this.isPlaying()&&b.show()},m.markAppAsFired=function(a){var b,d=this.session.getItem("sessionData")||{},e={appFires:0};d[a]=d[a]||e,b=d[a],b.appFires=b.appFires||0,b.lastActivationTime=c.date.now(),b.appFires++,this.session.setItem("sessionData",d)},m.onEvent=function(a){var b,c=this,d=c.getAppToRun(a),g={backButton:e,exit:j,inactivity:k,load:l,exitIntent:f};return g[a]&&(b=g[a](c,d)),b}}(window,j,k),function(a,b){"use strict";var c=a.AppsManager.prototype;c.statusMap={0:"Not Loaded",1:"Loaded",2:"Playing",3:"Delayed",4:"Paused",5:"Going Back",6:"Stopped",7:"Shown"},c.STATUS={BEFORE_STARTS:0,LOADED:1,PLAYING:2,DELAYED:3,PAUSED:4,GOING_BACK:5,STOPPED:6,SHOWN:7},c.getStatus=function(){return this.status},c.getCurrentStatusName=function(){return this.statusMap[this.status]},c.logCurrentStatusName=function(){b.shell.log(this.getCurrentStatusName())},c.isLoaded=function(){var a=this.status,b=this.STATUS;return a>b.BEFORE_STARTS&&a<b.SHOWN},c.isPlaying=function(){return this.getStatus()===this.STATUS.PLAYING},c.isDelayed=function(){return this.getStatus()===this.STATUS.DELAYED},c.isPaused=function(){return this.getStatus()===this.STATUS.PAUSED},c.isGoingBack=function(){return this.getStatus()===this.STATUS.GOING_BACK},c.isStopped=function(){return this.getStatus()===this.STATUS.STOPPED},c.hasBeenShown=function(){return this.getStatus()===this.STATUS.SHOWN},c.setStatus=function(a){this.status=a}}(j,k),function(a){"use strict";a.AppsManager.prototype.registerApp=function(a){this.registeredApps[a.name.toLowerCase()]=a},a.AppsManager.prototype.getApp=function(a){return this.registeredApps[a.toLowerCase()]||null}}(j),c(window.VeAPI);var r=function(a){"use strict";function b(a){if(k.shell.log("Loading custom events."),d=e,k.object.isEmpty(a))d.hasCustomSettings=!1;else{d.hasCustomSettings=!0;for(c in a)d[c]=a[c]}return d}var c="",d={},e={reload:function(a){b(a)},onLoad:function(){},onPageLoad:function(){},onFormIdentified:function(a,b){return!1},onGetCaptureValue:function(a,b,c){return b},onBackButton:function(){return!0}};return a&&b(a),d}(h.customEvents);!function(a){"use strict";function b(a){function b(a){t||(k.shell.log("Initialising VeCompliance"),m=f(u,a),m.result&&(d(u.JourneyCode,u.datareceiverurl),r=!0,i(m.optOut,m.controls,u.datareceiverurl,u.JourneyCode)),t=!0)}function c(a,b,c){var d="https:"===document.location.protocol?"https://":"http://";b=d+b+"MarkOptedOut?journeyCode="+a+"&value="+c;try{VeAPI.JSONP.request(b)}catch(e){}}function d(a,b){var c="https:"===document.location.protocol?"https://":"http://";b=c+b+"IsOptedOut?journeyCode="+a;try{VeAPI.JSONP.request(b,function(a){switch(a.result){case"none":n=!1,q=!0;break;case"True":n=!0,q=!1;break;case"False":n=!1,q=!1}})}catch(d){}}function e(a,b){try{var c=w+"&formmappingid="+b+"&identifyabandonment="+!1+"&fieldidname=optOut&identifypage="+!1+"&SerieNumber=&valuefield="+a;VeAPI.JSONP.request(c)}catch(d){}}function f(a,b){try{var c,d;if(null==b||-1==b)return{result:!1};for(d=0;d<a.Forms.length;d++)if(a.Forms[d].FormId==b){c=a.Forms[d];break}var e=[];for(d=0;d<c.FormFields.length;d++)c.FormFields[d].isEmail&&e.push({name:c.FormFields[d].ClientFieldName,type:c.FormFields[d].FieldTypeName,htmlType:c.FormFields[d].HtmlType});for(d=0;d<c.OptOuts.length;d++){var f=c.OptOuts[d];if(f.optOutId=a.OptOutField,f.Default)return{result:!0,optOut:f,controls:e};if(VEjQuery(f.Selector).text()==f.Criteria)return{result:!0,optOut:f,controls:e}}return{result:!1}}catch(g){return{result:!1}}}function g(a){try{n=a}catch(b){}}function h(a){return a.replace(/^\s+|\s+$/g,"")}function i(a,b,c,d){try{if(o=a.Effect,a.MarkUp=h(a.MarkUp),"<div "==a.MarkUp.substring(0,5)?a.MarkUp='<div id="veEMail" '+a.MarkUp.substring(5):"<DIV "==a.MarkUp.substring(0,5)&&(a.MarkUp='<DIV id="veEMail" '+a.MarkUp.substring(5)),VEjQuery("body").append(a.MarkUp),VEjQuery(".veClose").click(function(){q=!1,""==o?VEjQuery("#veEMail").hide():VEjQuery("#veEMail").toggle(o)}),VEjQuery(".veClick").change(function(){e(!0,a.optOutId),j(this.checked,d,c)}),VEjQuery(".veYesClick").click(function(){e(!0,a.optOutId),j(!0,d,c)}),VEjQuery(".veNoClick").click(function(){e(!1,a.optOutId),j(!1,d,c)}),0==VEjQuery(".veClick").length&&0==VEjQuery(".veYesClick").length&&0==VEjQuery(".veNoClick").length){for(var f=0;f<b.length;f++){var g=buildJQuerySelector({filter:"",clientFieldName:b[f].name},b[f].type,b[f].htmlType,b[f].name);VEjQuery(g).blur(function(){""==o?VEjQuery("#veEMail").hide():VEjQuery("#veEMail").toggle(o)})}n=!0}VEjQuery("#veEMail").css("position","absolute"),VEjQuery("#veEMail").css("z-index",1e3),VEjQuery("#veEMail").hide(),p={Position:a.Position,X:a.X,Y:a.Y},q=!0}catch(i){}}function j(a,b,d){q=!1,c(b,d,a),g(a),""==o?VEjQuery("#veEMail").hide():VEjQuery("#veEMail").toggle(o)}function l(a){try{var b=VEjQuery(a),c=b.offset().left,d=b.offset().top;switch(p.Position){case"TopLeft":break;case"TopRight":c+=b.width();break;case"BottonLeft":d+=b.height();break;case"BottomRight":c+=b.width(),d+=b.height()}c+=p.X,d+=p.Y,VEjQuery("#veEMail").css("left",c).css("top",d),VEjQuery("#veEMail").is(":visible")||(""==o?VEjQuery("#veEMail").show():VEjQuery("#veEMail").toggle(o))}catch(e){}}k.shell.log("Loading VeCompliance");for(var m,n,o,p={},q=!1,r=!1,s=!1,t=!1,u=a.captureConfig,v="https:"==window.location.protocol?"https://":"http://",w=v+a.captureConfig.datareceiverurl+"?journeycode="+u.JourneyCode+"&captureurl="+encodeURIComponent(window.location.href.replace(/http(s)?\:\/\/(www\.)?/,"").replace(/([#;])/gi,"?"))+"&customerid="+u.customerid+"&identifyabandonmentor="+u.IdentifyAbandonmentOr+"&numberidentifiedfields="+u.NumberIdentifiedFields,x=0;x<u.Forms.length;x++)if(u.Forms[x].FormTypeId<6&&u.Forms[x].OptOuts.length>0&&u.Forms[x].OptOuts[0].Effect.length>0){s=!0;break}if(s){var y=document.getElementById("veEffects");if(!y){var z=document.createElement("script");z.id="veEffects",z.type="text/javascript",z.async=!0,z.src=("https:"===document.location.protocol?"https://":"http://")+a.veHostDomain+"/scripts/shared/compliance-effects.js";var A=document.getElementsByTagName("script")[0];A.parentNode.insertBefore(z,A)}}return{showEmailAuthForm:function(a){l(a)},showCompliance:function(){return q},complianceRequired:function(){return r},startCompliance:function(a){b(a)},isInitialised:function(){return t}}}a.VeCompliance=b}(j),function(a,b){"use strict";function c(){}var d=";",e=new RegExp(d,"gi");c.prototype.aggregateCategories=function(a){var c,f,g=[];for(c=0;c<a.length;c++)f=b.capture.getInnerText(a[c]),f=f.replace(e,""),g.push(f);return g.join(d)},c.prototype.parseHtml=function(a,c){var d,e;return a?(e=b.dom.querySelectorAll(a,c),d=this.aggregateCategories(e)):d="",d},c.prototype.runCustomJSEvent=function(a,c,d){try{return r.onGetCaptureValue(a,c,d)}catch(e){return b.shell.error(e),c}},c.prototype.readValue=function(a,c,d){var e;switch(c.toLowerCase()){case"value":e=a.value;break;case"checkbox":e=a.checked?"Checked":"Unchecked";break;case"innerhtml":case"text":e=b.capture.getInnerText(a);break;case"src":e=a.src;break;case"class":e=a.className;break;case"id":e=a.id;break;case"href":e=a.href;break;case"visibility":e=a.style[c];break;case"html":e=this.parseHtml(d,a);break;default:e=a.getAttribute(c)}return e||""},c.prototype.getValue=function(a,c,d,e){var f=0,g=0,h=[],i=null,j=null;if("window.location.href"===a)h.push(b.domain.getHref());else for(j=b.dom.querySelectorAll(a),g=j.length,f=0;g>f;f++)i=this.readValue(j[f],c,e),d&&(i=this.runCustomJSEvent(d,i,j[f])),h.push(i);return h},a.CaptureData=c}(j,k),function(a,b,c){"use strict";function d(b){for(var d=c.date.now()+"";d.length<b;)d+="x";return d.replace(/x/g,function(){var b=a.Math.floor(10*a.Math.random())+"";return b[0]})}function e(a){var e,f=this;a=a||"",e=a.split("/")[0],f.apiManager=new b.ApiManager({domain:e,queueManager:b.QueueManager.getInstance(),methodWindow:c.getUtilsIframe()}),f.requestCount=1,f.instanceId=d(20)}e.prototype.dataReceiverPath=["Data","ProcessData"],e.prototype.changeStatusPath=["Data","ChangeStatus"],e.prototype.addDefaultPayload=function(a){var b=this,d=b.requestCount,e=b.instanceId;return a.pageId=e,a.requestId=e+"_"+d,a.jsonCallback="VeAPI.JSONP.callbacks.VEjQuery"+e+"_"+d,a.referrer=c.domain.createUrl("","",a),d++,b.requestCount=d,a},e.prototype.send=function(a,b){a=this.addDefaultPayload(a),this.apiManager.request(this.dataReceiverPath,null,null,null,b,a)},e.prototype.updateStatus=function(a,b){a=this.addDefaultPayload(a),this.apiManager.request(this.changeStatusPath,null,null,null,b,a)},b.CaptureApi=e}(window,j,k),function(a,b){"use strict";function c(a,c,d){var e,f=this;a=a||{},e=a.captureConfig||{},f.callForChangedData=c,f.captureApi=d,f.data=[],f.basicParameters={journeyCode:a.journeycode,captureUrl:b.domain.getHref().replace(/http(s)?\:\/\/(www\.)?/,"").replace(/([#;])/gi,"?"),customerId:e.customerid,identifyAbandonmentOr:e.IdentifyAbandonmentOr,numberIdentifiedFields:e.NumberIdentifiedFields}}c.prototype.getParameters=function(a,c,d){var e=b.json.parseJSON(b.json.stringify(this.basicParameters));return e.valueField=c,e.seriesNumber=d,e.identifyPage=a.identifypage,e.formMappingId=a.FormMappingId,e.identifyAbandonment=a.IdentifyAbandonment,e.fieldIdName=a.ClientFieldName,e},c.prototype.doRequest=function(a,c,d){var e=null,f="DataReceiver request for FormMapping: "+a.FormMappingId;c&&!b.string.isCreditCard(c)&&(!a.isEmail||a.isEmail&&b.string.isValidEmail(c))&&(b.shell.log("Captured formMapping: "+a.FormMappingId+" - data captured: "+c),e=this.getParameters(a,c,d),this.captureApi.send(e,f))},c.prototype.changeData=function(a,b,c){var d,e=!1,f=!1;for(d=this.data.length-1;d>=0;d--)if(this.data[d].fieldId===a&&this.data[d].series===c){e=!0,this.data[d].fieldValue!==b&&(f=!0,this.data[d].fieldValue=b);break}return{isValueInArray:e,valueChanged:f}},c.prototype.storeData=function(a,b,c){var d;return c=c||1,d=this.changeData(a,b,c),d.isValueInArray||(d.valueChanged=!0,this.data.push({fieldId:a,fieldValue:b,series:c})),d.valueChanged},c.prototype.processData=function(a,b,c){this.storeData(a.FormMappingId,b,c)&&this.callForChangedData(this.data),this.doRequest(a,b,c)},c.prototype.processRawSeriesData=function(a,b){var c;for(c=0;c<b.length;c++)this.processData(a,b[c],c+1)},c.prototype.sendData=function(a,c){"RawSeries"===a.FieldTypeName?(b.capture.mediator.dataHasBeenProcessed(a,c),this.processRawSeriesData(a,c)):(b.capture.mediator.dataHasBeenProcessed(a,[c[0]]),this.processData(a,c[0],null))},c.prototype.getData=function(){return this.data},a.CapturedFormMapping=c}(j,k),j.FormMappingBuilder=d,function(a,b){"use strict";function c(a){var c,d,e={onLoadFormMappings:[],onChangeFormMappings:[],dynamicFormMappings:[]};for(d=a.length-1;d>=0;d--)switch(c=a[d],c.identifypage=!1,a[d].DomEvent){case"OnLoad":e.onLoadFormMappings.push(c);break;case"OnChange":e.onChangeFormMappings.push(c);break;case"OnloadOnChange":e.onLoadFormMappings.push(c),e.onChangeFormMappings.push(c);break;case"DynamicPageIdentified":c.identifypage=!0,e.dynamicFormMappings.push(c);break;case"DynamicActivity":e.dynamicFormMappings.push(c);break;default:b.shell.error("unknown event type: "+c.DomEvent);
}return e}function d(a,b){var c,d=a.length!==b.length;for(c=0;c<a.length&&!d;c++)d=a[c]!==b[c];return d}function e(b,d){var e;b=b||[],e=c(b),this.onLoadFormMappings=e.onLoadFormMappings,this.onChangeFormMappings=e.onChangeFormMappings,this.dynamicFormMappings=e.dynamicFormMappings,this.dynamicFormMappingInterval=null,this.captureData=new a.CaptureData,this.capturedFormMapping=d}var f=!1;e.prototype.checkForCompliance=function(a){a.isEmail&&b.compliance.emit("compliance_needed",a.ClientFieldName)},e.prototype.processData=function(a,b){this.checkForCompliance(a),this.capturedFormMapping.sendData(a,b)},e.prototype.onLoadChangeEvents=function(a){var c=this.captureData,d=c.getValue(a.ClientFieldName,a.HtmlAttributeTag,a.FormMappingId,a.htmlPath);d.length>0&&(this.processData(a,d),b.capture.mediator.onChangeDataHasBeenCaptured())},e.prototype.addLoadEvent=function(){var a;for(a=this.onLoadFormMappings.length-1;a>=0;a--)this.onLoadChangeEvents(this.onLoadFormMappings[a])},e.prototype.addChangeEvent=function(){var a=0,c=0,d=null;for(a=this.onChangeFormMappings.length-1;a>=0;a--)for(d=b.dom.querySelectorAll(this.onChangeFormMappings[a].ClientFieldName),this.onChangeFormMappings[a].onLoadChangeEvents=b.functions.bind(this.onLoadChangeEvents,this,this.onChangeFormMappings[a]),c=d.length-1;c>=0;c--)b.event.addEvent(d[c],"change",this.onChangeFormMappings[a].onLoadChangeEvents)},e.prototype.onDynamicFormMappingInterval=function(){var a,c,e,f,g=this,h=g.captureData;for(a=g.dynamicFormMappings.length-1;a>=0;a--)e=g.dynamicFormMappings[a],f=h.getValue(e.ClientFieldName,e.HtmlAttributeTag,e.FormMappingId),c=e.oldValues||[],d(f,c)&&(e.oldValues=f,g.processData(e,f));b.capture.mediator.onRerenderDataHasBeenCaptured()},e.prototype.addDynamicEvent=function(){this.onDynamicFormMappingIntervalBinded=b.functions.bind(this.onDynamicFormMappingInterval,this),this.dynamicFormMappingInterval=setInterval(this.onDynamicFormMappingIntervalBinded,750)},e.prototype.init=function(){f||(f=!0,this.addLoadEvent(),this.addChangeEvent(),this.addDynamicEvent())},a.FormMapping=e}(j,k),function(a,b){"use strict";function c(a,b){this.captureApi=a,this.journeyCode=b}var d="2",e="3";c.prototype.updateStatus=function(a,c){var d="Change Status request as form type "+c+" identified -> form status: "+a,e={journeyCode:this.journeyCode,status:a};b.shell.info(d),this.captureApi.updateStatus(e,d)},c.prototype.checkForm=function(a){var b;a+="",a===d&&(b=1,this.updateStatus(b,a)),a===e&&(b=9,this.updateStatus(b,a))},a.FormChangeStatus=c}(j,k),function(a,b,c){"use strict";function d(a,b){this.formList=a||[],this.pageURL=b||"",this.isIdentificationComplete=!1,this.matchedForms=[]}d.prototype.init=function(){var a,d=this.pageURL||"";d=b.capture.toLowerCaseString(d),d=d.replace(/http(s)?\:\/\/(www\.)?/,""),d=d.replace(/([#;])/gi,"?"),a=d.split("?",2),this.pageBaseURL=a.shift(),this.pageParameters="",a[0]!==c&&(this.pageParameters="?"+a[0])},d.prototype.matchesWhiteList=function(a){var c,d=!1,e=a.FormURLs||[],f=e.length,g=this.pageURL,h=this.pageBaseURL;for(d=a.FormTypeId===n&&0===f,c=0;f>c&&!d;c++)a.whiteListUseRegex?d=e[c].test(g):(d=b.capture.stringMatch(e[c],h),d=d&&this.matchParameters(a.Paremeter));return d},d.prototype.matchesBlackList=function(a){var c,d=!1,e=a.FormBlackListURLs||[],f=e.length,g=this.pageURL,h=this.pageBaseURL;for(c=0;f>c&&!d;c++)d=a.blackListUseRegex?e[c].test(g):b.capture.stringMatch(e[c],h);return d},d.prototype.formMatchesURL=function(a){var b;return b=this.matchesWhiteList(a),b=b&&!this.matchesBlackList(a)},d.prototype.getMatchingForms=function(){return this.matchedForms},d.prototype.matchFormsByUrl=function(){var a,b,c=[],d=this.formList||[],e=d.length;for(a=0;e>a;a++)b=d[a],this.formMatchesURL(b)&&c.push(b);return this.matchedForms=c,c},d.prototype.matchParameters=function(a){var c,d,e,f,g,h=this.pageParameters,i=!0;for(a=a||[],c=0;c<a.length&&i;c++)d=b.capture.toLowerCaseString(a[c].Paremeter),e=b.capture.toLowerCaseString(a[c].ParameterValue),"*"===e?(g=new RegExp("[?&]"+d+"([=&]|$)","i"),i=g.test(h)):(f=b.domain.getQueryParameter(d,h),i=b.capture.stringMatch(e,f));return i},d.prototype.preferFormsWithParameters=function(){var a,b,c,d=this.matchedForms,e=d.length,f=[],g=!1;for(c=0;e>c;c++)b=d[c],b.Paremeter&&b.Paremeter.length>0&&(g=!0,f.push(b));return a=g?f:d,this.matchedForms=a,a},d.prototype.preferFormsWithVisibleFormMappings=function(){var a,c,d,e,f,g,h,i=this.matchedForms,j=[],k=!1;for(c=i.length,a=0;c>a;a++)if(d=i[a],d.FormTypeId===n)j.push(d);else for(e=d.FormFields||[],f=e.length,g=0;f>g;g++)b.capture.checkForControls(e[g]).length>0&&j.push(d);return k=j.length>0,h=k?j:i,this.matchedForms=h,h},d.prototype.identificationComplete=function(a){return"boolean"==typeof a&&(this.isIdentificationComplete=a),this.isIdentificationComplete},d.prototype.forceFormMatch=function(a){a instanceof Array||(a=[a]),this.getMatchingForms=function(){return a}},d.prototype.getFormId=function(){var a=0,b=this.matchedForms;return 1===b.length?a=b[0].FormId:b.length>1&&(a=-1),a},a.FormIdentifier=d}(j,k),function(a){"use strict";function b(a){function b(a){for(var b=0,c=[];b<a.length;b++)c=k.array.concatWithoutDuplicate(c,a[b].FormFields);return c}function c(){var b;for(b=0;b<s.length;b++)s[b]!==a&&(t=k.array.concatWithoutDuplicate(t,s[b]))}function d(){t.length>0&&!(v.length>0)&&(v=b(t))}function e(){0===w.length&&(u.length>0||v.length>0)&&(w=k.array.concatWithoutDuplicate(u,v))}function f(){var b,c,d=k.array.concatWithoutDuplicate(a,t);for(b=0;b<w.length;b++)c=w[b].FormMappingId,w[b].FormTypeId=k.capture.getFormTypeIdByFormMappingId(c,d)}function g(b){var c,d=!0;for(b=parseInt(b),c=0;c<a.length;c++)d=d&&a[c].FormTypeId===b;return d}function i(){var b;for(b=0;b<a.length;b++)q=k.array.pushWithoutDuplicate(a[b].appName,q),r[a[b].appName]?r[a[b].appName]=k.array.pushWithoutDuplicate(a[b],r[a[b].appName]):r[a[b].appName]=[a[b]]}function j(){(!o&&6===a[0].FormTypeId||o&&g(6))&&(p=!0)}function l(){function a(a,b){return parseInt(a.priority)>parseInt(b.priority)?1:parseInt(b.priority)>parseInt(a.priority)?-1:0}var b;for(b in r)r[b].sort(a)}function m(){0!==a.length&&(a.length>1&&(o=!0),j(),o||p?p?n=6:(n=1,u=b(a)):(u=a[0].FormFields,n=a[0].FormTypeId))}var n,o=!1,p=!1,q=[],r={},s=arguments,t=[],u=[],v=[],w=[];m(),p?(i(),l()):(c(),d(),e(),f()),this.FormTypeId=n,this.formfields=k.capture.initialiseFormMappings(w),this.customerid=h.captureConfig.customerid,this.IdentifyAbandonmentOr=h.captureConfig.IdentifyAbandonmentOr,this.NumberIdentifiedFields=h.captureConfig.NumberIdentifiedFields,this.datareceiverurl=h.captureConfig.datareceiverurl,this.getAppsAvailable=function(){return q},this.getAgents=function(a,b){return r[a]&&r[a][b]?r[a][b].appAgents:!1},this.getFormCountPerApp=function(a){return r[a]?r[a].length:0},this.getFormIdForApp=function(a,b){return r[a]&&r[a][b]?r[a][b].FormId:0}}a.FormManager=b}(j),function(a,b,c){"use strict";function d(a){this.tagData=a}d.prototype.init=function(a){var b=this,c=b.createCaptureApi();b.checkForFormStatusChange(c,a),b.setFormMapping(c,a),b.startCapture(),b.publishVeApiMethods()},d.prototype.createCaptureApi=function(){var a=new b.CaptureApi(this.tagData.captureConfig.datareceiverurl);return a},d.prototype.checkForFormStatusChange=function(a,c){var d=new b.FormChangeStatus(a,this.tagData.journeycode);d.checkForm(c.FormTypeId)},d.prototype.setFormMapping=function(a,c){function d(a){var b=e.getAgentManager();b&&b.findAgents(a)}var e=this;e.capturedFormMapping=new b.CapturedFormMapping(e.tagData,d,a),e.formMapping=new b.FormMapping(c.formfields,e.capturedFormMapping)},d.prototype.startCapture=function(){function a(){c.shell.log("running VeCapture"),b.formMapping?b.formMapping.init():c.shell.error("trying to start capture without initialising!"),c.capture.mediator.onLoadDataHasBeenCaptured()}var b=this;c.page.hasBeenLoaded()?a():c.page.on("page_loaded",a)},d.prototype.publishVeApiMethods=function(){var b=this;a.VeAPI.capture&&(a.VeAPI.capture.getCapturedControls=function(){return b.getCapturedDataValues()})},d.prototype.setAgentManager=function(a){this.agentManager=a},d.prototype.getAgentManager=function(){return this.agentManager||null},d.prototype.getCapturedDataValues=function(){var a=[];return this.capturedFormMapping&&(a=this.capturedFormMapping.getData()),a},b.CaptureCore=d}(window,j,k),function(a,b,c){"use strict";function d(a,b){var c,d,e,f,g,h={};for(c=0;c<b.length;c++){for(f=b[c],e=[],d=0;d<a.length;d++)g=a[d],g[f]===!0&&e.push(g.name);e.length>0&&(h[f]=e)}return h}function e(a,b){var c,d=null;for(c=0;c<b.length&&null===d;c++)b[c].name===a&&(d=b[c]);return d}function f(a,b,c){this.appsApi=a,this.tagData=b,this.browser=c}f.prototype.APP_EVENT_NAMES=["exit","inactivity","backButton","load","exitIntent"],f.prototype.init=function(){var a=this,b=a.tagData,d=c.VeAPI,e={journeyCode:b.journeycode,veHostDomain:b.veHostDomain,journeyId:b.captureConfig.JourneyId,appsMappings:b.appsMappings,promoteLanding:b.promoteLanding,version:d.version||{}},f={customerId:b.captureConfig.customerid,journeyId:b.captureConfig.JourneyId,journeyCode:b.journeycode,criteriaFilters:b.criteriaFilters,browser:a.browser};a.appFactoryConfig=e,a.agentManagerConfig=f},f.prototype.startApps=function(a,c,e){var f,g,h=this,i=h.tagData;a=a||[],f=b.tagTransformer.removeDisabledApps(a,i.apps),g=b.tagTransformer.removeNotAvailableAppsFromTag(i.apps,f),h.appsPrioritiesByEvent=d(g,h.APP_EVENT_NAMES),h.appsManager=h.createAppsManager(c),h.createAndRegisterApps(f),h.agentManager=h.createAgentManager(f,c),h.agentManager.findAgents(e)},f.prototype.createAppsManager=function(b){return g=new a.AppsManager(b,this.appsPrioritiesByEvent)},f.prototype.createAndRegisterApps=function(b){var c,d,f,g,h,i=this;for(b=b||[],c=new a.AppFactory(i.appFactoryConfig,i.browser),h=0;h<b.length;h++)d=b[h],g=e(d,i.tagData.apps),f=c.createApp(d,g),f.setAppPriorityOnEvent(i.appsPrioritiesByEvent),i.appsManager.registerApp(f)},f.prototype.createAgentManager=function(b,c){var d,e=this,f=e.agentManagerConfig;return f.agentStorage=c,f.appsManager=e.appsManager,f.availableApps=b||[],d=new a.AgentManager(f,e.appsApi)},f.prototype.getAppsManager=function(){return this.appsManager||null},f.prototype.getAgentManager=function(){return this.agentManager||null},a.AppsCore=f}(j,k,window),function(a,b,c){"use strict";function d(b){var c;for(c=b.length-1;c>=0;c--)b[c].value=a.parseInt(b[c].value,10);return b}function e(){}function f(b,c){var d,e,f=[];for(b=b||[],e=b.length,d=0;e>d;d++)a.parseInt(b[d].fieldId,10)===c&&f.push(decodeURIComponent(b[d].fieldValue));return f}function g(a,b){return-1!==c.array.indexOf(a,j[b])}function h(a,b,c){var d=!1;return"="===a?d=b===c:"Like"===a?d=new RegExp(c).test(b):"Start"===a?d=new RegExp("^"+c).test(b):"End"===a?d=new RegExp(c+"$").test(b):"NotLike"===a?d=!new RegExp(c).test(b):"<"===a?d=c>b:"<="===a?d=c>=b:">"===a?d=b>c:">="===a&&(d=b>=c),d}function i(a,b){var c,d;return"String"===b?a=a.toString():"Number"===b?(c=new RegExp(".*?([-]?[0-9]+([.][0-9]+)?).*",""),a=parseFloat(a.toString().replace(c,"$1"))):"Currency"===b&&(d=new RegExp("[^0-9-.]","g"),a=parseFloat(a.toString().replace(d,""))),a}var j={String:["=","Like","Start","End","NotLike"],Number:["=","<","<=",">",">="],Currency:["=","<","<=",">",">="]};e.prototype.init=function(a,b){var c,e,f,g;for(this.criteria={},b=b||[],e=b.length,c=0;e>c;c++)f=b[c],g=a[f]||[],this.criteria[f]=d(g)},e.prototype.getAgentFactoryIds=function(a,b){var c,d=[],e=this.criteria[a]||[],f=e.length;for(c=0;f>c;c++)this.testAgent(e[c],b)&&d.push(e[c].value);return d},e.prototype.testAgent=function(a,b){return this.testCriteria(a.criteria,b)},e.prototype.testCriteria=function(a,b){var c,d,e,j,k,l,m,n,o,p,q=[],r=!1;for(a=a||[],o=a.length,r=0===o,c=0;o>c;c++){for(q=f(b,a[c].formMappingId),e=a[c].operator,j=a[c].typeName,d=i(a[c].value,j),n=a[c].innerGrouping,m=n&&n.length>0,p=q.length,l=0;p>l&&!r;l++)g(e,j)&&(k=i(q[l],j),r=h(e,k,d));r&&m&&(r=this.testCriteria(n,b))}return r},b.CriteriaFilters=e}(window,j,k),function(a,b,c){"use strict";function d(a,c){var d,e=!0,f=b.array.indexOf(a,c.matchingAgents);for(d=0;f>d&&e;d++)-1!==b.array.indexOf(c.matchingAgents[d],c.pendingAgents)&&(e=!1);return e}function e(a,e,f){var g=a,h=f.appName,i=g.appsManager.getApp(h),j=f.agentId,k=e.agentId,l=f.agentFactoryId,m=g.agentStorage.getItem(h+"."+l);null===j||m===k?(null===j&&g.agentStorage.setItem(h+"."+l,e.agentId),b.shell.log("Recieved agentId: "+k+" for app: "+h),i.canAgentRun(e)?(g.agents[l]=e,e.id=c.parseInt(l),d(l,g)&&(g.appsManager.isLoaded()||g.appsManager.init(g.appsApiInstance,g.browser),i.init(e))):b.shell.info(h+". Agent "+k+": agent can not run")):g.requestAgent(h,l,f.capturedControls,m)}function f(b,c){var d=this;b=b||{},d.appsApiInstance=c,d.agentStorage=b.agentStorage,d.journeyId=b.journeyId,d.customerId=b.customerId,d.journeyCode=b.journeyCode,d.appsManager=b.appsManager,d.appNames=b.availableApps,d.browser=b.browser,d.criteriaManager=new a.CriteriaFilters,d.criteriaManager.init(b.criteriaFilters,b.availableApps)}function g(a,c,d){var e,f=0;return d=d||[],a=a||[],e=a[0],e!==c&&-1===b.array.indexOf(e,d)&&(f=e),f}function h(a,c){var d,e=[];for(d=0;d<a.length;d++)-1===b.array.indexOf(a[d],c)&&e.push(a[d]);return e}function i(a,b,c,d){return{path:["api",b,"agentFactory"],params:{agentId:d||null,journeyId:a.journeyId,customerId:a.customerId,journeyCode:a.journeyCode,agentFactoryId:c}}}var j={Error:-1,NotStarted:0,Requesting:1,Loading:2,Ready:3};f.prototype.disabledApps=[],f.prototype.disabledAgentFactories=[],f.prototype.pendingAgents=[],f.prototype.matchingAgents=[],f.prototype.agents={},f.prototype.findAgents=function(a){var b,c,d,e;for(d=this.appNames||[],b=d.length,c=0;b>c;c++)e=d[c],this.requestApp(e,a)},f.prototype.requestApp=function(a,c){var d,e,f,i=this,j=this.appsManager.getApp(a);null!==j&&(f=j.agent.id),-1===b.array.indexOf(a,i.disabledApps)?(d=i.criteriaManager.getAgentFactoryIds(a,c),i.matchingAgents=h(d,i.disabledAgentFactories),e=g(i.matchingAgents,f,i.pendingAgents),e?i.requestAgent(a,e,c):b.shell.info(a+". No agent matches the criteria filters.")):b.shell.info(a+" is disabled on requesting agents for it.")},f.prototype.changeAppStatus=function(a,b){var c=this.appsManager.getApp(a)||{},d=c.getStatus()===j.Loading,e=c.getStatus()===j.Ready;switch(b){case j.Loading:c.setStatus(b);break;case j.Requesting:d||e||c.setStatus(b);break;case j.Error:0!==this.pendingAgents.length||d||e||c.setStatus(b)}},f.prototype.requestAgent=function(a,c,d,e){function f(f){var g={appName:a,agentFactoryId:c,agentId:e||null,capturedControls:d};null!==f?k.processAppAgent(f,g):(b.shell.error(a+": No agent data received for agent: "+c),k.changeAppStatus(a,j.Error))}function g(){k.changeAppStatus(a,j.Error)}var h,k=this,l=null,m=k.agentStorage;b.shell.info(a+". Loading agent: "+c),b.array.pushWithoutDuplicate(c,k.pendingAgents),e||(e=m.getItem(a+"."+c)),k.agents[c]?(b.shell.info(a+". Loading agent: "+c+"from local copy"),f(k.agents[c])):(k.changeAppStatus(a,j.Requesting),h=i(k,a,c,e),l=k.appsManager.getApp(a).getParamAgentRequest(),l=b.object.concatenate(h.params,l),k.appsApiInstance.request(h.path,null,f,g,a,l))},f.prototype.processAppAgent=function(a,c){var d=this,f=c.appName,g=c.agentFactoryId;b.shell.info(f+". Agent received for agentFactoryId: "+g),b.array.removeElementFromArray(d.pendingAgents,g),a.status===m?(b.shell.info(f+" app is disabled."),d.disabledApps.push(f),d.changeAppStatus(f,j.Error)):a.status===l?e(d,a,c):(b.shell.info(g+" agent is disabled."),d.disabledAgentFactories.push(g),d.requestApp(f,c.capturedControls),d.changeAppStatus(f,j.Error))},a.AgentManager=f}(j,k,window),function(a,b){"use strict";function c(a,b,c){this.myEvents={},this.eventsRequiredBy={},this.callback=a,this.appsManagerInstance=b,this.browser=c}c.prototype.addEvent=function(a,b){var c,d,e=this,f=e.myEvents,g=e.eventsRequiredBy,h=!1,i=null;if(e.hasBeenAdded(a))f[a].reset&&f[a].reset(b);else if(h=f[a].add(b)){for(f[a].hasBeenAdded=!0,i=f[a].getDependencies(),c=0;c<i.length;c++)d=i[c],g[d]=g[d]||[],g[d].push(a),e.addEvent(d);e.activateEvent(a)}},c.prototype.activateEvent=function(a){this.myEvents[a]&&this.myEvents[a].activate()},c.prototype.deactivateEvent=function(a){this.myEvents[a]&&this.myEvents[a].deactivate()},c.prototype.removeEvent=function(a){var b,c=!0,d=null;if(this.hasBeenAdded(a)){if(d=this.eventsRequiredBy[a])for(b=0;b<d.length;b++)this.hasBeenAdded(d[b])&&(c=!1);c&&(this.myEvents[a].remove(),this.myEvents[a].hasBeenAdded=!1,this.deactivateEvent(a))}},c.prototype.hasBeenAdded=function(a){return this.myEvents[a]&&this.myEvents[a].hasBeenAdded},c.prototype.isActive=function(a){return this.myEvents[a]&&this.myEvents[a].isActive},c.prototype.onEventDetected=function(a){return this.callback(a)},c.prototype.changeAppsManagerStatus=function(a){return this.appsManagerInstance[a]()},c.prototype.init=function(a){var c=null,d=null,e=b.functions.bind(this.onEventDetected,this),f=b.functions.bind(this.changeAppsManagerStatus,this);b.shell.log("Loading PopEvents");for(c in a)d=c[0].toLowerCase()+c.substring(1),this.myEvents[d]=new a[c](e,f,this.browser)},a.PopEvents=c}(j,k),function(a,b,c){"use strict";function d(b,c,d){var e=this;e.numberOfPage=0,e.callback=b,e.backButtonSystem=null,e.appsManagerStatus=c,e.browser=d,e.history=a.history}d.prototype.historyGoBack=function(){var b=this;b.numberOfPage>0&&(b.history.go(-1),b.numberOfPage--),b.numberOfPage>0&&(b.historyGoBackBinded||(b.historyGoBackBinded=c.functions.bind(b.historyGoBack,b)),a.setTimeout(b.historyGoBackBinded,10))},d.prototype.getDependencies=function(){return this.backButtonSystem.getDependencies()},d.prototype.handleEvent=function(b){var d,e=this;c.shell.info("BackButton pressed"),e.numberOfPage=b,d=e.callback("backButton"),d||(e.historyGoBackBinded||(e.historyGoBackBinded=c.functions.bind(e.historyGoBack,e)),a.setTimeout(e.historyGoBackBinded,10))},d.prototype.getBackButtonSystem=function(){var a=this,d=null;return a.handleEventBinded||(a.handleEventBinded=c.functions.bind(a.handleEvent,a)),d="IE"===a.browser.browser()?new b.IframeBackButton(a.handleEventBinded):new b.PushStateBackButton(a.handleEventBinded,a.appsManagerStatus,a.browser)},d.prototype.add=function(){var a=this,b=!1;return a.backButtonSystem||(a.backButtonSystem=a.getBackButtonSystem()),a.history.length>1&&(b=a.backButtonSystem.add()),b},d.prototype.activate=function(){this.backButtonSystem.activate()},d.prototype.deactivate=function(){this.backButtonSystem.deactivate()},d.prototype.remove=function(){this.backButtonSystem.remove()},b.Events=b.Events||{},b.Events.BackButton=d}(window,j,k),function(a,b,c){"use strict";function d(b){this.callback=b,this.countIframeLoadEvent=0,this.iframe=a.createElement("iframe")}d.prototype.getDependencies=function(){return["exit"]},d.prototype.handleEvent=function(){this.countIframeLoadEvent<2?(0===this.countIframeLoadEvent&&(this.iframe.src="about:blank"),this.countIframeLoadEvent=this.countIframeLoadEvent+1):2===this.countIframeLoadEvent&&this.isActive&&this.callback(1)},d.prototype.add=function(){var b=!1;return this.iframe.src="about:inprivate",this.iframe.style.display="none",this.iframe.tabindex=-1,this.handleEventBinded=c.functions.bind(this.handleEvent,this),b=c.event.addEvent(this.iframe,"load",this.handleEventBinded),a.body.appendChild(this.iframe),b},d.prototype.activate=function(){this.isActive=!0},d.prototype.deactivate=function(){this.isActive=!1},d.prototype.remove=function(){return this.deactivate(),!0},b.IframeBackButton=d}(document,j,k),function(a,b,c,d){"use strict";function e(a,b,c){this.timer=null,this.hashChanged=!1,this.readyStateInteractive=!1,this.stateFunctionsOverwrited=!1,this.VE_BACK_BUTTON1="VeBackButton1",this.VE_BACK_BUTTON2="VeBackButton2",this.VE_BACK_BUTTON_REPLACED="VeBackButtonReplaced",this.lastHistoryState=history.state,this.callback=a,this.appsManagerStatus=b,this.browser=c}e.prototype.getDependencies=function(){return["exit"]},e.prototype.triggerHandlerReplacedState=function(){d.event.removeEvent(a,"hashchange",this.onHashChangeEventBinded),this.hashChanged?this.hashChanged=!1:(this.appsManagerStatus("delay"),a.history.go(-1))},e.prototype.onHashChangeEvent=function(){a.clearTimeout(this.timer),this.hashChanged=!0,this.triggerHandlerReplacedState()},e.prototype.onStateMatch=function(){this.isActive?(this.appsManagerStatus("isDelayed")&&(this.appsManagerStatus("pause"),this.appsManagerStatus("resume")),this.callback(2)):(this.appsManagerStatus("delay"),a.history.go(-2))},e.prototype.replaceStateMatch=function(){this.onHashChangeEventBinded=d.functions.bind(this.onHashChangeEvent,this),this.triggerHandlerReplacedStateBinded=d.functions.bind(this.triggerHandlerReplacedState,this),d.event.addEvent(a,"hashchange",this.onHashChangeEventBinded),this.timer=a.setTimeout(this.triggerHandlerReplacedStateBinded,100)},e.prototype.checkStates=function(){a.history.state===this.VE_BACK_BUTTON1&&this.lastHistoryState===this.VE_BACK_BUTTON2?this.onStateMatch():this.lastHistoryState===this.VE_BACK_BUTTON_REPLACED&&this.replaceStateMatch(),this.lastHistoryState=a.history.state},e.prototype.handleEvent=function(){this.readyStateInteractive?this.readyStateInteractive=!1:this.checkStates()},e.prototype.onPushState=function(a){this.lastHistoryState=a},e.prototype.overwritePushState=function(){var b=this,c=a.history.pushState;a.history.pushState=function(d){return"function"==typeof a.history.onpushstate&&a.history.onpushstate({state:d}),b.onPushState(d),c.apply(a.history,arguments)}},e.prototype.onReplaceState=function(a){switch(this.lastHistoryState){case this.VE_BACK_BUTTON1:this.VE_BACK_BUTTON1=a;break;case this.VE_BACK_BUTTON2:this.VE_BACK_BUTTON2=a;break;case this.VE_BACK_BUTTON_REPLACED:this.VE_BACK_BUTTON_REPLACED=a}this.lastHistoryState=a},e.prototype.overwriteReplaceState=function(){var b=this,c=a.history.replaceState;a.history.replaceState=function(d){return"function"==typeof a.history.onreplacestate&&a.history.onreplacestate({state:d}),b.onReplaceState(d),c.apply(a.history,arguments)}},e.prototype.setPushStateFunction=function(b){var c=b.length;this.stateFunctionsOverwrited||(this.stateFunctionsOverwrited=!0,b.state===this.VE_BACK_BUTTON2?b.pushState(this.VE_BACK_BUTTON_REPLACED,this.VE_BACK_BUTTON_REPLACED,a.location.href):(b.pushState(this.VE_BACK_BUTTON1,this.VE_BACK_BUTTON1,a.location.href),b.length<=c?b.replaceState(this.VE_BACK_BUTTON_REPLACED,this.VE_BACK_BUTTON_REPLACED,a.location.href):b.pushState(this.VE_BACK_BUTTON2,this.VE_BACK_BUTTON2,a.location.href)),this.lastHistoryState=b.state,this.overwritePushState(),this.overwriteReplaceState())},e.prototype.setEvent=function(){this.setPushStateFunction(a.history),"interactive"!==b.readyState||"Chrome"!==this.browser.browser()&&"Safari"!==this.browser.browser()||(this.readyStateInteractive=!0),this.handleEventBinded=d.functions.bind(this.handleEvent,this),d.event.addEvent(a,"popstate",this.handleEventBinded)},e.prototype.add=function(){return a.history.state===this.VE_BACK_BUTTON1?(a.history.go(-1),this.isEventAdded=!0,setTimeout(d.functions.bind(this.setEvent,this),10)):this.setEvent(),!0},e.prototype.activate=function(){this.isActive=!0},e.prototype.deactivate=function(){this.isActive=!1},e.prototype.remove=function(){return this.deactivate(),!0},c.PushStateBackButton=e}(window,document,j,k),function(a,b,c,d){"use strict";function e(){return Math.max(b.documentElement.clientHeight,a.innerHeight||0)}function f(a,b,c){var d=this;d.callback=a,d.documentHeight=e(),d.distanceSensitivity=20,d.movementSensitivity=40,d.appsManagerStatus=b,d.isIE="IE"===c.browser(),d.mouseY=1,d.movementY=0}f.prototype.getDependencies=function(){return[]},f.prototype.handleEvent=function(a){var b=this,c=!1;b.isIE?(b.movementY>b.movementSensitivity||b.mouseY<b.distanceSensitivity||b.mouseY>b.documentHeight-b.distanceSensitivity)&&(c=!0):(a.clientY<0||a.clientY>this.documentHeight)&&(c=!0),c&&(d.shell.info("ExitIntent event fired"),b.callback("exitIntent"))},f.prototype.onMouseMove=function(a){this.movementY=Math.abs(this.mouseY-a.clientY),this.mouseY=a.clientY},f.prototype.onResizeWindow=function(){this.documentHeight=e()},f.prototype.add=function(){var c,e,f=this,g=!0;return f.onMouseMoveBound=d.functions.bind(f.onMouseMove,f),f.onResizeWindowBound=d.functions.bind(f.onResizeWindow,f),e=d.event.addEvent(b.documentElement,"mouseleave",f),c=d.event.addEvent(a,"resize",f.onResizeWindowBound),f.isIE&&(g=d.event.addEvent(b.documentElement,"mousemove",f.onMouseMoveBound)),g&&c&&e},f.prototype.activate=function(){this.isActive=!0},f.prototype.deactivate=function(){this.isActive=!1},f.prototype.remove=function(){var c,e,f=this,g=!0;return e=d.event.removeEvent(b.documentElement,"mouseleave",f),c=d.event.removeEvent(a,"resize",f.onResizeWindowBound),f.isIE&&(g=d.event.removeEvent(b.documentElement,"mousemove",f.onMouseMoveBound)),g&&c&&e},c.Events=c.Events||{},c.Events.ExitIntent=f}(window,document,j,k),function(a,b,c){"use strict";function d(a){this.callback=a}d.prototype.getDependencies=function(){return["backButton"]},d.prototype.handleEvent=function(b){var d;return c.shell.info("Beforeunload event fired"),this.isActive&&(d=this.callback("exit"))?((b||a.event).returnValue=d,d):void 0},d.prototype.add=function(){return c.event.addEvent(a,"beforeunload",this)},d.prototype.activate=function(){this.isActive=!0},d.prototype.deactivate=function(){this.isActive=!1},d.prototype.remove=function(){return c.event.removeEvent(a,"beforeunload",this)},b.Events=b.Events||{},b.Events.Exit=d}(window,j,k),function(a,b,c,d){"use strict";function e(a){this.callback=a,this.inactivityStartTime=0,this.timerDelay=3e5}e.prototype.getDependencies=function(){return[]},e.prototype.handleEvent=function(){d.shell.info("Inactivity event fired"),this.callback("inactivity")||this.reset()},e.prototype.start=function(a){a&&a.delay&&(this.timerDelay=a.delay),this.inactivityStartTime=d.date.now(),this.timer=b.setTimeout(d.functions.bind(this.handleEvent,this),this.timerDelay)},e.prototype.reset=function(a){b.clearTimeout(this.timer),this.start(a)},e.prototype.delay=function(){this.reset()},e.prototype.stop=function(){clearTimeout(this.timer),this.inactivityStartTime=0},e.prototype.add=function(b){var c=this;return b&&b.delay&&this.start(b),this.delayBinded=d.functions.bind(this.delay,this),d.event.addEvent(a,"mousemove",this.delayBinded),d.event.addEvent(a,"keydown",this.delayBinded),VeAPI.manager.inactivityCounter=function(){d.shell.log(0!==c.inactivityStartTime?(d.date.now()-c.inactivityStartTime)/1e3+" secs":"Not active")},!0},e.prototype.activate=function(){this.reset()},e.prototype.deactivate=function(){this.stop()},e.prototype.remove=function(){return d.event.removeEvent(a,"mousemove",this.delayBinded),d.event.removeEvent(a,"keydown",this.delayBinded),this.stop(),!0},c.Events=c.Events||{},c.Events.Inactivity=e}(document,window,j,k),function(a,b){"use strict";function c(a){this.callback=a}c.prototype.getDependencies=function(){return[]},c.prototype.handleEvent=function(){this.isActive&&(b.shell.info("Load event fired"),this.callback("load"))},c.prototype.add=function(){return this.handleEventBinded=b.functions.bind(this.handleEvent,this),setTimeout(this.handleEventBinded,10),!0},c.prototype.reset=function(){setTimeout(this.handleEventBinded,10)},c.prototype.activate=function(){this.isActive=!0},c.prototype.deactivate=function(){this.isActive=!1},c.prototype.remove=function(){return!0},a.Events=a.Events||{},a.Events.Load=c}(j,k),function t(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,t,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function(){"use strict";var a={utilsReady:!1,appsConfigured:!1,appsFormManager:null,captureCore:null,init:function(a){var b=this;b.captureCore=a.captureCore,b.appsCore=a.appsCore,b.storage=a.storage,a.utilsController.once("utils_ready",function(){b.markUtilsReady(),b.checkAppsReadyToStart()&&b.startApps()}),a.formIdentificationCore.once("form_apps-configured",function(a){b.markAppsConfigured(),b.appsFormManager=a,b.checkAppsReadyToStart()&&b.startApps()})},checkAppsReadyToStart:function(){var a=this;return a.utilsReady&&a.appsConfigured&&null!==a.appsFormManager&&null!==a.captureCore&&null!==a.appsCore},markUtilsReady:function(){this.utilsReady=!0},markAppsConfigured:function(){this.appsConfigured=!0},startApps:function(){var a,b=this,c=b.appsCore,d=b.captureCore,e=b.appsFormManager;c.init(),c.startApps(e.getAppsAvailable(),b.storage,d.getCapturedDataValues()),a=c.getAgentManager(),d.setAgentManager(a)}};b.exports=a}()},{}],2:[function(a,b,c){!function(c,d){"use strict";function e(a,b){var c,e,f=this;a=a||{},b=b||{},f.tagData=a,f.pluginsByApp=b,c=a.captureConfig||{},e="Ve."+(c.JourneyId||"0")+".",f.storage=d.VeStorage.getStorage(e),f.formIdentificationStarted=!1}var f=a("./UtilsGlobal"),g=a("./FormIdentificationCore"),h=a("../Shared/Classes/Browser"),i=a("./AppsInitialiser");e.prototype.forceAppOnLoadWhenRequired=function(){var a,b=this.tagData;a=d.domain.getQueryParameter("veAppForceLoad",document.referrer),a&&(this.tagData.apps=d.tagTransformer.appForceLoad(b.apps,a))},e.prototype.init=function(){var a,b,e,i,j,k,l=this;l.forceAppOnLoadWhenRequired(),a=l.tagData,b=new f(a),e=new c.ApiManager({domain:a.appsServicesUrl,queueManager:c.QueueManager.getInstance(),methodWindow:d.getUtilsIframe()}),i=new c.CaptureCore(a),j=new g(a),k=new h(a.settings.unsupportedBrowsersVersionPlatform),d.shell.log("initialising capture-apps"),l.appsApi=e,l.globalUtils=b,k.init(),l.checkAppsSupported(k)&&(l.initializePlugins(),l.setUpAppsInit(j,i,k)),l.startFormIdentification(j,i),b.init(e,l.storage)},e.prototype.startFormIdentification=function(a,b){var c=this;c.formIdentificationStarted||(d.shell.log("starting form identification process"),c.listenForCompliance(a),c.listenForCaptureConfigured(a,b),a.init(),c.formIdentificationStarted=!0)},e.prototype.listenForCompliance=function(a){function b(a){d.compliance.init(c,a.getFormId())}var c=this.tagData;a.on("form-classicForms_identification-complete",b)},e.prototype.listenForCaptureConfigured=function(a,b){function c(a){b.init(a)}a.on("form_capture-configured",c)},e.prototype.checkAppsSupported=function(a){var b=!0;return a.isSupported||(d.shell.info("Not loading VeApps : "+a.messageNotSupported()),b=!1),d.domain.isInIframe()&&(d.shell.info("Not loading VeApps: within an Iframe"),b=!1),b},e.prototype.setUpAppsInit=function(a,b,d){var e,f=this;e=new c.AppsCore(f.appsApi,f.tagData,d),i.init({captureCore:b,appsCore:e,storage:f.storage,utilsController:f.globalUtils,formIdentificationCore:a})},e.prototype.getEnabledApps=function(){var a,b,c,d=this,e=d.tagData.apps||[],f=[];for(c=0;c<e.length;c++)a=e[c],a.name&&a.enabled&&(b=a.name.toLowerCase(),f.push(b));return f},e.prototype.getActivePlugins=function(){var a,b,c,e=this,f=e.getEnabledApps(),g=e.tagData.criteriaFilters||{},h=[];for(a in g)-1!==f.indexOf(a)&&(c=e.pluginsByApp[a],c&&c.length>0&&(b=g[a]||[],b.length>0&&(h=d.array.concatWithoutDuplicate(c,h))));return h},e.prototype.initializePlugins=function(){var a,b=this.getActivePlugins();for(a=0;a<b.length;a++)d.capture.plugins[b[a]]&&d.capture.plugins[b[a]].init({utilsController:this.globalUtils})},b.exports=e}(j,k)},{"../Shared/Classes/Browser":6,"./AppsInitialiser":1,"./FormIdentificationCore":3,"./UtilsGlobal":4}],3:[function(a,b,c){!function(c,d,e,f){"use strict";function g(a,b){var d,e={};for(d in a)a[d]&&(e[d]=new c.FormIdentifier(a[d],b));return e}function h(a,b){var c,e=b.criteriaFilters||{},f=e[a]||[],g=[];for(c=0;c<f.length;c++)g=d.array.pushWithoutDuplicate(f[c].value,g);return g}function i(a,b){return{appName:a,appAgents:h(a,b),priority:1,FormBlackListURLs:[],FormURLs:[],
Paremeter:[],FormTypeId:6,FormId:a}}function j(a){var b=this;n.call(b),a=a||{},b.tagData=a,b.formGroups={},b.isInitialized=!1}var k="classicForms",l="productForms",m={1:k,2:k,3:k,4:l,5:l},n=a("events").EventEmitter;j.prototype=d.object.create(n.prototype),j.prototype.init=function(){var a,b=this,c=b.tagData,d=c.settings||{},e=d.appsForms;b.isInitialized||(b.publishVeApiMethods(),b.listenForClassicFormsIdentification(),b.listenForProductFormsIdentification(),b.listenForAppsFormsIdentification(),a=b.splitFormsByType(),e&&e.length>0?a.appsForms=e:a.appsForms=b.buildDefaultApps(),b.formGroups=g(a,window.location.href),b.matchAllFormGroups(),b.isInitialized=!0)},j.prototype.publishVeApiMethods=function(){var a=this;e.VeAPI.capture&&(e.VeAPI.capture.getFormId=function(b){return b=b||"classicForms",a.getFormGroupFormId(b)})},j.prototype.listenForClassicFormsIdentification=function(){var a=this;a.on("form-classicForms_identification-complete",function(){a.checkCaptureRequired()})},j.prototype.listenForProductFormsIdentification=function(){var a=this;a.on("form-productForms_identification-complete",function(){a.checkCaptureRequired()})},j.prototype.checkCaptureRequired=function(){var a,b,e,f=this,g=f.formGroups.classicForms,h=f.formGroups.productForms;f.needsCapture()&&(d.shell.log("Capture configured for this page"),b=h&&h.getMatchingForms()||[],a=g&&g.getMatchingForms()||[],e=new c.FormManager(a,b),f.emit("form_capture-configured",e))},j.prototype.listenForAppsFormsIdentification=function(){var a=this;a.on("form-appsForms_identification-complete",function(b){a.checkAppsRequired(b)})},j.prototype.checkAppsRequired=function(a){var b;this.needsApps()&&(d.shell.log("Apps configured for this page"),b=new c.FormManager(a.getMatchingForms()),this.emit("form_apps-configured",b))},j.prototype.matchAllFormGroups=function(){var a,b,c=this,e=c.formGroups;for(a in e)b=e[a],d.shell.log("beginning identification for formGroup: "+a),c.identifyFormGroup(b,a)},j.prototype.splitFormsByType=function(){var a,b,c,e=this.tagData,g=e.captureConfig||{},h=g.Forms||[],i={};for(a=0;a<h.length;a++)c=h[a],b=m[c.FormTypeId],b!==f&&(i[b]?i[b]=d.array.pushWithoutDuplicate(c,i[b]):i[b]=[c]);return i},j.prototype.buildDefaultApps=function(){var a,b,c=this.tagData,d=c.apps||[],e=[];for(a=0;a<d.length;a++)b=d[a].name.toLowerCase(),e.push(i(b,c));return 0===e.length&&(e=null),e},j.prototype.needsCapture=function(){var a=!1,b=!1,c=this.formGroups,d=c.classicForms,e=c.productForms,f=!0;return d&&(f=d.identificationComplete()),f&&e&&(f=e.identificationComplete()),f&&(a=d&&d.getMatchingForms().length>0,b=e&&e.getMatchingForms().length>0),!(!a&&!b)},j.prototype.needsApps=function(){var a=this.formGroups.appsForms;return!!(a&&a.identificationComplete()&&a.getMatchingForms().length>0)},j.prototype.onFormIdentificationComplete=function(a,b){var c=a.getFormId();d.shell.log("identified formId as: "+c+" for form group: "+b),a.identificationComplete(!0),this.emit("form-"+b+"_identification-complete",a)},j.prototype.identifyFormGroup=function(a,b){var c,e=this;a.init(),c=a.matchFormsByUrl(),c.length>1?(c=a.preferFormsWithParameters(),c.length>1?d.page.hasBeenLoaded()?(a.preferFormsWithVisibleFormMappings(),e.onFormIdentificationComplete(a,b)):d.page.once("page_loaded",function(){a.preferFormsWithVisibleFormMappings(),e.onFormIdentificationComplete(a,b)}):1===c.length&&e.onFormIdentificationComplete(a,b)):e.onFormIdentificationComplete(a,b)},j.prototype.getFormGroupFormId=function(a){var b=this.formGroups[a];return b?b.getFormId():0},b.exports=j}(j,k,window)},{events:27}],4:[function(a,b,c){!function(c,d){"use strict";function e(){c.QueueManager&&c.QueueManager.getInstance().init()}function f(a){var b;null!==a&&(b=a.sessionId.replace(/^(A|C)\|/,""),d.VeStorage.setSessionId(b)),e()}function g(a){h.call(this),a=a||{},j(),this.tagData=a,this.settings=a.settings||{}}var h=a("events").EventEmitter,i=a("../Shared/Classes/Session"),j=a("../Shared/Utils/UtilsIframe");g.prototype=d.object.create(h.prototype),g.prototype.init=function(a,b){function c(){d.shell.log("storage ready. Initialising Utils required storage"),h.initialiseStorageRequiredUtils(b)}var g,h=this,j=h.tagData,k=h.settings,l={referrer:document.referrer,landingPage:window.location.href,journeyCode:j.journeycode,cookieSettings:k.cookies,success:f,failure:e};d.messageManager.init(window.location.protocol+j.veHostDomain),d.VeStorage.init(j.veHostDomain,j.captureConfig.JourneyId,c),g=new i(j.captureConfig.JourneyId,a),g.init(l),h.sessionManager=g},g.prototype.initialiseStorageRequiredUtils=function(a){var b=this.settings;d.tabsManager.init(),d.promoCode.init(a,b.promoCodeAutofill),d.promoCode.checkForAutofill(),d.shell.log("All utils ready. Running callback"),this.emit("utils_ready")},b.exports=g}(j,k)},{"../Shared/Classes/Session":10,"../Shared/Utils/UtilsIframe":26,events:27}],5:[function(a,b,c){!function(b,c,d,f){"use strict";function g(){try{f.onLoad(),f.onPageLoad()}catch(a){h.error("there was an error within the onLoad or onPageLoad customEvent"),h.error(a)}}var h=a("../Shared/Utils/Shell"),i=a("./CaptureAppsStartup"),j={promote:["productAggregator","productLocalStorage"]},k=new i(d,j);k.init(),c.ready(function(){c.ready&&delete c.ready,e(),g(),b.page.markAsLoaded()})}(k,window.VeAPI,window.veTagData,r)},{"../Shared/Utils/Shell":24,"./CaptureAppsStartup":2}],6:[function(a,b,c){!function(c){"use strict";function d(a){var b=this;b.browserName=null,b.browserVersion=null,b.deviceOS=null,b.deviceType=null,b.isSupported=!1,b.msgNotSupported="Browser is not supported.",b.unsupportedClientSettings=a,b.userAgent=c.navigator.userAgent}var e=a("../Utils/Shell.js"),f=a("../Utils/Array.js"),g="unknown",h={desktop:0,mobile:1},i=[{name:"Chrome",nameRegExp:"CriOS",versionRegExp:".*?CriOS/([0-9\\.]+).*"},{name:"Opera mobile",nameRegExp:"OPR",versionRegExp:".*Chrome.*?OPR/([0-9\\.]+).*"},{name:"Chrome",nameRegExp:"Chrome",versionRegExp:"^(?!.*Version).*Chrome/([0-9\\.]+).*$"},{name:"Firefox",nameRegExp:"Firefox",versionRegExp:".*?Firefox/([0-9\\.]+).*"},{name:"Opera",nameRegExp:"Opera",versionRegExp:".*?Opera/([0-9\\.]+).*"},{name:"IE",nameRegExp:"Trident",versionRegExp:".*?Trident/([0-9\\.]+).*"},{name:"IE",nameRegExp:"MSIE",versionRegExp:".*?MSIE\\s([0-9\\.]+).*"},{name:"Android browser",nameRegExp:"Mobile\\s",versionRegExp:".*?Version/([0-9\\.]+).*"},{name:"Safari",nameRegExp:"Safari",versionRegExp:".*?Version/([0-9\\.]+).*"}],j=[{name:"iPhone/ipod",nameRegExp:"iPhone",deviceType:h.mobile},{name:"iPad",nameRegExp:"iPad",deviceType:h.mobile},{name:"Windows Phone",nameRegExp:"Windows Phone",deviceType:h.mobile},{name:"Windows Tablet",nameRegExp:"(Windows){1}.*?(Tablet PC)",deviceType:h.desktop},{name:"Android",nameRegExp:"Android",deviceType:h.mobile},{name:"Windows",nameRegExp:"Windows",deviceType:h.desktop},{name:"Mac",nameRegExp:"Mac",deviceType:h.desktop}],k={"Windows Phone":null,Android:{Safari:null,"Android browser":null,"Opera mobile":null,Firefox:null},iPad:{Chrome:null,"Android browser":null,"Opera mobile":null,Firefox:null},"iPhone/ipod":{Chrome:null,"Android browser":null,"Opera mobile":null,Firefox:null},Windows:{Safari:null,IE:[5,6,7]},Opera:null};d.prototype.isSupportedBrowser=function(a){var b,c,d=this,e=!0;if(a)for(b in a)e&&(c=a[b],d.isOS(b)?e=!d.osMatchesUnsupported(b,c):d.isBrowser(b)&&(e=!d.browserMatchesUnsupported(b,c)));return e},d.prototype.isOS=function(a){var b,c=!1;for(b=0;b<j.length&&!c;b++)c=j[b].name.toLowerCase()===a.toLowerCase();return c},d.prototype.osMatchesUnsupported=function(a,b){var c,d=this.deviceOS===g,e=!1;if(!d){e=null===b;for(c in b)e||(e=this.browserMatchesUnsupported(c,b[c]));d=this.deviceOS.toLowerCase()===a.toLowerCase()&&e}return d},d.prototype.isBrowser=function(a){var b,c=!1;for(b=0;b<i.length&&!c;b++)c=i[b].name.toLowerCase()===a.toLowerCase();return c},d.prototype.browserMatchesUnsupported=function(a,b){var c,d=this.browserName===g;return d||(c=null===b||this.versionMatchesUnsupported(b),d=this.browserName.toLowerCase()===a.toLowerCase()&&c),d},d.prototype.versionMatchesUnsupported=function(a){var b,c=this.browserVersion===g;for(b=0;b<a.length&&!c;b++)c=a[b]===this.browserVersion;return c},d.prototype.searchVersion=function(a){var b,d=this,e=g;return null!==a&&(b=new RegExp(a.versionRegExp,"g"),e=c.parseFloat(d.userAgent.replace(b,"$1")),"Trident"===a.nameRegExp&&(e+=4),isNaN(e)&&(e=g)),e},d.prototype.getRegexConfig=function(a){var b,c,d=null;for(b=0;b<a.length&&null===d;b++)c=new RegExp(a[b].nameRegExp,"g"),c.test(this.userAgent)&&(d=a[b]);return d},d.prototype.checkForUnsupportedBrowsers=function(){var a=this,b=a.browserName!==g&&a.browserVersion!==g&&a.deviceOS!==g;b&&(b=a.isSupportedBrowser(k),b?a.unsupportedClientSettings&&(b=a.isSupportedBrowser(a.unsupportedClientSettings),b||(a.msgNotSupported="Browser is set as not supported in customer's settings.")):a.msgNotSupported="Browser is set as not supported in version's default settings."),a.isSupported=b},d.prototype.init=function(){var a=this,b=a.getRegexConfig(i),c=a.getRegexConfig(j);a.browserName=null===b?g:b.name,a.browserVersion=a.searchVersion(b),null===c?(a.deviceOS=g,a.deviceType=g):(a.deviceOS=c.name,a.deviceType=c.deviceType),a.publishVeApiBrowser(),a.checkForUnsupportedBrowsers(),e.info("Browser detected: "+a.browserName+(a.isSupported?"":" NOT")+" supported")},d.prototype.browser=function(){return this.browserName},d.prototype.version=function(){return this.browserVersion},d.prototype.OS=function(){return this.deviceOS},d.prototype.messageNotSupported=function(){return this.msgNotSupported},d.prototype.deviceIsOneOf=function(a){return f.indexOf(this.deviceType,a)>-1},d.prototype.isDesktop=function(){return this.deviceType===h.desktop},d.prototype.isMobile=function(){return this.deviceType===h.mobile},d.prototype.publishVeApiBrowser=function(){c.VeAPI&&(c.VeAPI.browser=this)},b.exports=d}(window,document)},{"../Utils/Array.js":11,"../Utils/Shell.js":24}],7:[function(a,b,c){!function(){"use strict";function c(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function d(a,b){this.namespace=b||"",this.storageInstance=a}var e=2,f=3,g=a("./MessageManager.js");d.prototype.getItem=function(a){var b=this.storageInstance,c=b.storage,d=null;return null!==c&&(c=c||{},d=c[this.namespace+a]),d},d.prototype.setItem=function(a,b){function c(){g.postMessage(h,{command:e,key:f,value:b},i)}var d=this.storageInstance,f=this.namespace+a,h=d.iframeElement.contentWindow,i=d.iframeDomain;d.storage=d.storage||{},d.storage[f]=b,d.iframeReady?c():d.queuedRequests.push(c)},d.prototype.removeItem=function(a){function b(){g.postMessage(e,{command:f,key:c},h)}var c=this.namespace+a,d=this.storageInstance,e=d.iframeElement.contentWindow,h=d.iframeDomain;null!==d.storage&&(d.storage=d.storage||{},delete d.storage[c],d.iframeReady?b():d.queuedRequests.push(b))},d.prototype.getAllItems=function(){var a,b=this.storageInstance.storage,d={},e=c(this.namespace),f=new RegExp("^"+e);for(a in b)f.test(a)&&(d[a.replace(f,"")]=b[a]);return d},b.exports=d}()},{"./MessageManager.js":9}],8:[function(a,b,c){!function(){"use strict";function c(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function d(a){this.namespace=a||"",this.localStorage=localStorage}var e=a("../Utils/Json.js");d.prototype.getItem=function(a){return e.parseJSON(this.localStorage.getItem(this.namespace+a))},d.prototype.setItem=function(a,b){this.localStorage.setItem(this.namespace+a,e.stringify(b))},d.prototype.removeItem=function(a){this.localStorage.removeItem(this.namespace+a)},d.prototype.getAllItems=function(){var a,b,d=this.localStorage,e=d.length,f={},g=new RegExp("^"+c(this.namespace));for(a=0;e>a;a++)b=d.key(a),g.test(b)&&(f[b.replace(g,"")]=d.getItem(b));return f},b.exports=d}()},{"../Utils/Json.js":22}],9:[function(a,b,c){!function(){"use strict";function c(a,b,c){var d=f.indexOf(b,c)>-1;return!a||d}var d,e=function(){},f=a("../Utils/Array.js"),g=a("../Utils/Event.js"),h=a("../Utils/Json.js");d={subscriptions:{},init:function(a){function b(a){var b,e,g,j=a.origin.replace(/http(s)?/,""),k={};if(g=h.parseJSON(a.data)||{},e=d.subscriptions[g.id]||[],k.data=g,c(i,j,f))for(b=0;b<e.length;b++)"function"==typeof e[b].callback&&e[b].callback.call(e[b].context,k)}var d=this,f=[],i="*"!==a;i&&(a=a.replace(/http(s)?/,""),f.push(a)),d.subscriptions={},g.addEvent(window,"message",b,!1),d.init=e},subscribeTo:function(a,b,c){this.subscriptions[a]=this.subscriptions[a]||[],this.subscriptions[a].push({callback:b,context:c})},postMessage:function(a,b,c){"string"!=typeof b&&(b=h.stringify(b)),a.postMessage(b,c)},unsubscribeFrom:function(a,b){var c,d=this.subscriptions[a]||[];for(c=d.length-1;c>=0;c--)d[c].callback===b&&d.splice(c,1)}},b.exports=d}()},{"../Utils/Array.js":11,"../Utils/Event.js":20,"../Utils/Json.js":22}],10:[function(a,b,c){!function(){"use strict";function c(a){var b={};return a&&a.enabled?(b.isCookieEnabled=!0,b.timeToLive=a.timeToLive):(b.isCookieEnabled=!1,b.timeToLive=0),b}function d(a,b){var c="Ve."+a+".";this.appsApiInstance=b,this.storage=e.getStorage(c)}var e=a("../Utils/Storage.js"),f=function(){};d.prototype.init=function(a){var b=a.referrer,d=a.landingPage,e=a.journeyCode,g=a.cookieSettings,h=a.success,i=a.failure,j=0,k=["api","appsmanagerinit"],l=c(g),m=!0;h="function"==typeof h?h:f,i="function"==typeof i?i:f,l.referrerDomain=b,l.landingPage=d,l.journeyCode=e,this.appsApiInstance.request(k,null,h,i,"sessionInit request",l,j,m)},b.exports=d}()},{"../Utils/Storage.js":25}],11:[function(a,b,c){!function(){"use strict";var c,d=a("./Object.js");c={indexOf:function(a,b){if("undefined"==typeof b)throw new TypeError("Argument array should not be undefined or NULL.");return b.indexOf?this.indexOf=function(a,b){return b.indexOf(a)}:this.indexOf=function(a,b){var c,d=Object(b),e=d.length>>>0;if(e>0)for(c=0;e>c;c++)if(c in d&&d[c]===a)return c;return-1},this.indexOf(a,b)},removeElementFromArray:function(a,b){var c;for(c=0;c<a.length;c++)if(a[c]===b||"object"==typeof a[c]&&d.areEqual(a[c],b))return a.splice(c,1),a;return a},removeIndex:function(a,b){a[b]&&a.splice(b,1)},concatWithoutDuplicate:function(a,b){function c(a){var b;for(b=0;b<a.length;b++)-1===d.indexOf(a[b],e)&&e.push(a[b])}var d=this,e=[];return c(a),c(b),e},pushWithoutDuplicate:function(a,b){return-1===this.indexOf(a,b)&&b.push(a),b},removeNullElements:function(a){var b;for(b=0;b<a.length;b++)null===a[b]&&(a.splice(b,1),b--);return a}},b.exports=c}()},{"./Object.js":23}],12:[function(a,b,c){!function(){"use strict";var a={now:function(){return Date.now?this.now=function(){return window.Date.now()}:this.now=function(){return(new Date).getTime()},this.now()}};b.exports=a}()},{}],13:[function(a,b,c){!function(){"use strict";var c=a("./Object"),d=a("./Dom/ClassNames"),e=a("./Dom/ElementSelectors"),f=a("./Dom/BodyDimensions"),g=a("./Dom/WindowDimensions"),h=a("./Dom/CrudElements"),i={};i=c.concatenate(i,d),i=c.concatenate(i,e),i=c.concatenate(i,f),i=c.concatenate(i,g),i=c.concatenate(i,h),b.exports=i}()},{"./Dom/BodyDimensions":14,"./Dom/ClassNames":15,"./Dom/CrudElements":16,"./Dom/ElementSelectors":17,"./Dom/WindowDimensions":18,"./Object":23}],14:[function(a,b,c){!function(){"use strict";var a;a={bodyHeight:0,getBodyWidth:function(){return document.body.offsetWidth},getBodyHeight:function(){return document.body.offsetHeight},getLastUpdatedBodyHeight:function(){return this.bodyHeight},updateBodyHeight:function(){this.bodyHeight=this.getBodyHeight()}},b.exports=a}()},{}],15:[function(a,b,c){!function(){"use strict";var a;a={hasClass:function(a,b){return a.classList?this.hasClass=function(a,b){return a.classList.contains(b)}:this.hasClass=function(a,b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)},this.hasClass(a,b)},addClass:function(a,b){a.classList?this.addClass=function(a,b){a.classList.add(b)}:this.addClass=function(a,b){this.hasClass(a,b)||(a.className=a.className?[a.className,b].join(" "):b)},this.addClass(a,b)},removeClass:function(a,b){a.classList?this.removeClass=function(a,b){a.classList.remove(b)}:this.removeClass=function(a,b){var c;this.hasClass(a,b)&&(c=a.className,a.className=c.replace(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," "))},this.removeClass(a,b)},toggleClass:function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)}},b.exports=a}()},{}],16:[function(a,b,c){!function(){"use strict";var a;a={exists:function(a){return null!==a},focus:function(a){a&&window.setTimeout(function(){try{a.focus()}catch(b){}},10)},createDiv:function(a,b){var c,d=document.createElement("div");d.innerHTML=b||"";for(c in a)a.hasOwnProperty(c)&&d.setAttribute(c,a[c]);return d},createAndSubmitForm:function(a,b,c){var d,e,f,g='<input type="hidden" name="{{ name }}" value="{{ value }}">',h="";for(f in b)b.hasOwnProperty(f)&&(e=g.replace("{{ name }}",f).replace("{{ value }}",b[f]),h+=e);d=document.createElement("form"),d.action=a,d.method="post",d.target=c?"_blank":"_parent",d.style.visibility="hidden",d.innerHTML=h,document.body.appendChild(d),d.submit()},removeElement:function(a){a&&a.parentElement.removeChild(a)}},b.exports=a}()},{}],17:[function(a,b,c){!function(){"use strict";var a;a={concatNodeList:function(a,b){if(!("object"==typeof a&&void 0!==a.length||"object"==typeof b&&void 0!==b.length))throw new TypeError("The parametters are supposed to be Arrays or Node List.");return a=Array.prototype.slice.call(a),b=Array.prototype.slice.call(b),a.concat(b)},getTopWindow:function(a){var b;return b=a.parent!==a?this.getTopWindow(a.parent):a},getElementsByClassName:function(a,b,c){return document.getElementsByClassName?this.getElementsByClassName=function(a,b,c){var d=[];return b=b||document,"string"!=typeof a?d:b.getElementsByClassName(a)}:document.querySelectorAll?this.getElementsByClassName=function(a,b,c){var d=[];return"string"!=typeof a?d:this.querySelectorAll("."+a,b)}:this.getElementsByClassName=function(a,b,c){var d,e,f,g,h,i=[];if("string"!=typeof a)return i;for(b=b||document,c=c||"*",d=b.getElementsByTagName(c),e=d.length,f=new RegExp("(^|\\s)"+a+"(\\s|$)"),g=0,h=0;e>g;g++)f.test(d[g].className)&&(i[h]=d[g],h++);return i},this.getElementsByClassName(a,b,c)},getElementsByDataAttribute:function(a,b,c){var d,e=[],f=0;if(null!==a)for(d=a.getElementsByTagName("*"),f=0;f<d.length;f++)!d[f].hasAttribute(b)||void 0!==c&&d[f].getAttribute(b)!==c||e.push(d[f]);return e},querySelectorAll:function(a,b){var c;b=b||document;try{c=b.querySelectorAll(a)}catch(d){c=b===document?VEjQuery(a):VEjQuery(b).find(a)}return c},getElementsByQuerySelectors:function(a){var b=0,c=[];if("object"!=typeof a||void 0===a.length)throw new TypeError("The parametter is supposed to be an Array.");for(b=0;b<a.length;b++)c=this.concatNodeList(c,this.querySelectorAll(a[b]));return c},getParentById:function(a,b){var c=a&&a.parentNode,a=null;return c!==document.body&&(c&&c.getAttribute("id")!==b&&(c=this.getParentById(c,b)),a=c),a},getParentByTagName:function(a,b){var c=a&&a.parentNode,a=null;return c&&c.tagName&&(c.tagName.toLowerCase()!==b.toLowerCase()&&(c=this.getParentByTagName(c,b)),a=c),a},getParentByDataAttribute:function(a,b,c){var d=a&&a.parentNode,a=null;return d&&d.hasAttribute&&((!d.hasAttribute(b)||void 0!==c&&d.getAttribute(b)!==c)&&(d=this.getParentByDataAttribute(d,b,c)),a=d),a}},b.exports=a}()},{}],18:[function(a,b,c){!function(){"use strict";var a;a={windowTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight}},b.exports=a}()},{}],19:[function(a,b,c){!function(){"use strict";function c(a,b){var c,f,g=!0;return a!==b&&(c=e.getQueryStringObject(a),f=e.getQueryStringObject(b),g=d.areEqual(c,f)),g}var d=a("./Object.js"),e={isInIframe:function(){return window.location!==window.parent.location},referrerIsInDomains:function(a,b){function c(a,b){for(;d<b.length;d++)if(b[d]=b[d].replace(/\./g,"\\."),e=new RegExp("(^|\\.)"+b[d]+"$"),e.test(a))return!0;return!1}var d=0,e=null;return""!==a?0===b.length?!1:(a=a.split("/")[2],a=a.replace("www.",""),c(a,b)):!0},getHref:function(){return window.location.href},createUrl:function(a,b,c,d){var e,f,g,h,i;if(b)for(e=0,f=b.length;f>e;e++)d&&(b[e]=encodeURIComponent(b[e])),a=0===e?a+("/"!==a[a.length-1]?"/":"")+b[e]:a+"/"+b[e];e=0;for(g in c)d?(h=encodeURIComponent(g),i=encodeURIComponent(c[g])):(h=g,i=c[g]),a=a+(0===e&&-1===a.indexOf("?")?"?":"&")+h+"="+i,e++;return a},getQueryParameter:function(a,b){var c=b?b:window.location.search,d=c.match(new RegExp("[?&]"+a+"=([^&]*)(&?)","i"));return d?decodeURIComponent(d[1]):d},isURL:function(a){return!0},recursiveURIDecode:function(a){for(var b="";b!==a;){b=a;try{a=decodeURIComponent(b)}catch(c){return a}}return a},getDomainHost:function(a){var b,c=this,d="";return c.isURL(a)&&(b=document.createElement("a"),b.href=a,d=b.hostname),d},getSearchEngineKeywords:function(){return{google:"q",yahoo:"p",aol:"q",ask:"q",bing:"q",baidu:"wd",yandex:"text"}},getSearchEngineRegExp:function(){var a,b="",c=this.getSearchEngineKeywords();for(a in c)a.hasOwnProperty()||(b=b+"|"+a);return b.replace("|","")},getSearchEngine:function(a){var b,c=new RegExp(".*?(\\.|://)("+this.getSearchEngineRegExp()+")\\..*");return b=c.test(a)?a.replace(c,"$2"):!1},encodeParameter:function(a){return encodeURIComponent(a)},areUrlsEqual:function(a,b,d){var e,f,g=!0;return d=d||{includeProtocol:!0},a=a.toLowerCase(),b=b.toLowerCase(),a!==b&&(e=document.createElement("a"),f=document.createElement("a"),e.href=a,f.href=b,(d.includeProtocol&&e.protocol!==f.protocol||e.host!==f.host||e.port!==f.port||e.pathname!==f.pathname||!c(e.search.substr(1),f.search.substr(1)))&&(g=!1)),g},getQueryStringObject:function(a){var b,c,d,e={};if(a)for(b=a.split("&"),d=0;d<b.length;d++)c=b[d].split("="),0!==c.length&&(e[decodeURIComponent(c[0])]=decodeURIComponent(c[1]));return e}};b.exports=e}()},{"./Object.js":23}],20:[function(a,b,c){!function(){"use strict";var c=a("./Dom.js"),d={addEvent:function(a,b,c,d){return a.addEventListener?this.addEvent=function(a,b,c,d){return d=d?!0:!1,a.addEventListener(b,c,d),!0}:a.attachEvent?this.addEvent=function(a,b,c){return a.attachEvent("on"+b,c),!0}:this.addEvent=function(){return!1},this.addEvent(a,b,c,d)},removeEvent:function(a,b,c,d){return a.removeEventListener?this.removeEvent=function(a,b,c,d){return d=d?!0:!1,a.removeEventListener(b,c,d),!0}:a.detachEvent?this.removeEvent=function(a,b,c){return a.detachEvent("on"+b,c),!0}:this.removeEvent=function(){return!1},this.removeEvent(a,b,c,d)},addEventsToArray:function(a,b,c,d){var e,f;if(void 0===a)throw new TypeError("Argument array should not be undefined or NULL.");for(f=a.length>>>0,e=0;f>e;e++)this.addEvent(a[e],b,c,d)},removeEventsFromArray:function(a,b,c,d){var e,f,g=!0,h=!0;if("undefined"==typeof a)throw new TypeError("Argument array should not be undefined or NULL.");for(e=a.length>>>0,f=0;e>f;f++)h=this.removeEvent(a[f],b,c,d),g=h&&g?!0:!1;return g},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,a},getSrcElement:function(a){return a.target||a.srcElement},onClick:function(a,b){c.exists(a)&&this.addEvent(a,"click",b)},isOpeningNewWindow:function(a){var b=!1,c=!1;if(a.which)switch(a.which){case 1:b=!0;break;case 2:c=!0}else switch(a.button){case 1:b=!0;break;case 4:c=!0}return c||b&&(a.shiftKey||a.ctrlKey)},checkRightClick:function(a){return a.wich&&3===a.wich||!a.wich&&a.button&&2===a.button}};b.exports=d}()},{"./Dom.js":13}],21:[function(a,b,c){!function(){"use strict";b.exports={bind:function(a,b){var c=Array.prototype.slice.call(arguments,1),d=Array.prototype.slice.call(arguments,2),e=function(){},f=function(){return a.apply(this instanceof e?this:b,d.concat(Array.prototype.slice.call(arguments)))};if("function"!=typeof a)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return a.bind?c.length>1?a.bind.apply(a,c):a.bind(b):(e.prototype=a.prototype,f.prototype=new e,f)}}}()},{}],22:[function(a,b,c){!function(){"use strict";var c=a("./Shell.js"),d={parseJSON:function(a,b){var d=a;if("object"!=typeof a&&"undefined"!=typeof JSON)try{d=window.JSON.parse(a)}catch(e){b&&c.log(b)}return d},stringify:function(a,b){var d=a;if("string"!=typeof data&&"undefined"!=typeof JSON)try{d=window.JSON.stringify(a)}catch(e){b&&c.log(b)}return d}};b.exports=d}()},{"./Shell.js":24}],23:[function(a,b,c){!function(){"use strict";var a={create:function(a){function b(){}var c={};return a&&(Object.create?c=Object.create(a):(b.prototype=a,c=new b)),c},isEmpty:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0},areEqual:function(a,b){function c(e,f){for(d in e){if("object"==typeof e[d]&&f[d]){if(!c(e[d],f[d]))return!1}else if(e[d]!==f[d])return!1;delete a[d],delete b[d]}return!0}var d="";return c(a,b)&&c(b,a)},length:function(a){var b=0,c="";if("object"!=typeof a)throw new TypeError("The parametter must be an object.");for(c in a)b++;return b},concatenate:function(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&(d[c]=b[c]);return d},toLowerCase:function(a){var b=null,c={},d=null,e=null;for(b in a)if(d=b.toLowerCase(),"undefined"==typeof a[d]&&d!==b)switch(e=a[b],typeof e){case"string":c[d]=e.toLowerCase();break;case"object":if(null!==e&&"undefined"==typeof e.length){c[d]=this.toLowerCase(e);break}default:c[d]=e}else d===b&&(c[b]=a[b]);return c}};b.exports=a}()},{}],24:[function(a,b,c){!function(){"use strict";var a={log:function(a){try{i.consoleMessagesEnabled&&console.log("VeApps: "+a)}catch(b){}},info:function(a){try{i.consoleMessagesEnabled&&console.info("VeApps: "+a)}catch(b){}},error:function(a){try{i.consoleMessagesEnabled&&console.error("VeApps: "+a)}catch(b){}}};b.exports=a}()},{}],25:[function(a,b,c){!function(c){"use strict";var d=60,e=6e4,f=1,g=a("../Classes/LocalStorageProxy.js"),h=a("../Classes/IframeStorageProxy.js"),i=a("./Domain.js"),j=a("../Classes/MessageManager.js"),k=a("./Date.js"),l=a("./Functions.js"),m={iframeReady:null,queuedRequests:[],init:function(a,b,d){var e=this,f=!0;e.iframeReady=!1,e.iframeDomain="https:"+a,e.iframeId=e.createIframe(b),e.iframeElement=c.getElementById(e.iframeId),j.subscribeTo(e.iframeId,function(a){var b,c,g=a.data.messageBody;if("object"==typeof g)e.storage=g,f&&(f=!1,d());else{for(e.iframeReady=!0,c=e.queuedRequests,b=0;b<c.length;b++)"function"==typeof c[b]&&c[b]();e.queuedRequests=[]}})},createIframe:function(a){var b,d=this,e=d.iframeId||k.now(),f=c.body,g=c.createElement("iframe"),h={iframeId:e,journeyId:a};return null===f&&(b=c.getElementsByTagName("script"),f=b[b.length-1].parentNode),g.id=e,g.style.display="none",g.tabindex=-1,g.src=i.createUrl(d.iframeDomain,["scripts","shared","iframeStorage.html"],h),f.appendChild(g),e},setSessionId:function(a){var b=function(){j.postMessage(this.iframeElement.contentWindow,{command:f,sessionId:a},this.iframeDomain)},c=l.bind(b,this);this.iframeReady?c():this.queuedRequests.push(c)},isInVeSession:function(a){var b=(k.now()-a)/e;return d>b},getStorage:function(a,b){var c;return c=b?new g(a):new h(this,a)}};b.exports=m}(document)},{"../Classes/IframeStorageProxy.js":7,"../Classes/LocalStorageProxy.js":8,"../Classes/MessageManager.js":9,"./Date.js":12,"./Domain.js":19,"./Functions.js":21}],26:[function(a,b,c){!function(a){"use strict";b.exports=function(){var b="veUtilsIframe",c=window.veTagData===a,d=document.getElementById(b);return c?d={contentWindow:window}:null===d&&(d=document.createElement("iframe"),d.id=b,d.style.visibility="hidden",d.style.display="none",d.border="0px",d.frameBorder="0",d.width="0px",d.height="0px",d.tabindex=-1,document.documentElement.appendChild(d),d=document.getElementById(b)),d.contentWindow}}()},{}],27:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}]},{},[5])},10));